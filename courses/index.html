<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PolyTalky ‚Äî –ö–∞—Ç–∞–ª–æ–≥ –∫—É—Ä—Å–æ–≤</title>
  <meta name="description" content="–ö–∞—Ç–∞–ª–æ–≥ –∫—É—Ä—Å–æ–≤ PolyTalky: –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –∏ PRO-–ø—Ä–æ–≥—Ä–∞–º–º—ã –ø–æ –∏—Å–ø–∞–Ω—Å–∫–æ–º—É, –∞–Ω–≥–ª–∏–π—Å–∫–æ–º—É, –∏—Ç–∞–ª—å—è–Ω—Å–∫–æ–º—É, –Ω–µ–º–µ—Ü–∫–æ–º—É –∏ –¥—Ä—É–≥–∏–º —è–∑—ã–∫–∞–º. –§–∏–ª—å—Ç—Ä—ã, –ø–æ–∏—Å–∫ –∏ —É–¥–æ–±–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è." />
  <!-- –ï—Å–ª–∏ —Å–∞–π—Ç –ø—É–±–ª–∏–∫—É–µ—Ç—Å—è –∫–∞–∫ username.github.io/polytalky/ ‚Äî –æ—Å—Ç–∞–≤—å base. –ï—Å–ª–∏ –≤ –∫–æ—Ä–Ω–µ ‚Äî —É–¥–∞–ª–∏ —Å—Ç—Ä–æ–∫—É –Ω–∏–∂–µ. -->
  <base href="/polytalky/">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root{
      --brand-yellow:#FFDE59; --brand-yellow-deep:#FFBA08; --brand-orange:#E85D04;
      --ink:#0F172A; --ink-2:#334155; --card:#FFFFFF; --bg:#FFF8D6;
    }
    body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;background:var(--bg);color:var(--ink)}
    .shadow-soft{box-shadow:0 10px 30px rgba(0,0,0,.08)}
    .card{transition:transform .25s ease, box-shadow .25s ease}
    .card:hover{transform:translateY(-6px)}
    .badge{background:#fff;border:1px solid rgba(0,0,0,.06);padding:.45rem .75rem;border-radius:999px;font-size:.8rem;color:var(--ink-2)}
    .badge-free{background:#e8ffe3;border:1px solid #a7f3d0;color:#065f46}
    .badge-pro{background:#fff0f0;border:1px solid #fecaca;color:#7f1d1d}
    .chip{border:1px solid #00000014;background:#fff;border-radius:999px;padding:.5rem .9rem;font-size:.9rem}
    .chip.active{background:var(--brand-yellow);border-color:#0000001f}
    .reveal{opacity:0;transform:translateY(12px);transition:.5s}
    .reveal.reveal--visible{opacity:1;transform:none}
    @media (min-width:1024px){ .card:hover{transform:translateY(-8px);box-shadow:0 16px 40px rgba(0,0,0,.10)} }
  </style>
</head>
<body>

<!-- Header -->
<header class="sticky top-0 z-50 bg-[#fffef7]/80 backdrop-blur border-b border-black/10">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3 flex items-center justify-between">
    <a href="../" class="flex items-center gap-3 font-semibold text-lg">
      <img src="assets/logo.png" alt="PolyTalky" class="h-8 w-8 rounded-xl"> PolyTalky
    </a>
    <nav class="hidden md:flex items-center gap-6 text-sm text-[var(--ink-2)]">
      <a href="courses/" class="hover:opacity-80 font-semibold text-[var(--ink)]">–ö—É—Ä—Å—ã</a>
      <a href="shop/" class="hover:opacity-80">–ú–∞–≥–∞–∑–∏–Ω</a>
      <a href="student/" class="hover:opacity-80">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</a>
      <a href="courses/" class="inline-flex items-center gap-2 bg-[var(--brand-yellow)] hover:bg-[var(--brand-yellow-deep)] px-4 py-2 rounded-xl text-sm font-semibold text-[#1a1a1a] shadow-soft">–ù–∞—á–∞—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω–æ</a>
    </nav>
    <button id="burger" class="md:hidden inline-flex items-center justify-center h-10 w-10 rounded-xl bg-white border border-black/10 shadow-soft" aria-label="–ú–µ–Ω—é">‚ò∞</button>
  </div>
  <div id="mnav" class="md:hidden hidden border-t border-black/10 bg-[#fffef7]">
    <div class="max-w-7xl mx-auto px-4 py-3 grid gap-2 text-[var(--ink-2)]">
      <a class="px-3 py-3 rounded-xl bg-white border border-black/10 shadow-soft" href="../">–ì–ª–∞–≤–Ω–∞—è</a>
      <a class="px-3 py-3 rounded-xl bg-white border border-black/10 shadow-soft" href="shop/">–ú–∞–≥–∞–∑–∏–Ω</a>
      <a class="px-3 py-3 rounded-xl bg-white border border-black/10 shadow-soft" href="student/">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</a>
      <a class="px-3 py-3 rounded-xl bg-[var(--brand-yellow)] text-[#1a1a1a] font-semibold shadow-soft" href="courses/">–ù–∞—á–∞—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω–æ</a>
    </div>
  </div>
</header>
<script>
  const b=document.getElementById('burger'), m=document.getElementById('mnav');
  if(b) b.addEventListener('click',()=>m.classList.toggle('hidden'));
</script>

<main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 lg:py-12">
  <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ + —Å—á—ë—Ç—á–∏–∫ -->
  <div class="flex flex-wrap items-end justify-between gap-4">
    <div>
      <h1 class="text-3xl sm:text-4xl font-extrabold leading-tight">–ö–∞—Ç–∞–ª–æ–≥ –∫—É—Ä—Å–æ–≤</h1>
      <p class="text-[var(--ink-2)] mt-1">–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –∏ PRO ‚Äî –Ω–∞–π–¥–∏—Ç–µ –∫—É—Ä—Å –ø–æ–¥ –≤–∞—à—É —Ü–µ–ª—å.</p>
    </div>
    <div class="text-sm text-[var(--ink-2)]"><span id="count">0</span> –∫—É—Ä—Å–æ–≤</div>
  </div>

  <!-- –§–∏–ª—å—Ç—Ä—ã -->
  <section class="mt-6 p-4 sm:p-5 rounded-2xl bg-white border border-black/10 shadow-soft">
    <div class="grid lg:grid-cols-[1fr,auto,auto,auto] gap-3 items-center">
      <!-- –ü–æ–∏—Å–∫ -->
      <label class="relative flex items-center">
        <input id="q" type="search" placeholder="–ü–æ–∏—Å–∫: —è–∑—ã–∫, –∫—É—Ä—Å, —Ç–µ–º–∞‚Ä¶"
               class="w-full rounded-xl border border-black/10 bg-white px-4 py-3 pr-10 outline-none focus:ring-2 focus:ring-[#ffd54a]">
        <span class="absolute right-3 text-[var(--ink-2)]">üîé</span>
      </label>
      <!-- –¢–∏–ø -->
      <div class="flex gap-2 justify-start">
        <button data-type="all" class="chip active" type="button">–í—Å–µ</button>
        <button data-type="free" class="chip" type="button">–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ</button>
        <button data-type="pro"  class="chip" type="button">PRO</button>
      </div>
      <!-- –Ø–∑—ã–∫ -->
      <label class="flex">
        <select id="lang" class="rounded-xl border border-black/10 bg-white px-3 py-3 outline-none focus:ring-2 focus:ring-[#ffd54a]">
          <option value="">–Ø–∑—ã–∫: –ª—é–±–æ–π</option>
        </select>
      </label>
      <!-- –£—Ä–æ–≤–µ–Ω—å / —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ -->
      <div class="flex gap-2">
        <select id="level" class="rounded-xl border border-black/10 bg-white px-3 py-3 outline-none focus:ring-2 focus:ring-[#ffd54a]">
          <option value="">–£—Ä–æ–≤–µ–Ω—å: –ª—é–±–æ–π</option>
          <option>A0</option><option>A1</option><option>A2</option>
          <option>B1</option><option>B2</option><option>Intro</option><option>Starter</option>
        </select>
        <select id="sort" class="rounded-xl border border-black/10 bg-white px-3 py-3 outline-none focus:ring-2 focus:ring-[#ffd54a]">
          <option value="pop">–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å: –ø–æ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏</option>
          <option value="az">–ê‚Üí–Ø</option>
          <option value="za">–Ø‚Üí–ê</option>
        </select>
      </div>
    </div>
  </section>

  <!-- –ü–ª–∞—à–∫–∏ –±—ã—Å—Ç—Ä—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) -->
  <div class="mt-3 flex flex-wrap gap-2 text-sm">
    <button class="chip" data-tag="travel" type="button">–ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è</button>
    <button class="chip" data-tag="grammar" type="button">–ì—Ä–∞–º–º–∞—Ç–∏–∫–∞</button>
    <button class="chip" data-tag="vocab" type="button">–°–ª–æ–≤–∞—Ä—å</button>
    <button class="chip" data-tag="challenge" type="button">–ß–µ–ª–ª–µ–Ω–¥–∂</button>
  </div>

  <!-- –°–µ—Ç–∫–∞ –∫–∞—Ä—Ç–æ—á–µ–∫ -->
  <section class="mt-6">
    <div id="grid" class="grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"></div>
    <div id="empty" class="hidden mt-10 p-6 rounded-2xl bg-white border border-black/10 text-center text-[var(--ink-2)]">
      –ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã –∏–ª–∏ –ø–æ–∏—Å–∫.
    </div>
  </section>
</main>

<footer class="border-t border-black/10 py-8 text-sm text-[var(--ink-2)] bg-[#fffef7]">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex flex-col sm:flex-row gap-3 sm:items-center sm:justify-between">
    <p>¬© <span id="y"></span> PolyTalky. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
    <div class="flex gap-4">
      <a class="hover:opacity-80" href="../">–ì–ª–∞–≤–Ω–∞—è</a>
      <a class="hover:opacity-80" href="shop/">–ú–∞–≥–∞–∑–∏–Ω</a>
      <a class="hover:opacity-80" href="student/">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</a>
    </div>
  </div>
</footer>
<script>document.getElementById('y').textContent=new Date().getFullYear()</script>

<script>
/* ======= –î–ê–ù–ù–´–ï –ö–ê–¢–ê–õ–û–ì–ê ======= */
const courses = [
  // –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ
  {slug:'spanish-a0',            title:'–ò—Å–ø–∞–Ω—Å–∫–∏–π —Å –Ω—É–ª—è',         type:'free', lang:'es', flag:'üá™üá∏', level:'A0',    tags:['grammar','vocab']},
  {slug:'italian-a0',            title:'–ò—Ç–∞–ª—å—è–Ω—Å–∫–∏–π —Å –Ω—É–ª—è',       type:'free', lang:'it', flag:'üáÆüáπ', level:'A0',    tags:['vocab']},
  {slug:'vamos-espana',          title:'¬°Vamos a Espa√±a! (–ø—Ä–æ–¥–æ–ª–∂–∞—é—â–∏–µ)', type:'free', lang:'es', flag:'üá™üá∏', level:'A2', tags:['travel','dialog']},
  {slug:'english-intro',         title:'–ò–Ω—Ç–µ–Ω—Å–∏–≤ –ø–æ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º—É',  type:'free', lang:'en', flag:'üá¨üáß', level:'Starter',tags:['challenge']},
  {slug:'finnish-intro',         title:'–í–≤–æ–¥–Ω—ã–π –∫—É—Ä—Å –ø–æ —Ñ–∏–Ω—Å–∫–æ–º—É', type:'free', lang:'fi', flag:'üá´üáÆ', level:'Intro', tags:['vocab']},
  {slug:'german-intro',          title:'–í–≤–æ–¥–Ω—ã–π –∫—É—Ä—Å –ø–æ –Ω–µ–º–µ—Ü–∫–æ–º—É',type:'free', lang:'de', flag:'üá©üá™', level:'Intro', tags:['vocab']},
  {slug:'dutch-a0',              title:'–ù–∏–¥–µ—Ä–ª–∞–Ω–¥—Å–∫–∏–π —Å –Ω—É–ª—è',     type:'free', lang:'nl', flag:'üá≥üá±', level:'A0',    tags:['vocab']},
  {slug:'french-a0',             title:'–§—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π —Å –Ω—É–ª—è',       type:'free', lang:'fr', flag:'üá´üá∑', level:'A0',    tags:['vocab']},
  {slug:'japanese-a0',           title:'–Ø–ø–æ–Ω—Å–∫–∏–π —Å –Ω—É–ª—è',          type:'free', lang:'ja', flag:'üáØüáµ', level:'A0',    tags:['vocab']},
  {slug:'chinese-a0',            title:'–ö–∏—Ç–∞–π—Å–∫–∏–π —Å –Ω—É–ª—è',         type:'free', lang:'zh', flag:'üá®üá≥', level:'A0',    tags:['vocab']},
  {slug:'hindi-a0',              title:'–•–∏–Ω–¥–∏ —Å –Ω—É–ª—è',             type:'free', lang:'hi', flag:'üáÆüá≥', level:'A0',    tags:['vocab']},
  {slug:'arabic-a0',             title:'–ê—Ä–∞–±—Å–∫–∏–π —Å –Ω—É–ª—è',          type:'free', lang:'ar', flag:'üá∏üá¶', level:'A0',    tags:['vocab']},
  {slug:'turkish-a0',            title:'–¢—É—Ä–µ—Ü–∫–∏–π —Å –Ω—É–ª—è',          type:'free', lang:'tr', flag:'üáπüá∑', level:'A0',    tags:['vocab']},
  {slug:'korean-a0',             title:'–ö–æ—Ä–µ–π—Å–∫–∏–π —Å –Ω—É–ª—è',         type:'free', lang:'ko', flag:'üá∞üá∑', level:'A0',    tags:['vocab']},

  // PRO
  {slug:'english-with-harry',    title:'English with Harry',       type:'pro',  lang:'en', flag:'ü™Ñ',  level:'A1-B1', tags:['reading','fun']},
  {slug:'visual-spanish',        title:'–í–∏–∑—É–∞–ª—å–Ω—ã–π –∏—Å–ø–∞–Ω—Å–∫–∏–π',     type:'pro',  lang:'es', flag:'üñºÔ∏è',  level:'A1',    tags:['vocab','visual']},
  {slug:'italian-songs',         title:'–ò—Ç–∞–ª—å—è–Ω—Å–∫–∏–π –ø–æ –ø–µ—Å–Ω—è–º',    type:'pro',  lang:'it', flag:'üéµ',  level:'A1',    tags:['listening','fun']},
  {slug:'pro-espanol',           title:'Pro Espa√±ol (–æ—Ç –Ω–æ—Å–∏—Ç–µ–ª—è)',type:'pro',  lang:'es', flag:'üá™üá∏', level:'B1-B2', tags:['conversation']},
  {slug:'english-irregulars',    title:'–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –≥–ª–∞–≥–æ–ª—ã (EN)',type:'pro',  lang:'en', flag:'üá¨üáß', level:'A2',    tags:['grammar']},
  {slug:'30-days-english',       title:'30 days of English',       type:'pro',  lang:'en', flag:'üìÜ',  level:'A1',    tags:['challenge']},
  {slug:'english-translators',   title:'–ê–Ω–≥–ª–∏–π—Å–∫–∏–π –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥—á–∏–∫–æ–≤', type:'pro', lang:'en', flag:'üìù', level:'B2', tags:['professional']},
  {slug:'polyglot-starter',      title:'PolyTalky Polyglot Pack. Starter', type:'pro', lang:'multi', flag:'üåç', level:'A0-A1', tags:['vocab','visual']},
  {slug:'polyglot-cook',         title:'Polyglot Pack. Cook it!',  type:'pro',  lang:'multi', flag:'üç≥', level:'A1',  tags:['vocab','fun']},
  {slug:'polyglot-mchny',        title:'Polyglot Pack. MCHNY',     type:'pro',  lang:'multi', flag:'üéÑ', level:'A1',  tags:['seasonal','fun']},
  {slug:'finnish-travel',        title:'–§–∏–Ω—Å–∫–∏–π –¥–ª—è –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–π',  type:'pro',  lang:'fi', flag:'üá´üáÆ', level:'A1',    tags:['travel']},
  {slug:'finnish-continue',      title:'–§–∏–Ω—Å–∫–∏–π –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–∞—é—â–∏—Ö', type:'pro',  lang:'fi', flag:'üá´üáÆ', level:'A2',    tags:['conversation']},
  {slug:'german-continue',       title:'–ù–µ–º–µ—Ü–∫–∏–π –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–∞—é—â–∏—Ö',type:'pro',  lang:'de', flag:'üá©üá™', level:'A2',    tags:['conversation']},
  {slug:'italian-continue',      title:'–ò—Ç–∞–ª—å—è–Ω—Å–∫–∏–π –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–∞—é—â–∏—Ö', type:'pro', lang:'it', flag:'üáÆüáπ', level:'A2', tags:['conversation']},
  {slug:'afrikaans-a0',          title:'–ê—Ñ—Ä–∏–∫–∞–∞–Ω—Å —Å –Ω—É–ª—è',         type:'pro',  lang:'af', flag:'üáøüá¶', level:'A0',    tags:['vocab']},
  {slug:'dutch-continue',        title:'–ù–∏–¥–µ—Ä–ª–∞–Ω–¥—Å–∫–∏–π –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–∞—é—â–∏—Ö', type:'pro', lang:'nl', flag:'üá≥üá±', level:'A2', tags:['conversation']},
  {slug:'swedish-a0',            title:'–®–≤–µ–¥—Å–∫–∏–π —Å –Ω—É–ª—è',          type:'pro',  lang:'sv', flag:'üá∏üá™', level:'A0',    tags:['vocab']},
  {slug:'lithuanian-a0',         title:'–õ–∏—Ç–æ–≤—Å–∫–∏–π —Å –Ω—É–ª—è',         type:'pro',  lang:'lt', flag:'üá±üáπ', level:'A0',    tags:['vocab']},
  {slug:'romanian-a0',           title:'–†—É–º—ã–Ω—Å–∫–∏–π —Å –Ω—É–ª—è',         type:'pro',  lang:'ro', flag:'üá∑üá¥', level:'A0',    tags:['vocab']},
  {slug:'norwegian-a0',          title:'–ù–æ—Ä–≤–µ–∂—Å–∫–∏–π —Å –Ω—É–ª—è',        type:'pro',  lang:'no', flag:'üá≥üá¥', level:'A0',    tags:['vocab']},
];

const langMap = {
  multi:'–ú–Ω–æ–≥–æ —è–∑—ã–∫–æ–≤', es:'–ò—Å–ø–∞–Ω—Å–∫–∏–π', en:'–ê–Ω–≥–ª–∏–π—Å–∫–∏–π', it:'–ò—Ç–∞–ª—å—è–Ω—Å–∫–∏–π', de:'–ù–µ–º–µ—Ü–∫–∏–π', fi:'–§–∏–Ω—Å–∫–∏–π', nl:'–ù–∏–¥–µ—Ä–ª–∞–Ω–¥—Å–∫–∏–π',
  fr:'–§—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π', ja:'–Ø–ø–æ–Ω—Å–∫–∏–π', zh:'–ö–∏—Ç–∞–π—Å–∫–∏–π', hi:'–•–∏–Ω–¥–∏', ar:'–ê—Ä–∞–±—Å–∫–∏–π', tr:'–¢—É—Ä–µ—Ü–∫–∏–π', ko:'–ö–æ—Ä–µ–π—Å–∫–∏–π',
  af:'–ê—Ñ—Ä–∏–∫–∞–∞–Ω—Å', sv:'–®–≤–µ–¥—Å–∫–∏–π', lt:'–õ–∏—Ç–æ–≤—Å–∫–∏–π', ro:'–†—É–º—ã–Ω—Å–∫–∏–π', no:'–ù–æ—Ä–≤–µ–∂—Å–∫–∏–π'
};

/* ======= –†–ï–ù–î–ï–† –ò –§–ò–õ–¨–¢–†–´ ======= */
const grid = document.getElementById('grid');
const empty = document.getElementById('empty');
const count = document.getElementById('count');
const q     = document.getElementById('q');
const level = document.getElementById('level');
const sort  = document.getElementById('sort');
const chips = document.querySelectorAll('.chip');
const typeChips = document.querySelectorAll('[data-type]');
const langSel = document.getElementById('lang');

// –ù–∞–ø–æ–ª–Ω—è–µ–º —Å–µ–ª–µ–∫—Ç —è–∑—ã–∫–æ–≤
(function fillLang(){
  const langs = [...new Set(courses.map(c=>c.lang))].filter(Boolean);
  const byName = langs.sort((a,b)=>(langMap[a]||a).localeCompare(langMap[b]||b,'ru'));
  byName.forEach(k=>{
    const opt=document.createElement('option');
    opt.value=k; opt.textContent=langMap[k]||k;
    langSel.appendChild(opt);
  });
})();

// –°–æ—Å—Ç–æ—è–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤
let state = { type:'all', lang:'', level:'', tag:'', q:'', sort:'pop' };

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
q.addEventListener('input',()=>{ state.q=q.value.trim().toLowerCase(); render(); });
level.addEventListener('change',()=>{ state.level=level.value; render(); });
langSel.addEventListener('change',()=>{ state.lang=langSel.value; render(); });
sort.addEventListener('change',()=>{ state.sort=sort.value; render(); });

typeChips.forEach(b=>{
  b.addEventListener('click',()=>{
    typeChips.forEach(x=>x.classList.remove('active'));
    b.classList.add('active');
    state.type=b.dataset.type; render();
  });
});
chips.forEach(c=>{
  if(!c.dataset.tag) return;
  c.addEventListener('click',()=>{
    const on = c.classList.toggle('active');
    chips.forEach(x=>{ if(x!==c && x.dataset.tag) x.classList.remove('active'); });
    state.tag = on ? c.dataset.tag : '';
    render();
  });
});

// –ê–ª–≥–æ—Ä–∏—Ç–º —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
function applyFilters(list){
  return list.filter(c=>{
    if(state.type!=='all' && c.type!==state.type) return false;
    if(state.lang && c.lang!==state.lang) return false;
    if(state.level && !(c.level||'').toUpperCase().includes(state.level.toUpperCase())) return false;
    if(state.tag && !(c.tags||[]).includes(state.tag)) return false;
    if(state.q){
      const s=(c.title+' '+(langMap[c.lang]||'')+' '+(c.level||'')+' '+(c.type)).toLowerCase();
      if(!s.includes(state.q)) return false;
    }
    return true;
  }).sort((a,b)=>{
    if(state.sort==='az') return a.title.localeCompare(b.title,'ru');
    if(state.sort==='za') return b.title.localeCompare(a.title,'ru');
    // 'pop' ‚Äî –ø—Ä–æ—Å—Ç–∞—è —ç–≤—Ä–∏—Å—Ç–∏–∫–∞: free –ø–µ—Ä–≤—ã–º–∏, –∑–∞—Ç–µ–º –∞–ª—Ñ–∞–≤–∏—Ç
    if(a.type!==b.type) return a.type==='free'?-1:1;
    return a.title.localeCompare(b.title,'ru');
  });
}

function courseCard(c){
  const badge = c.type==='free'
    ? `<span class="px-2 py-1 text-[11px] rounded-lg badge-free">–ë–ï–°–ü–õ–ê–¢–ù–û</span>`
    : `<span class="px-2 py-1 text-[11px] rounded-lg badge-pro">PRO</span>`;
  const lang = langMap[c.lang]||'–Ø–∑—ã–∫';
  const lvl  = c.level?`<div class="text-xs text-[var(--ink-2)]">${c.level}</div>`:'';
  const ctaHref = c.type==='free' ? `courses/${c.slug}/` : `courses/${c.slug}/`;
  const ctaText = c.type==='free' ? '–û—Ç–∫—Ä—ã—Ç—å –∫—É—Ä—Å' : '–ü–æ–¥—Ä–æ–±–Ω–µ–µ';
  return `
    <a href="${ctaHref}" class="block p-5 rounded-2xl bg-white border border-black/10 shadow-soft card reveal">
      <div class="flex items-center gap-3">
        <span class="text-2xl">${c.flag||'üåç'}</span>
        <div class="grow">
          <div class="font-semibold">${c.title}</div>
          <div class="text-xs text-[var(--ink-2)]">${lang}</div>
        </div>
        ${badge}
      </div>
      <div class="mt-2">${lvl}</div>
      <div class="mt-4">
        <span class="inline-flex items-center gap-2 px-3 py-2 rounded-xl border border-black/10 bg-white hover:bg-[#fff3c6] text-sm"> ${ctaText} ‚Üí </span>
      </div>
    </a>
  `;
}

function revealInit(){
  const obs=new IntersectionObserver((ents)=>{ents.forEach(e=>{if(e.isIntersecting)e.target.classList.add('reveal--visible');});},{threshold:.12});
  document.querySelectorAll('.reveal').forEach(el=>obs.observe(el));
}

function render(){
  const list = applyFilters(courses);
  count.textContent = list.length;
  if(list.length===0){
    grid.innerHTML=''; empty.classList.remove('hidden'); return;
  }
  empty.classList.add('hidden');
  grid.innerHTML = list.map(courseCard).join('');
  revealInit();
}

// –ü–µ—Ä–≤—ã–π —Ä–µ–Ω–¥–µ—Ä
render();
</script>

</body>
</html>
