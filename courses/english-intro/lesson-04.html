<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>English Intro ‚Äî –£—Ä–æ–∫ 4</title>
  <base href="/">
  <link rel="icon" type="image/jpg" href="/assets/favicon.jpg">

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- –û–±—â–∏–µ —Å—Ç–∏–ª–∏ –¥–ª—è –∫—É—Ä—Å–∞ English Intro -->
  <link rel="stylesheet" href="/courses/english-intro/english-intro.css">

  <!-- Firebase init -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getAuth } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
    import { getFirestore } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBAU_uMTePpKwVNZNhqk2pss2PuSitGfQI",
      authDomain: "polytalky-70999.firebaseapp.com",
      projectId: "polytalky-70999",
      storageBucket: "polytalky-70999.firebasestorage.app",
      messagingSenderId: "62407152289",
      appId: "1:62407152289:web:b0c0efdb2472f12b10d6e0"
    };

    window.firebaseApp  = initializeApp(firebaseConfig);
    window.firebaseAuth = getAuth(window.firebaseApp);
    window.firebaseDb   = getFirestore(window.firebaseApp);
  </script>

  <style>
.hidden {
  display: none;
}

/* –°—Ç–∏–ª–∏ –¥–ª—è —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –Ω–∞ –≤—Ä–µ–º–µ–Ω–∞ (–≤ —Ñ–∏—Ä–º–µ–Ω–Ω—ã—Ö —Ü–≤–µ—Ç–∞—Ö PolyTalky) */
.question-counter {
  background: linear-gradient(135deg, #FFDE59 0%, #FF8A5C 100%);
  color: #78350f;
  padding: 10px 20px;
  border-radius: 25px;
  display: inline-block;
  font-weight: 600;
  margin-bottom: 20px;
  font-size: 0.9em;
  box-shadow: 0 8px 20px rgba(249, 115, 22, 0.35);
}

.question-text {
  font-size: 1.3em;
  color: #111827;
  margin-bottom: 30px;
  font-weight: 500;
  line-height: 1.6;
}

.options {
  display: flex;
  flex-direction: column;
  gap: 15px;
  margin-bottom: 25px;
}

.option-btn {
  background: #ffffff;
  border: 2px solid #e5e7eb;
  padding: 18px 25px;
  border-radius: 12px;
  font-size: 1.1em;
  cursor: pointer;
  transition: all 0.25s ease;
  text-align: left;
  font-weight: 500;
  color: #111827;
  box-shadow: 0 4px 10px rgba(15, 23, 42, 0.04);
}

.option-btn:hover:not(:disabled) {
  border-color: #FF8A5C;
  background: #FFF8E5;
  transform: translateX(5px);
  box-shadow: 0 8px 18px rgba(249, 115, 22, 0.25);
}

.option-btn.correct {
  background: #dcfce7;
  border-color: #16a34a;
  color: #14532d;
  animation: correctAnswer 0.5s ease;
}

.option-btn.incorrect {
  background: #fee2e2;
  border-color: #dc2626;
  color: #7f1d1d;
  animation: shake 0.5s ease;
}

@keyframes correctAnswer {
  0%, 100% {
    transform: translateX(5px);
  }
  50% {
    transform: translateX(5px) scale(1.05);
  }
}

@keyframes shake {
  0%, 100% {
    transform: translateX(0);
  }
  25% {
    transform: translateX(-10px);
  }
  75% {
    transform: translateX(10px);
  }
}

.option-btn:disabled {
  cursor: not-allowed;
  opacity: 0.75;
}

/* –ë–ª–æ–∫ —Å —Ñ–∏–¥–±–µ–∫–æ–º –ø–æ–¥ –≤–æ–ø—Ä–æ—Å–æ–º */
.feedback {
  min-height: 60px;
  margin-top: 20px;
}

.correct-feedback {
  background: #dcfce7;
  border-left: 4px solid #16a34a;
  padding: 15px 20px;
  border-radius: 8px;
  color: #14532d;
  animation: slideIn 0.4s ease;
  font-size: 0.95em;
}

.incorrect-feedback {
  background: #fee2e2;
  border-left: 4px solid #dc2626;
  padding: 15px 20px;
  border-radius: 8px;
  color: #7f1d1d;
  animation: slideIn 0.4s ease;
  font-size: 0.95em;
}

@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* –ú–∞–ª–µ–Ω—å–∫–∏–π —Å—á—ë—Ç—á–∏–∫ –ø–æ–¥ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ–º */
.score {
  text-align: center;
  font-size: 1.05em;
  color: #4b5563;
  margin-top: 20px;
  padding: 12px 15px;
  background: #FDF5E6;
  border-radius: 10px;
  font-weight: 500;
  border: 1px solid rgba(251, 191, 36, 0.4);
}

/* –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∞ */
.results {
  text-align: center;
  padding: 40px 20px;
}

.results h3 {
  color: #111827;
  font-size: 2em;
  margin-bottom: 30px;
}

.score-big {
  font-size: 3.5em;
  font-weight: 800;
  background: linear-gradient(135deg, #FF8A5C 0%, #FFDE59 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin: 20px 0;
}

.percentage {
  font-size: 2.3em;
  color: #4b5563;
  margin-bottom: 20px;
  font-weight: 600;
}

.result-message {
  font-size: 1.2em;
  color: #374151;
  margin: 30px 0;
  line-height: 1.6;
}

/* –ö–Ω–æ–ø–∫–∞ –ø–æ–≤—Ç–æ—Ä–∞ (–≤ —Å—Ç–∏–ª–µ –∫–Ω–æ–ø–æ–∫ –∫—É—Ä—Å–∞) */
.btn-retry {
  background: linear-gradient(135deg, #FF9F1C 0%, #FFDE59 100%);
  color: #78350f;
  border: none;
  padding: 15px 40px;
  border-radius: 999px;
  font-size: 1.05em;
  cursor: pointer;
  transition: transform 0.2s ease, box-shadow 0.2s ease, opacity 0.2s ease;
  font-weight: 600;
  margin-top: 20px;
  box-shadow: 0 12px 26px rgba(249, 115, 22, 0.45);
}

.btn-retry:hover {
  transform: translateY(-1px);
  box-shadow: 0 14px 32px rgba(249, 115, 22, 0.55);
}

.btn-retry:active {
  transform: translateY(1px);
  box-shadow: 0 8px 18px rgba(249, 115, 22, 0.6);
}

/* –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≤—Ä–µ–º—ë–Ω */
.tenses-visualization {
  background: linear-gradient(135deg, #FFDE59 0%, #FFB48F 50%, #FF8A5C 100%);
  border-radius: 15px;
  padding: 40px;
  margin: 30px 0;
  box-shadow: 0 12px 32px rgba(248, 148, 66, 0.45);
  position: relative;
  overflow: hidden;
}

.timeline {
  position: relative;
  padding: 60px 0;
  display: flex;
  flex-direction: column;
  gap: 50px;
}

.timeline-line {
  position: absolute;
  top: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 4px;
  height: 100%;
  background: rgba(255, 255, 255, 0.55);
  border-radius: 2px;
}

/* –ö–∞—Ä—Ç–æ—á–∫–∏ –≤—Ä–µ–º—ë–Ω */
.tense-example {
  position: relative;
  background: #ffffff;
  padding: 25px;
  border-radius: 12px;
  box-shadow: 0 10px 28px rgba(15, 23, 42, 0.10);
  transition: transform 0.25s ease, box-shadow 0.25s ease;
}

.tense-example:hover {
  transform: translateY(-4px);
  box-shadow: 0 14px 36px rgba(15, 23, 42, 0.18);
}

.tense-example .tense-title {
  color: #EA580C; /* —Ç—ë–ø–ª—ã–π –æ—Ä–∞–Ω–∂–µ–≤—ã–π –∞–∫—Ü–µ–Ω—Ç */
  font-size: 1.25em;
  font-weight: 700;
  display: block;
  margin-bottom: 10px;
}

.tense-example .description {
  color: #4b5563;
  font-size: 0.95em;
  line-height: 1.6;
  margin-top: 10px;
}

/* Simple ‚Äî —Ç–æ—á–∫–∞ */
.tense-example.simple .point {
  width: 20px;
  height: 20px;
  background: #FF8A5C;
  border-radius: 50%;
  margin: 0 auto 15px;
  box-shadow: 0 0 0 8px rgba(255, 255, 255, 0.75);
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0%, 100% {
    box-shadow: 0 0 0 8px rgba(255, 255, 255, 0.75);
  }
  50% {
    box-shadow: 0 0 0 15px rgba(255, 255, 255, 0.35);
  }
}

/* Continuous ‚Äî –ª–∏–Ω–∏—è */
.tense-example.continuous .line {
  height: 6px;
  background: linear-gradient(
    90deg,
    rgba(255, 248, 229, 0) 0%,
    rgba(255, 222, 89, 1) 20%,
    rgba(255, 138, 92, 1) 80%,
    rgba(255, 248, 229, 0) 100%
  );
  border-radius: 3px;
  margin: 0 auto 15px;
  position: relative;
  overflow: hidden;
}

.tense-example.continuous .line::after {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 50%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255, 255, 255, 0.9),
    transparent
  );
  animation: slide 2s infinite;
}

@keyframes slide {
  0% {
    left: -100%;
  }
  100% {
    left: 200%;
  }
}

/* Perfect ‚Äî –æ—Ç—Ä–µ–∑–æ–∫ */
.tense-example.perfect .segment {
  height: 8px;
  background: #FF8A5C;
  border-radius: 4px;
  margin: 0 auto 15px;
  width: 70%;
  position: relative;
}

.tense-example.perfect .segment::before,
.tense-example.perfect .segment::after {
  content: '';
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  width: 12px;
  height: 12px;
  background: #FFDE59;
  border: 3px solid #ffffff;
  border-radius: 50%;
  box-shadow: 0 2px 6px rgba(15, 23, 42, 0.25);
}

.tense-example.perfect .segment::before {
  left: -6px;
}

.tense-example.perfect .segment::after {
  right: -6px;
}

/* –û–±—ä—è—Å–Ω—è—é—â–∏–π –±–ª–æ–∫ –ø–æ–¥ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–µ–π */
.explanation-box {
  background: #FFFDF6;
  border-left: 4px solid #FFBA08;
  padding: 25px;
  margin: 30px 0;
  border-radius: 10px;
  box-shadow: 0 6px 20px rgba(15, 23, 42, 0.06);
}

.explanation-box p {
  margin-bottom: 15px;
  line-height: 1.7;
  color: #374151;
}

/* Summary-–±–ª–æ–∫ –≤ —Ñ–∏–Ω–∞–ª–µ */
.summary-box {
  background: linear-gradient(135deg, #FFFDF6 0%, #FFE3CC 100%);
  padding: 30px;
  border-radius: 15px;
  margin: 30px 0;
  border: 2px solid #FFBA08;
  box-shadow: 0 10px 26px rgba(248, 181, 48, 0.32);
}

.summary-box h3 {
  color: #EA580C;
  font-size: 1.5em;
  margin-bottom: 20px;
}

.summary-box ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

.summary-box li {
  padding: 12px 0;
  font-size: 1.05em;
  color: #374151;
  line-height: 1.6;
  border-bottom: 1px solid rgba(248, 171, 64, 0.25);
}

.summary-box li:last-child {
  border-bottom: none;
}

/* –ú–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω—ã–π –±–ª–æ–∫ –≤ –∫–æ–Ω—Ü–µ */
.motivation {
  text-align: center;
  font-size: 1.25em;
  color: #C05621;
  font-weight: 600;
  margin-top: 30px;
  padding: 20px;
  background: #ffffff;
  border-radius: 12px;
  box-shadow: 0 8px 22px rgba(15, 23, 42, 0.08);
}

/* –ê–¥–∞–ø—Ç–∏–≤ –ø–æ–¥ –º–æ–±–∏–ª—å–Ω—ã–µ */
@media (max-width: 768px) {
  .tenses-visualization {
    padding: 25px;
    margin: 24px 0;
  }

  .timeline {
    padding: 40px 0;
    gap: 35px;
  }

  .question-text {
    font-size: 1.1em;
  }

  .option-btn {
    padding: 15px 18px;
    font-size: 1em;
  }

  .score-big {
    font-size: 3em;
  }

  .percentage {
    font-size: 2em;
  }
}
  </style>
</head>

<body>
 
<!-- –§–æ–Ω–æ–≤—ã–µ –±—É–∫–≤—ã -->
<div class="bg-letter a">B</div>
<div class="bg-letter e">C</div>
<div class="bg-letter i">D</div>
<div class="bg-letter o">F</div>
<div class="bg-letter u">G</div>

<!-- –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å -->
<header class="top-bar sticky top-0 z-40">
  <div class="max-w-7xl mx-auto px-4 py-3 flex justify-between items-center">
    <a href="/" class="flex items-center gap-2 font-semibold text-[0.9rem] text-[#374151]">
      <img src="/assets/logo.png" alt="PolyTalky" class="w-7 h-7">
      PolyTalky
    </a>

    <div class="flex items-center gap-3 text-[0.78rem] text-gray-600">
      <div id="user-status"></div>

      <a href="/student/feedback.html"
         id="feedback-link"
         class="hidden relative flex items-center justify-center w-9 h-9 rounded-full border border-gray-300 bg-white">
        üì©
        <span id="feedback-dot"
              class="hidden absolute -top-1 -right-1 w-3 h-3 rounded-full bg-red-500 ring-2 ring-white"></span>
      </a>

      <a href="/student/"
         target="_blank"
         id="login-btn"
         class="hidden border border-gray-300 rounded-full px-3 py-1.5 text-[0.75rem] text-gray-600 bg-white">
        –í–æ–π—Ç–∏
      </a>

      <a href="/courses/english-intro/" class="back-to-course-btn">–ù–∞–∑–∞–¥ –∫ –∫—É—Ä—Å—É</a>
    </div>
  </div>
  
</header>

<main class="lesson-shell">
  <!-- HERO -->
  <section class="hero-card mb-8">
    <div class="hero-left">
      <div class="hero-badge">English ¬∑ Lesson 4</div>
      <h1 class="hero-title mt-3">
        –í—Ä–µ–º–µ–Ω–∞ –≤ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º —è–∑—ã–∫–µ
      </h1>

      <p class="hero-tagline mt-3">
        –†–∞–∑–±–∏—Ä–∞–µ–º—Å—è —Å –∞–Ω–≥–ª–∏–π—Å–∫–∏–º–∏ tenses: Simple, Continuous, Perfect
      </p>
    </div>

    <div class="hero-right">
      <div class="hero-right-inner">
        <div class="hero-bg-circle"></div>

        <div class="hero-bubbles-cluster">
          <div class="hero-bubble hero-bubble--hello">
            Simple
          </div>
          <div class="hero-bubble hero-bubble--morning">
            Continuous
          </div>
          <div class="hero-bubble hero-bubble--hi">
            Perfect
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è —à–∞–≥–æ–≤ -->
  <div class="step-nav">
    <button class="step-dot step-dot--active" data-step="1">
      <div class="step-dot-circle">
        <img src="/assets/lessons/tenses.png" alt="–í–≤–µ–¥–µ–Ω–∏–µ">
      </div>
      <div class="step-dot-label">–í—Ä–µ–º–µ–Ω–∞</div>
    </button>

    <button class="step-dot" data-step="2">
      <div class="step-dot-circle">
        <img src="/assets/lessons/order.png" alt="–ì—Ä—É–ø–ø—ã">
      </div>
      <div class="step-dot-label">–°—Ç—Ä—É–∫—Ç—É—Ä–∞</div>
    </button>

    <button class="step-dot" data-step="3">
      <div class="step-dot-circle">
        <img src="/assets/lessons/graphic.png" alt="–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è">
      </div>
      <div class="step-dot-label">–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è</div>
    </button>

    <button class="step-dot" data-step="4">
      <div class="step-dot-circle">
        <img src="/assets/lessons/practise.png" alt="–£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ">
      </div>
      <div class="step-dot-label">–ü—Ä–∞–∫—Ç–∏–∫–∞</div>
    </button>

    <button class="step-dot" data-step="5">
      <div class="step-dot-circle">
        <img src="/assets/lessons/finish.png" alt="–§–∏–Ω–∞–ª">
      </div>
      <div class="step-dot-label">–§–∏–Ω–∏—à</div>
    </button>
  </div>

  <!-- ================ –®–ê–ì 1. –í–í–ï–î–ï–ù–ò–ï ================ -->
  <section id="step-1" class="step-panel step-panel--visible">
    <div class="step-panel-header">
      <span class="step-pill">–®–∞–≥ 1 ¬∑ –í–≤–µ–¥–µ–Ω–∏–µ</span>
      <button class="step-icon" type="button" data-open-qa>‚ùì</button>
    </div>

    <h2 class="text-xl md:text-2xl font-bold mb-3">
      –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –º–∏—Ä –∞–Ω–≥–ª–∏–π—Å–∫–∏—Ö –≤—Ä–µ–º–µ–Ω!
    </h2>

    <p class="step-body-text mb-3">
      –°–µ–≥–æ–¥–Ω—è –º—ã —Ä–∞—Å—Å–∫–∞–∂–µ–º –≤–∞–º –æ —Ç–∞–∫–æ–º —Å—Ç—Ä–∞—à–Ω–æ–º –∑–≤–µ—Ä–µ, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è  <p class="step-body-text mt-3 highlight"> –≤—Ä–µ–º–µ–Ω–∞ –∏–ª–∏ tenses</p>.
    </p>

    <p class="step-body-text mb-3">
      –ú—ã —Å –≤–∞–º–∏ –ø—Ä–∏–≤—ã–∫–ª–∏ —Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –≤ –Ω–∞—Å—Ç–æ—è—â–µ–º, –ø—Ä–æ—à–µ–¥—à–µ–º –∏ –±—É–¥—É—â–µ–º, –∞ –≤—Å–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —á–µ—Ä–µ–∑ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Å—É—Ñ—Ñ–∏–∫—Å—ã –∏ –ø—Ä–∏—Å—Ç–∞–≤–∫–∏. –ò –Ω–∞–º —Å –≤–∞–º–∏ –∏ –≤ –≥–æ–ª–æ–≤—É –Ω–µ –ø—Ä–∏–¥–µ—Ç —Å—Ç—Ä–æ–∏—Ç—å –∫–∞–∫–∏–µ-—Ç–æ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –Ω–∞—Å—Ç–æ—è—â–µ–≥–æ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –∏–ª–∏ –Ω–∞—Å—Ç–æ—è—â–µ–≥–æ —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ–≥–æ...
    </p>

    <p class="step-body-text mb-3">
      –ù–æ —É –∞–Ω–≥–ª–∏—á–∞–Ω —Å–≤–æ–∏ —Ç–∞—Ä–∞–∫–∞–Ω—ã. –ò —Ö–æ—á–µ—à—å, –Ω–µ —Ö–æ—á–µ—à—å - –∞ –Ω—É–∂–Ω–æ —Ä–∞–∑–±–∏—Ä–∞—Ç—å—Å—è –≤–æ –≤—Å–µ—Ö —ç—Ç–∏—Ö –≤—Ä–µ–º–µ–Ω–∞—Ö –∏ –ø–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –µ—â–µ –∏ —Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏!
    </p>

    <p class="step-body-text mb-3">
      <i>Mamma mia!</i> - —Å–∫–∞–∑–∞–ª–∏ –±—ã –º—ã, –±—É–¥—å –º—ã —Å –≤–∞–º–∏ –∏—Ç–∞–ª—å—è–Ω—Ü–∞–º–∏...
    </p>

    <p class="step-body-text mb-3">
      –ù–æ —Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –º—ã —Å –≤–∞–º–∏ —Ö–æ—Ç–∏–º, —Å—Ç—Ä–æ–∏—Ç—å <b>–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ</b> –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –µ—â–µ –±–æ–ª—å—à–µ, —Ç–∞–∫ —á—Ç–æ –¥–∞–≤–∞–π—Ç–µ —Ä–∞–∑–±–µ—Ä–µ–º –≤—Å–µ —ç—Ç–∏ –∑–∞–º—ã—Å–ª–æ–≤–∞—Ç—ã–µ tenses.
    </p>

    <button class="btn-main mt-6 next-step-btn" data-next="2">
      –î–∞–ª–µ–µ ‚Üí
    </button>
  </section>

  <!-- ================ –®–ê–ì 2. –ì–†–£–ü–ü–´ –í–†–ï–ú–ï–ù ================ -->
  <section id="step-2" class="step-panel">
    <div class="step-panel-header">
      <span class="step-pill">–®–∞–≥ 2 ¬∑ –ì—Ä—É–ø–ø—ã –≤—Ä–µ–º–µ–Ω</span>
      <button class="step-icon" type="button" data-open-qa>‚ùì</button>
    </div>

    <h2 class="text-xl md:text-2xl font-bold mb-3">
      –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏—Ö –≤—Ä–µ–º–µ–Ω
    </h2>

    <p class="step-body-text mb-3">
      –í —Ü–µ–ª–æ–º —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –≥—Ä—É–ø–ø:
    </p>

    <ul class="list-disc ml-5 mb-4 text-gray-700">
      <li class="mb-2"><b>Simple</b> (–ü—Ä–æ—Å—Ç–æ–µ) - –¥–ª—è –∫–æ–Ω—Å—Ç–∞—Ç–∞—Ü–∏–∏ —Ñ–∞–∫—Ç–æ–≤ –∏ —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π</li>
      <li class="mb-2"><b>Continuous</b> (–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–Ω–æ–µ) - –¥–ª—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –≤ —Ä–∞–∑–≤–∏—Ç–∏–∏</li>
      <li class="mb-2"><b>Perfect</b> (–°–æ–≤–µ—Ä—à–µ–Ω–Ω–æ–µ) - –¥–ª—è —Å–æ–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º </li>
      <li class="mb-2"><b>Perfect Continuous</b> (–°–æ–≤–µ—Ä—à–µ–Ω–Ω–æ–µ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–Ω–æ–µ) - –¥–ª—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∫–æ–≥–¥–∞ –∏–∑–≤–µ—Å—Ç–Ω–æ –∫–æ–≥–¥–∞ –æ–Ω–∏ –Ω–∞—á–∞–ª–∏—Å—å</li>
    </ul>

    <p class="step-body-text mb-3">
      –ö–∞–∂–¥–∞—è –∏–∑ –Ω–∏—Ö –¥–µ–ª–∏—Ç—Å—è –Ω–∞:
    </p>

    <ul class="list-disc ml-5 mb-4 text-gray-700">
      <li class="mb-2"><b>Present</b> (–ù–∞—Å—Ç–æ—è—â–µ–µ)</li>
      <li class="mb-2"><b>Past</b> (–ü—Ä–æ—à–µ–¥—à–µ–µ)</li>
      <li class="mb-2"><b>Future</b> (–ë—É–¥—É—â–µ–µ)</li>
    </ul>

    <p class="step-body-text mb-3">
      –í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —É—Å–ª–æ–≤–∏–π –Ω—É–∂–Ω–æ –≤—ã–±–∏—Ä–∞—Ç—å –∫–∞–∫–æ–µ-—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –≤—Ä–µ–º—è.
    </p>

    <button class="btn-main mt-6 next-step-btn" data-next="3">
      –î–∞–ª–µ–µ ‚Üí
    </button>
  </section>

  <!-- ================ –®–ê–ì 3. –í–ò–ó–£–ê–õ–ò–ó–ê–¶–ò–Ø ================ -->
  <section id="step-3" class="step-panel">
    <div class="step-panel-header">
      <span class="step-pill">–®–∞–≥ 3 ¬∑ –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è</span>
      <button class="step-icon" type="button" data-open-qa>‚ùì</button>
    </div>

    <h2 class="text-xl md:text-2xl font-bold mb-3">
      –î–∞–≤–∞–π—Ç–µ –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä—É–µ–º!
    </h2>

    <p class="step-body-text mb-3">
      –ü–æ–ø—Ä–æ–±—É–µ–º –∏–∑–æ–±—Ä–∞–∑–∏—Ç—å –≤—Å–µ —ç—Ç–∏ –≤—Ä–µ–º–µ–Ω–∞, —á—Ç–æ–±—ã —Ä–∞–∑–æ–±—Ä–∞—Ç—å –ø–æ–ª—É—á—à–µ.
    </p>
    
    <div class="tenses-visualization">
      <div class="timeline">
        <div class="timeline-line"></div>
        
        <div class="tense-example simple">
          <div class="point"></div>
          <span class="tense-title">Simple</span>
          <p class="description">–ü—Ä–æ—Å—Ç–∞—è —Ç–æ—á–∫–∞ –Ω–∞ –≤—Ä–µ–º–µ–Ω–Ω–æ–º –æ—Ç—Ä–µ–∑–∫–µ - –∫–æ–Ω—Å—Ç–∞—Ç–∞—Ü–∏—è —Ñ–∞–∫—Ç–∞</p>
        </div>
        
        <div class="tense-example continuous">
          <div class="line"></div>
          <span class="tense-title">Continuous</span>
          <p class="description">–ü—Ä—è–º–∞—è –±–µ–∑ —á–µ—Ç–∫–æ–≥–æ –Ω–∞—á–∞–ª–∞ –∏ –∫–æ–Ω—Ü–∞ - –ø—Ä–æ—Ü–µ—Å—Å –≤ —Ä–∞–∑–≤–∏—Ç–∏–∏</p>
        </div>
        
        <div class="tense-example perfect">
          <div class="segment"></div>
          <span class="tense-title">Perfect</span>
          <p class="description">–û—Ç—Ä–µ–∑–æ–∫ —Å –Ω–∞—á–∞–ª–æ–º –∏ –∫–æ–Ω—Ü–æ–º - –∑–∞–≤–µ—Ä—à–µ–Ω–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ</p>
        </div>
      </div>
    </div>

    <div class="explanation-box">
      <p>–ï—Å–ª–∏ –º—ã –≤–æ–∑—å–º–µ–º –≤—Ä–µ–º—è –∏ –Ω–∞—Ä–∏—Å—É–µ–º –≤—Ä–µ–º–µ–Ω–Ω–æ–π –æ—Ç—Ä–µ–∑–æ–∫, —Ç–æ –ø—Ä–æ—Å—Ç–∞—è —Ç–æ—á–∫–∞ –Ω–∞ –Ω–µ–º - —ç—Ç–æ –±—É–¥–µ—Ç <b>Simple</b>, —Ç–∞–∫ –∫–∞–∫ –¥–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –ø—Ä–æ—Å—Ç—É—é –∫–æ–Ω—Å—Ç–∞—Ç–∞—Ü–∏—é —Ñ–∞–∫—Ç–∞.</p>
      <p><b>Continuous</b> (–∏–ª–∏ –∏–Ω–æ–≥–¥–∞ –≤—ã –º–æ–∂–µ—Ç–µ –≤—Å—Ç—Ä–µ—Ç–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ —ç—Ç–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –∫–∞–∫ Progressive) –±—É–¥–µ—Ç –∫–∞–∫–æ–π-—Ç–æ –ø—Ä—è–º–æ–π, –∏ –ø—Ä–∏ —ç—Ç–æ–º –º—ã –Ω–µ –∑–Ω–∞–µ–º, –∫–æ–≥–¥–∞ –∏–º–µ–Ω–Ω–æ –æ–Ω–∞ –Ω–∞—á–∞–ª–∞—Å—å (–∏ –≤–ø–æ–ª–Ω–µ –≤–æ–∑–º–æ–∂–Ω–æ, —á—Ç–æ –ø–æ—Ç–æ–º –±—É–¥–µ—Ç –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ).</p>
      <p>–ê <b>Perfect</b> –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –∫–∞–∫ –Ω–µ–∫–∏–π –æ—Ç—Ä–µ–∑–æ–∫ –≤—Ä–µ–º–µ–Ω–∏, –∫–æ—Ç–æ—Ä—ã–π –∏–º–µ–µ—Ç –Ω–∞—á–∞–ª–æ –∏ –∫–æ–Ω–µ—Ü.</p>
    </div>

    <button class="btn-main mt-6 next-step-btn" data-next="4">
      –ü–µ—Ä–µ–π—Ç–∏ –∫ –ø—Ä–∞–∫—Ç–∏–∫–µ ‚Üí
    </button>
  </section>

  <!-- ================ –®–ê–ì 4. –£–ü–†–ê–ñ–ù–ï–ù–ò–ï ================ -->
  <section id="step-4" class="step-panel">
    <div class="step-panel-header">
      <span class="step-pill">–®–∞–≥ 4 ¬∑ –ü—Ä–∞–∫—Ç–∏–∫–∞</span>
      <button class="step-icon" type="button" data-open-qa>‚ùì</button>
    </div>

    <h2 class="text-xl md:text-2xl font-bold mb-3">
      –í—Ä–µ–º—è –ø—Ä–∞–∫—Ç–∏–∫–æ–≤–∞—Ç—å—Å—è!
    </h2>

    <p class="step-body-text mb-3">
      –í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–æ–≥–æ <b>tense</b> (Simple, Continuous, Perfect –∏–ª–∏ Perfect Continuous) –∏ —Ç–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏, –≤ –º–æ–º–µ–Ω—Ç –∫–æ—Ç–æ—Ä–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç (–Ω–∞—Å—Ç–æ—è—â–µ–µ, –ø—Ä–æ—à–µ–¥—à–µ–µ –∏–ª–∏ –±—É–¥—É—â–µ–µ), –±—É–¥–µ—Ç –º–µ–Ω—è—Ç—å—Å—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π.
    </p>

    <p class="step-body-text mb-4">
      –î–∞–≤–∞–π—Ç–µ –ø—Ä–æ–≤–µ—Ä–∏–º, –∫–∞–∫ –≤—ã –ø–æ–Ω—è–ª–∏ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ä–∞–∑–ª–∏—á–∏—è –º–µ–∂–¥—É –≤—Ä–µ–º–µ–Ω–∞–º–∏!
    </p>

    <div id="exerciseContainer">
      <!-- Exercise will be rendered here by JavaScript -->
    </div><!-- –ò—Å—Ç–æ—á–Ω–∏–∫ —Å–ª–æ–≤ –¥–ª—è —Å–ª–æ–≤–∞—Ä–∏–∫–∞ (—É—Ä–æ–∫ 4, –ø—Ä–∞–∫—Ç–∏–∫–∞) -->
<div id="lesson4-vocab-source" class="hidden">
  <span class="word-tip" data-ru="–∏–¥—Ç–∏, —Ö–æ–¥–∏—Ç—å">Go</span>
  <span class="word-tip" data-ru="—Ä–∞–±–æ—Ç–∞">Work</span>

  <span class="word-tip" data-ru="–∫–∞–∂–¥—ã–π">Every</span>
  <span class="word-tip" data-ru="–¥–µ–Ω—å">Day</span>

  <span class="word-tip" data-ru="—á–∏—Ç–∞—Ç—å">Read</span>
  <span class="word-tip" data-ru="–∫–Ω–∏–≥–∞">Book</span>

  <span class="word-tip" data-ru="–ø—Ä—è–º–æ —Å–µ–π—á–∞—Å">Right now</span>
  <span class="word-tip" data-ru="—É–∂–µ">Already</span>

  <span class="word-tip" data-ru="—Å–æ–ª–Ω—Ü–µ">Sun</span>
  <span class="word-tip" data-ru="–ø–æ–¥–Ω–∏–º–∞—Ç—å—Å—è, –≤–æ—Å—Ö–æ–¥–∏—Ç—å">Rise</span>
  <span class="word-tip" data-ru="–≤–æ—Å—Ç–æ–∫">East</span>

  <span class="word-tip" data-ru="–∏–∑—É—á–∞—Ç—å">Study</span>
  <span class="word-tip" data-ru="—Ç—Ä–∏">Three</span>
  <span class="word-tip" data-ru="–≥–æ–¥">Year</span>
</div>
    <button id="next-btn-step4" class="btn-main mt-6 next-step-btn hidden" data-next="5">
      –ó–∞–≤–µ—Ä—à–∏—Ç—å —É—Ä–æ–∫ ‚Üí
    </button>
  </section>

  <!-- ================ –®–ê–ì 5. –§–ò–ù–ê–õ ================ -->
  <section id="step-5" class="step-panel">
    <div class="step-panel-header">
      <span class="step-pill">–®–∞–≥ 5 ¬∑ –§–ò–ù–ê–õ</span>
      <button class="step-icon" type="button" data-open-qa>‚ùì</button>
    </div>

    <h2 class="text-xl md:text-2xl font-bold mb-3">
      –û—Ç–ª–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞! üéâ
    </h2>

    <p class="step-body-text mb-3">
      –í—ã –ø–æ–∑–Ω–∞–∫–æ–º–∏–ª–∏—Å—å —Å –æ—Å–Ω–æ–≤–Ω—ã–º–∏ –≥—Ä—É–ø–ø–∞–º–∏ –∞–Ω–≥–ª–∏–π—Å–∫–∏—Ö –≤—Ä–µ–º–µ–Ω!
    </p>
    
    <div class="summary-box">
      <h3>–ß—Ç–æ –º—ã —É–∑–Ω–∞–ª–∏:</h3>
      <ul>
        <li>‚úì –°—É—â–µ—Å—Ç–≤—É–µ—Ç 4 –æ—Å–Ω–æ–≤–Ω—ã—Ö –≥—Ä—É–ø–ø—ã –≤—Ä–µ–º–µ–Ω: Simple, Continuous, Perfect, Perfect Continuous</li>
        <li>‚úì –ö–∞–∂–¥–∞—è –≥—Ä—É–ø–ø–∞ –∏–º–µ–µ—Ç —Ñ–æ—Ä–º—ã Present, Past –∏ Future</li>
        <li>‚úì Simple - –¥–ª—è —Ñ–∞–∫—Ç–æ–≤ –∏ —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π</li>
        <li>‚úì Continuous - –¥–ª—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –≤ —Ä–∞–∑–≤–∏—Ç–∏–∏</li>
        <li>‚úì Perfect - –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º</li>
      </ul>
    </div>
    
    <p class="step-body-text mb-3">
      –í —Å–ª–µ–¥—É—é—â–∏—Ö —É—Ä–æ–∫–∞—Ö –º—ã –ø–æ–¥—Ä–æ–±–Ω–æ —Ä–∞–∑–±–µ—Ä–µ–º –∫–∞–∂–¥–æ–µ –≤—Ä–µ–º—è —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∏ –ø—Ä–∞–∫—Ç–∏–∫–æ–π!
    </p>

    <p class="motivation">
      –ü–æ–º–Ω–∏—Ç–µ: –ø–æ–Ω–∏–º–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω - —ç—Ç–æ –∫–ª—é—á –∫ —Å–≤–æ–±–æ–¥–Ω–æ–º—É –≤–ª–∞–¥–µ–Ω–∏—é –∞–Ω–≥–ª–∏–π—Å–∫–∏–º —è–∑—ã–∫–æ–º! üîë
    </p>


    <div class="mt-5 flex flex-wrap gap-3">
      <a href="/courses/english-intro/lesson-05.html" class="btn-main">
        –ü–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —É—Ä–æ–∫—É ‚Üí
      </a>

      <a href="/courses/english-intro/" class="btn-ghost">
        –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –∫—É—Ä—Å—É
      </a>
    </div>
  </section>

  <!-- –ú–û–î–ê–õ–ö–ê Q&A -->
  <div id="qa-modal"
       class="fixed inset-0 bg-black/40 backdrop-blur-sm hidden items-center justify-center z-50 p-4">

    <div class="bg-white max-w-lg w-full rounded-2xl shadow-xl relative overflow-hidden">
      <div class="absolute -top-8 -left-8 w-36 h-36 rounded-full bg-[#FFE8B3] blur-xl opacity-60"></div>
      <div class="absolute -bottom-10 -right-10 w-40 h-40 rounded-full bg-[#FFD6C4] blur-xl opacity-60"></div>

      <div class="relative p-6 space-y-4">
        <div class="flex justify-between items-start gap-4">
          <div>
            <h2 class="text-lg font-semibold text-gray-800">
              –í–æ–ø—Ä–æ—Å—ã –ø–æ —É—Ä–æ–∫—É
            </h2>
            <p class="text-sm text-gray-600 mt-1">
              –ù–∞–ø–∏—à–∏—Ç–µ —Å–≤–æ–π –≤–æ–ø—Ä–æ—Å ‚Äî –º—ã –æ—Ç–≤–µ—Ç–∏–º –∏ –æ—Ç–≤–µ—Ç —É–≤–∏–¥—è—Ç –¥—Ä—É–≥–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏.
            </p>
          </div>

          <button id="qa-close"
                  class="text-gray-500 text-xl leading-none‚Äã‚Äã‚Äã‚Äã‚Äã‚Äã‚Äã‚Äã‚Äã‚Äã‚Äã‚Äã‚Äã‚Äã‚Äã‚Äã">&times;</button>
        </div>

        <div class="bg-amber-50 border border-amber-200 rounded-xl p-3 text-xs text-amber-800">
          –•–æ—Ç–∏—Ç–µ –ø–æ–ª—É—á–∞—Ç—å –æ—Ç–≤–µ—Ç—ã –µ—â—ë –±—ã—Å—Ç—Ä–µ–µ –∏ –∑–∞–¥–∞–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã –∫—É—Ä–∞—Ç–æ—Ä—É –ª–∏—á–Ω–æ?  
          <a href="/courses/pro.html" target="_blank" class="underline text-amber-700 font-semibold">–¢–∞—Ä–∏—Ñ PRO</a> –¥–∞—ë—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—É—é –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å –∏ –±–æ–ª—å—à–µ –≤–Ω–∏–º–∞–Ω–∏—è –∫ –≤–∞—à–∏–º –≤–æ–ø—Ä–æ—Å–∞–º üíõ
        </div>

        <div class="max-h-64 overflow-y-auto border border-gray-100 rounded-xl p-3 bg-gray-50/70"
             id="qa-list">
          <p class="text-xs text-gray-500">
            –ü–æ–∫–∞ –≤–æ–ø—Ä–æ—Å–æ–≤ –Ω–µ—Ç ‚Äî –≤—ã –º–æ–∂–µ—Ç–µ –±—ã—Ç—å –ø–µ—Ä–≤—ã–º, –∫—Ç–æ –∑–∞–¥–∞—Å—Ç –≤–æ–ø—Ä–æ—Å üôÇ
          </p>
        </div>

        <form id="qa-form" class="space-y-2">
          <label class="block text-xs text-gray-600">
            –í–∞—à –≤–æ–ø—Ä–æ—Å:
          </label>
          <textarea id="qa-text"
                    class="w-full border border-gray-200 rounded-xl px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-amber-300"
                    rows="3"
                    placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: ¬´–ß–µ–º –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è Simple –æ—Ç Continuous?¬ª"></textarea>

          <p class="text-[0.7rem] text-gray-400">
            –ß—Ç–æ–±—ã –∑–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å, –Ω—É–∂–Ω–æ –≤–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç.  
            –ï—Å–ª–∏ –≤—ã –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ã, –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
            <a href="/student/" class="underline">–≤—Ö–æ–¥–∞ / —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</a>.
          </p>

          <div class="flex justify-end">
            <button type="submit"
                    id="qa-submit"
                    class="btn-main text-sm px-4 py-1.5">
              –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤–æ–ø—Ä–æ—Å ‚Üí
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

</main>

<!-- ============================= -->
<!-- –ö–û–ù–§–ò–ì –£–†–û–ö–ê (–í–ê–ñ–ù–û!) -->
<!-- ============================= -->
<script type="module">
  window.lessonConfig = {
    lessonId:        "english-intro-lesson-4",
    lessonSlug:      "lesson-04-tenses",
    courseId:        "english-intro",
    lessonQaDocId:   "english-intro-lesson-4",
    submissionsRoot: "lessonSubmissions",
    totalSteps:      5,
    audioNextStep:   null,
    vocabCategory:   "vocabulary-lesson4"
  };
</script>

<script>
// =========================================================
// üî∏ –®–ê–ì 4 ‚Äî –£–ü–†–ê–ñ–ù–ï–ù–ò–ï –ù–ê –í–†–ï–ú–ï–ù–ê
// =========================================================

let exerciseData = {
  currentQuestion: 0,
  score: 0,
  questions: [
    {
      id: 1,
      text: 'I go to work every day - –Ø –∫–∞–∂–¥—ã–π –¥–µ–Ω—å —Ö–æ–∂—É –Ω–∞ —Ä–∞–±–æ—Ç—É.',
      options: ['Simple', 'Continuous', 'Perfect'],
      correct: 'Simple',
      explanation: '–≠—Ç–æ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ, –ø–æ–≤—Ç–æ—Ä—è—é—â–µ–µ—Å—è –¥–µ–π—Å—Ç–≤–∏–µ - —Ñ–∞–∫—Ç. –ò—Å–ø–æ–ª—å–∑—É–µ–º Simple.'
    },
    {
      id: 2,
      text: 'I am reading a book right now - –Ø —Å–µ–π—á–∞—Å —á–∏—Ç–∞—é –∫–Ω–∏–≥—É (–≤ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç).',
      options: ['Simple', 'Continuous', 'Perfect'],
      correct: 'Continuous',
      explanation: '–î–µ–π—Å—Ç–≤–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å, –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ. –ò—Å–ø–æ–ª—å–∑—É–µ–º Continuous.'
    },
    {
      id: 3,
      text: ' I have already read this book - –Ø —É–∂–µ –ø—Ä–æ—á–∏—Ç–∞–ª —ç—Ç—É –∫–Ω–∏–≥—É (—Ä–µ–∑—É–ª—å—Ç–∞—Ç –µ—Å—Ç—å).',
      options: ['Simple', 'Continuous', 'Perfect'],
      correct: 'Perfect',
      explanation: '–î–µ–π—Å—Ç–≤–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ, –µ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç. –ò—Å–ø–æ–ª—å–∑—É–µ–º Perfect.'
    },
    {
      id: 4,
      text: 'The sun rises in the east - –°–æ–ª–Ω—Ü–µ –≤—Å—Ç–∞–µ—Ç –Ω–∞ –≤–æ—Å—Ç–æ–∫–µ.',
      options: ['Simple', 'Continuous', 'Perfect'],
      correct: 'Simple',
      explanation: '–≠—Ç–æ –æ–±—â–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Ñ–∞–∫—Ç, –Ω–µ–∏–∑–º–µ–Ω–Ω–∞—è –∏—Å—Ç–∏–Ω–∞. –ò—Å–ø–æ–ª—å–∑—É–µ–º Simple.'
    },
    {
      id: 5,
      text: 'I have been studying English for three years - –Ø –∏–∑—É—á–∞—é –∞–Ω–≥–ª–∏–π—Å–∫–∏–π —É–∂–µ 3 –≥–æ–¥–∞ (–∏ –ø—Ä–æ–¥–æ–ª–∂–∞—é).',
      options: ['Simple', 'Continuous', 'Perfect', 'Perfect Continuous'],
      correct: 'Perfect Continuous',
      explanation: '–î–µ–π—Å—Ç–≤–∏–µ –Ω–∞—á–∞–ª–æ—Å—å –≤ –ø—Ä–æ—à–ª–æ–º –∏ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è, –µ—Å—Ç—å –ø–µ—Ä–∏–æ–¥ –≤—Ä–µ–º–µ–Ω–∏. –≠—Ç–æ Perfect Continuous.'
    }
  ]
};

function initExercise() {
  exerciseData.currentQuestion = 0;
  exerciseData.score = 0;
  renderQuestion();
}

function renderQuestion() {
  const question = exerciseData.questions[exerciseData.currentQuestion];
  const container = document.getElementById('exerciseContainer');
  
  container.innerHTML = `
    <div class="question-counter">–í–æ–ø—Ä–æ—Å ${exerciseData.currentQuestion + 1} –∏–∑ ${exerciseData.questions.length}</div>
    <div class="question-text">${question.text}</div>
    <div class="options">
      ${question.options.map(option => `
        <button class="option-btn" data-answer="${option}">${option}</button>
      `).join('')}
    </div>
    <div class="feedback"></div>
    <div class="score">–ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤: ${exerciseData.score} –∏–∑ ${exerciseData.currentQuestion}</div>
  `;
  
  document.querySelectorAll('.option-btn').forEach(btn => {
    btn.addEventListener('click', checkAnswer);
  });
}

function checkAnswer(e) {
  const selectedAnswer = e.target.dataset.answer;
  const question = exerciseData.questions[exerciseData.currentQuestion];
  const feedback = document.querySelector('.feedback');
  const optionBtns = document.querySelectorAll('.option-btn');
  
  // Disable all buttons
  optionBtns.forEach(btn => btn.disabled = true);
  
  if (selectedAnswer === question.correct) {
    e.target.classList.add('correct');
    feedback.innerHTML = `<p class="correct-feedback">‚úì –ü—Ä–∞–≤–∏–ª—å–Ω–æ! ${question.explanation}</p>`;
    exerciseData.score++;
  } else {
    e.target.classList.add('incorrect');
    optionBtns.forEach(btn => {
      if (btn.dataset.answer === question.correct) {
        btn.classList.add('correct');
      }
    });
    feedback.innerHTML = `<p class="incorrect-feedback">‚úó –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ. ${question.explanation}</p>`;
  }
  
  // Move to next question or show results
  setTimeout(() => {
    exerciseData.currentQuestion++;
    if (exerciseData.currentQuestion < exerciseData.questions.length) {
      renderQuestion();
    } else {
      showResults();
    }
  }, 3000);
}

function showResults() {
  const container = document.getElementById('exerciseContainer');
  const percentage = Math.round((exerciseData.score / exerciseData.questions.length) * 100);
  let message = '';
  
  if (percentage === 100) {
    message = '–ü—Ä–µ–≤–æ—Å—Ö–æ–¥–Ω–æ! –í—ã –æ—Ç–ª–∏—á–Ω–æ —Ä–∞–∑–æ–±—Ä–∞–ª–∏—Å—å –≤ —Ç–∏–ø–∞—Ö –≤—Ä–µ–º–µ–Ω! üåü';
  } else if (percentage >= 80) {
    message = '–û—Ç–ª–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞! –í—ã —Ö–æ—Ä–æ—à–æ –ø–æ–Ω–∏–º–∞–µ—Ç–µ –æ—Å–Ω–æ–≤—ã! üëç';
  } else if (percentage >= 60) {
    message = '–ù–µ–ø–ª–æ—Ö–æ! –ù–æ —Å—Ç–æ–∏—Ç –µ—â–µ —Ä–∞–∑ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª. üìö';
  } else {
    message = '–ù–µ —Ä–∞—Å—Å—Ç—Ä–∞–∏–≤–∞–π—Ç–µ—Å—å! –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ —Ç–µ–æ—Ä–∏—é –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞. üí™';
  }
  
  container.innerHTML = `
    <div class="results">
      <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã</h3>
      <div class="score-big">${exerciseData.score} –∏–∑ ${exerciseData.questions.length}</div>
      <div class="percentage">${percentage}%</div>
      <p class="result-message">${message}</p>
      <button class="btn-retry" onclick="initExercise()">–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞</button>
    </div>
  `;

  // Show next step button
  document.getElementById('next-btn-step4').classList.remove('hidden');
}

// Auto-initialize exercise when step 4 is visible
const observer = new MutationObserver((mutations) => {
  mutations.forEach((mutation) => {
    if (mutation.target.id === 'step-4' && mutation.target.classList.contains('step-panel--visible')) {
      initExercise();
    }
  });
});

const step4 = document.getElementById('step-4');
if (step4) {
  observer.observe(step4, { attributes: true, attributeFilter: ['class'] });
}

/* ===== –î–æ–±–∞–≤–ª—è–µ–º —Å–ª–æ–≤–∞ —É—Ä–æ–∫–∞ 4 –≤ —Å–ª–æ–≤–∞—Ä–∏–∫ ===== */

document.addEventListener("DOMContentLoaded", () => {
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —ç—Ç–æ —É—Ä–æ–∫ 4
  if (window.lessonConfig?.lessonSlug !== "lesson-04-tenses") return;

  // –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–æ–ª—å–∫–æ –¥–ª—è —É—Ä–æ–∫–∞ 4
  window.buildVocabEntries = function() {
    const entries = [];
    const tips = document.querySelectorAll("#lesson4-vocab-source .word-tip");
    const map = new Map();

    tips.forEach(tip => {
      const w  = tip.textContent.trim().toLowerCase();
      const ru = (tip.dataset.ru || "").trim();
      if (!w) return;
      if (!map.has(w)) map.set(w, ru);
    });

    return Array.from(map.entries()).map(([word, translation]) => ({
      word,
      translation
    }));
  };
});
</script>

<!-- ============================= -->
<!-- –û–ë–©–ò–ô –°–ö–†–ò–ü–¢ –ö–£–†–°–ê (–í–ê–ñ–ù–û!) -->
<!-- ============================= -->
<script type="module" src="/js/courses/english-intro.js"></script>

</body>
</html>

