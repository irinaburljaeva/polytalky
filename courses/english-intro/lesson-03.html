<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>English Intro ‚Äî –£—Ä–æ–∫ 3</title>
  <base href="/">
  <link rel="icon" type="image/jpg" href="/assets/favicon.jpg">

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Firebase init -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getAuth } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
    import { getFirestore } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBAU_uMTePpKwVNZNhqk2pss2PuSitGfQI",
      authDomain: "polytalky-70999.firebaseapp.com",
      projectId: "polytalky-70999",
      storageBucket: "polytalky-70999.firebasestorage.app",
      messagingSenderId: "62407152289",
      appId: "1:62407152289:web:b0c0efdb2472f12b10d6e0"
    };

    window.firebaseApp  = initializeApp(firebaseConfig);
    window.firebaseAuth = getAuth(window.firebaseApp);
    window.firebaseDb   = getFirestore(window.firebaseApp);
  </script>

  <style>
    :root{
      --bg-cream:#FFF8E5;
      --bg-cream-soft:#FFFDF4;
      --accent-yellow:#FFDE59;
      --accent-yellow-deep:#FFBA08;
      --accent-peach:#FFD4A8;
      --accent-coral:#FF8A5C;
      --accent-mint:#C4F1BE;
      --text-main:#111827;
      --text-muted:#6b7280;
      --border-soft:rgba(148,163,184,.35);
    }

    body{
      margin:0;
      min-height:100vh;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      color:var(--text-main);
      background:
        radial-gradient(circle at 0 0, #FFF9D9 0, transparent 55%),
        radial-gradient(circle at 100% 0, #FFE3CC 0, transparent 55%),
        linear-gradient(to bottom,#FFFDF6,#FFF8E5);
      position:relative;
      overflow-x:hidden;
    }

    /* —Ñ–æ–Ω–æ–≤—ã–µ –±—É–∫–≤—ã */
    .bg-letter{
      position:fixed;
      font-weight:900;
      font-size:120px;
      color:rgba(255,255,255,0.55);
      mix-blend-mode:screen;
      pointer-events:none;
      z-index:-1;
    }
    .bg-letter.a{top:5%;left:5%;transform:rotate(-12deg);}
    .bg-letter.e{top:18%;right:2%;transform:rotate(9deg);}
    .bg-letter.i{bottom:18%;left:10%;transform:rotate(5deg);}
    .bg-letter.o{bottom:8%;right:8%;transform:rotate(-7deg);}
    .bg-letter.u{top:45%;left:45%;transform:rotate(15deg);opacity:0.4;}

    /* –í–µ—Ä—Ö–Ω–∏–π –±–∞—Ä */
    .top-bar{
      backdrop-filter:blur(16px);
      background:linear-gradient(to right,rgba(255,255,255,.9),rgba(255,249,219,.9));
      border-bottom:1px solid rgba(0,0,0,.06);
    }

    .back-to-course-btn{
      font-size:0.85rem;
      padding:6px 14px;
      border-radius:8px;
      background:#fff9e6;
      border:1px solid #facc15;
      color:#92400e;
      text-decoration:none;
      transition:0.25s;
      white-space:nowrap;
    }
    .back-to-course-btn:hover{
      background:#fef3c7;
      border-color:#eab308;
      color:#78350f;
      box-shadow:0 4px 10px rgba(234,179,8,0.25);
    }

    .lesson-shell{
      max-width:980px;
      margin:0 auto;
      padding:1.5rem 1.25rem 3.2rem;
    }

    /* –ü–û–î–°–í–ï–¢–ö–ê –ê–ö–¢–ò–í–ù–´–• –≠–õ–ï–ú–ï–ù–¢–û–í */
    .step-dot--active {
      transform: scale(1.08);
    }
    .step-dot--active .step-dot-circle{
      box-shadow: 0 0 10px rgba(255, 200, 0, 0.6);
    }
    .step-dot--done {
      opacity: 1;
    }

    .step-dot {
      position:relative;
      z-index:1;
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:.25rem;
      font-size:.65rem;
      color:var(--text-muted);
      max-width:110px;
      text-align:center;
      cursor: pointer;
      opacity: 0.55;
      transition: 0.25s;
    }

    .step-dot-circle{
      width:48px;
      height:48px;
      border-radius:999px;
      display:flex;
      align-items:center;
      justify-content:center;
      border:1px solid rgba(148,163,184,.7);
      background:rgba(255,255,255,.95);
      box-shadow:0 8px 18px rgba(0,0,0,.08);
    }

    .step-dot img {
      width: 32px;
      height: 32px;
    }

    .step-dot--active .step-dot-circle{
      background:linear-gradient(145deg,#FFDE59,#FFB347);
      border-color:#f97316;
      box-shadow:0 0 0 2px rgba(255,237,213,.95),0 10px 28px rgba(249,115,22,.35);
      transform:translateY(-1px);
    }

    .step-dot--done .step-dot-circle{
      background:linear-gradient(145deg,#4ade80,#22c55e);
      border-color:#16a34a;
    }

    .step-dot--active .step-dot-label{
      color:#92400e;
      font-weight:600;
    }
    .step-dot--done .step-dot-label{
      color:#166534;
    }

    .step-nav{
      position:relative;
      display:flex;
      justify-content:center;
      gap:1.6rem;
      margin:1.8rem 0 1.4rem;
      flex-wrap:wrap;
    }
    .step-nav::before{
      content:"";
      position:absolute;
      left:8%;
      right:8%;
      top:24px;
      height:2px;
      background:linear-gradient(90deg,#fee2e2,#fde68a,#dcfce7);
      z-index:0;
    }

    .step-panel {
      display: none;
      border-radius:1.7rem;
      background:rgba(255,255,255,.98);
      border:1px solid rgba(148,163,184,.25);
      box-shadow:0 18px 52px rgba(15,23,42,.18);
      padding:1.25rem 1.4rem 1.4rem;
    }

    .step-panel--visible {
      display: block;
      animation: fade 0.35s ease;
    }

    @keyframes fade {
      from { opacity: 0; transform: translateY(10px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    .step-panel-header{
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap:.5rem;
      margin-bottom:.75rem;
    }

    .step-pill{
      display:inline-flex;
      align-items:center;
      gap:.35rem;
      padding:.26rem .7rem;
      border-radius:999px;
      font-size:.68rem;
      border:1px solid rgba(156,163,175,.65);
      background:#F9FAFB;
      color:var(--text-muted);
    }

    .step-icon{
      font-size:1.4rem;
      opacity:.95;
      cursor:pointer;
    }

    .step-body-text{
      font-size:.88rem;
      line-height:1.5;
      color:#1f2937;
    }

    .btn-main {
      background: linear-gradient(135deg,#FF9F1C,#FFDE59);
      padding: 12px 22px;
      border-radius: 999px;
      font-weight: 600;
      color: #78350f;
      display: inline-block;
      transition: .2s;
      border: none;
      cursor: pointer;
      box-shadow:0 12px 26px rgba(249,115,22,0.45);
    }
    .btn-main:hover {
      transform:translateY(-1px);
      box-shadow:0 14px 30px rgba(249,115,22,0.5);
    }
    .btn-main:disabled{
      opacity:.4;
      box-shadow:none;
      cursor:default;
      transform:none;
    }

    .btn-ghost{
      border-radius:999px;
      padding:.5rem 1rem;
      border:1px solid rgba(148,163,184,.5);
      background:rgba(255,255,255,.9);
      font-size:.78rem;
      color:var(--text-muted);
      cursor:pointer;
      text-decoration:none;
      display:inline-block;
    }

    .soft-block{
      border-radius:1.1rem;
      padding:.8rem .9rem;
      border:1px solid rgba(226,232,240,1);
      background:linear-gradient(135deg,#FFFCF7,#FFF8E5);
      font-size:.8rem;
    }

    .soft-block--blue{
      background:linear-gradient(135deg,#dbeafe,#eff6ff);
      border-color:#bfdbfe;
    }

    .soft-block--green{
      background:linear-gradient(135deg,#ecfdf5,#f0fdf4);
      border-color:#bbf7d0;
    }

    .soft-block--rose{
      background:linear-gradient(135deg,#fff1f2,#ffe4e6);
      border-color:#fecaca;
    }

    .input-main{
      width:100%;
      border-radius:.95rem;
      border:1px solid rgba(209,213,219,1);
      background:#FFFFFF;
      padding:.5rem .7rem;
      font-size:.84rem;
      outline:none;
      transition:border-color .15s ease, box-shadow .15s ease;
    }

    .input-main:focus{
      border-color:#f97316;
      box-shadow:0 0 0 1px rgba(249,115,22,.4);
    }

    textarea.input-main{
      resize:vertical;
      min-height:90px;
    }

    /* –¢—Ä–µ–Ω–∞–∂—ë—Ä drag&drop */
    .drag-item {
      display: inline-block;
      background: #fff;
      border: 1px solid #d1d5db;
      padding: 8px 14px;
      border-radius: 10px;
      cursor: grab;
      font-size: 0.9rem;
      transition: 0.15s;
      user-select: none;
    }
    .drag-item:active {
      cursor: grabbing;
      transform: scale(1.05);
    }

    .drop-zone {
      min-height: 80px;
      border: 2px dashed #fbbf24;
      border-radius: 14px;
      padding: 12px;
      background: #fffef5;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
    }

    .drop-zone .word-chip {
      display: inline-block;
      background: #fff;
      border: 1px solid #d1d5db;
      padding: 6px 12px;
      border-radius: 8px;
      font-size: 0.85rem;
    }

    .sentence-number {
      font-size: 0.9rem;
      font-weight: 600;
      color: #78350f;
      margin-bottom: 0.5rem;
    }

    .hidden{display:none;}

    /* –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è */
    @media (max-width: 768px) {
      .lesson-shell{
        padding: 1rem .9rem 2.2rem;
      }

      .top-bar .max-w-7xl{
        gap: .5rem;
        flex-wrap: wrap;
      }

      #user-status{
        font-size: 0.7rem;
        flex-basis: 100%;
        order: 2;
      }

      .back-to-course-btn{
        order: 3;
        margin-right: 0;
      }

      .step-nav{
        gap: 1rem;
        margin: 1.3rem 0 1.1rem;
      }

      .step-nav::before{
        left: 10%;
        right: 10%;
        top: 24px;
      }

      .step-dot{
        max-width: 80px;
        font-size: .6rem;
      }

      .step-dot-circle{
        width: 40px;
        height: 40px;
      }

      .step-dot img{
        width: 26px;
        height: 26px;
      }
    }
  </style>
</head>

<body>

<!-- –§–æ–Ω–æ–≤—ã–µ –±—É–∫–≤—ã -->
<div class="bg-letter a">A</div>
<div class="bg-letter e">E</div>
<div class="bg-letter i">I</div>
<div class="bg-letter o">O</div>
<div class="bg-letter u">U</div>

<!-- –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å -->
<header class="top-bar sticky top-0 z-40">
  <div class="max-w-7xl mx-auto px-4 py-3 flex justify-between items-center">
    <a href="/" class="flex items-center gap-2 font-semibold text-[0.9rem] text-[#374151]">
      <img src="/assets/logo.png" alt="PolyTalky" class="w-7 h-7">
      PolyTalky
    </a>

    <div class="flex items-center gap-3 text-[0.78rem] text-gray-600">
      <div id="user-status"></div>

      <a href="/student/feedback.html"
         id="feedback-link"
         class="hidden relative flex items-center justify-center w-9 h-9 rounded-full border border-gray-300 bg-white">
        üì©
        <span id="feedback-dot"
              class="hidden absolute -top-1 -right-1 w-3 h-3 rounded-full bg-red-500 ring-2 ring-white"></span>
      </a>

      <a href="/student/"
         target="_blank"
         id="login-btn"
         class="hidden border border-gray-300 rounded-full px-3 py-1.5 text-[0.75rem] text-gray-600 bg-white">
        –í–æ–π—Ç–∏
      </a>

      <a href="/courses/english-intro/" class="back-to-course-btn">–ù–∞–∑–∞–¥ –∫ –∫—É—Ä—Å—É</a>
    </div>
  </div>
</header>

<main class="lesson-shell">

  <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è —à–∞–≥–æ–≤ -->
  <div class="step-nav">
    <button class="step-dot step-dot--active" data-step="1">
      <div class="step-dot-circle">
        <img src="/assets/lessons/hello.png" alt="–í–≤–µ–¥–µ–Ω–∏–µ">
      </div>
      <div class="step-dot-label">–í–≤–µ–¥–µ–Ω–∏–µ</div>
    </button>

    <button class="step-dot" data-step="2">
      <div class="step-dot-circle">
        <img src="/assets/lessons/video.png" alt="–í–∏–¥–µ–æ">
      </div>
      <div class="step-dot-label">–í–∏–¥–µ–æ</div>
    </button>

    <button class="step-dot" data-step="3">
      <div class="step-dot-circle">
        <img src="/assets/lessons/vowels.png" alt="–¢—Ä–µ–Ω–∞–∂—ë—Ä">
      </div>
      <div class="step-dot-label">–¢—Ä–µ–Ω–∞–∂—ë—Ä</div>
    </button>

    <button class="step-dot" data-step="4">
      <div class="step-dot-circle">
        <img src="/assets/lessons/video.png" alt="–ì—Ä–∞–º–º–∞—Ç–∏–∫–∞">
      </div>
      <div class="step-dot-label">–ì–ª–∞–≥–æ–ª to be</div>
    </button>

    <button class="step-dot" data-step="5">
      <div class="step-dot-circle">
        <img src="/assets/lessons/vowels.png" alt="–£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ">
      </div>
      <div class="step-dot-label">–£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ</div>
    </button>

    <button class="step-dot" data-step="6">
      <div class="step-dot-circle">
        <img src="/assets/lessons/finish.png" alt="–§–∏–Ω–∞–ª">
      </div>
      <div class="step-dot-label">–§–∏–Ω–∞–ª</div>
    </button>
  </div>

  <!-- ================ –®–ê–ì 1. –í–í–û–î–ù–ê–Ø ================ -->
  <section id="step-1" class="step-panel step-panel--visible">
    <div class="step-panel-header">
      <span class="step-pill">–£—Ä–æ–∫ 3 ¬∑ –ü–æ—Ä—è–¥–æ–∫ —Å–ª–æ–≤ –∏ to be</span>
      <button class="step-icon" type="button" data-open-qa>‚ùì</button>
    </div>

    <h1 class="text-2xl md:text-3xl font-bold mb-3">
      –ö–∞–∫ –≤—ã—Å—Ç—Ä–æ–∏—Ç—å –∞–Ω–≥–ª–∏–π—Å–∫–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ, —á—Ç–æ–±—ã –≤–∞—Å –ø–æ–Ω—è–ª–∏ —Å –ø–µ—Ä–≤–æ–≥–æ —Ä–∞–∑–∞
    </h1>

    <p class="step-body-text mb-3">
      –°–µ–≥–æ–¥–Ω—è –º—ã —Ä–∞–∑–±–µ—Ä–µ–º –¥–≤–µ –∫–ª—é—á–µ–≤—ã–µ –≤–µ—â–∏:
      <b>–ø–æ—Ä—è–¥–æ–∫ —Å–ª–æ–≤ –≤ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–∏</b> –∏ <b>–≥–ª–∞–≥–æ–ª <i>to be</i></b>.
    </p>

    <p class="step-body-text mb-3">
      –í —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ –º–æ–∂–Ω–æ –∑–∞–≤–µ—Ä–Ω—É—Ç—å —Ñ—Ä–∞–∑—É –∫–∞–∫ —É–≥–æ–¥–Ω–æ: 
      <span class="italic">¬´–Ω—É –∫–∞–∫ –≤–∞–º –∑–∞—Ö–æ—á–µ—Ç—Å—è, —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ¬ª</span>.  
      –í –∞–Ω–≥–ª–∏–π—Å–∫–æ–º —Ç–∞–∫–æ–µ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç üòÖ ‚Äî —Ç–∞–º –≤—Å—ë –ø–æ–¥—á–∏–Ω—è–µ—Ç—Å—è 
      —á—ë—Ç–∫–∏–º –ø—Ä–∞–≤–∏–ª–∞–º. –ù–æ —Ö–æ—Ä–æ—à–∞—è –Ω–æ–≤–æ—Å—Ç—å –≤ —Ç–æ–º, —á—Ç–æ,
      –ø–æ–Ω—è–≤ —Å—Ö–µ–º—É, –≤—ã —Å–º–æ–∂–µ—Ç–µ —Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è —É–≤–µ—Ä–µ–Ω–Ω–æ –∏ —Å–ø–æ–∫–æ–π–Ω–æ.
    </p>

    <div class="soft-block soft-block--blue mt-4">
      <p class="font-semibold mb-2">
        –ë–∞–∑–æ–≤–∞—è —Å—Ö–µ–º–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è:
      </p>
      <p class="text-center text-lg font-mono mb-2">
        <b>–ö–¢–û</b> ‚Üí <b>–ß–¢–û –î–ï–õ–ê–ï–¢</b> ‚Üí <b>–ö–£–î–ê / –ö–û–ì–î–ê / –ö–ê–ö</b>
      </p>
      <p class="step-body-text text-sm">
        –ù–∞–ø—Ä–∏–º–µ—Ä: <br />
        <span class="font-mono">I come home very late.</span> ‚Äî –ø—Ä–∞–≤–∏–ª—å–Ω–æ.<br />
        –ê –≤–æ—Ç –º–µ–Ω—è—Ç—å –º–µ—Å—Ç–∞–º–∏ <b>–ø–æ–¥–ª–µ–∂–∞—â–µ–µ</b> –∏ <b>—Å–∫–∞–∑—É–µ–º–æ–µ</b> –≤ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º 
        –Ω–µ–ª—å–∑—è –Ω–∏–∫–æ–≥–¥–∞: –Ω–∏ –≤ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è—Ö, –Ω–∏ –≤ –æ—Ç—Ä–∏—Ü–∞–Ω–∏—è—Ö, –Ω–∏ –≤ –≤–æ–ø—Ä–æ—Å–∞—Ö.
      </p>
    </div>

    <p class="step-body-text text-sm mt-4">
      –ù–∞ —Å–ª–µ–¥—É—é—â–µ–º —à–∞–≥–µ –º—ã –ø–æ—Å–º–æ—Ç—Ä–∏–º –Ω–µ–±–æ–ª—å—à–æ–µ –≤–∏–¥–µ–æ, –≥–¥–µ —ç—Ç–∞ —Å—Ö–µ–º–∞ –æ–±—ä—è—Å–Ω—è–µ—Ç—Å—è
      –Ω–∞ –∂–∏–≤—ã—Ö –ø—Ä–∏–º–µ—Ä–∞—Ö. –ê –ø–æ—Ç–æ–º –ø–æ—Ç—Ä–µ–Ω–∏—Ä—É–µ–º—Å—è –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º —Ç—Ä–µ–Ω–∞–∂—ë—Ä–µ üíõ
    </p>

    <button class="btn-main mt-6 next-step-btn" data-next="2">
      –ü–µ—Ä–µ–π—Ç–∏ –∫ –≤–∏–¥–µ–æ ‚Üí
    </button>
  </section>

  <!-- ================ –®–ê–ì 2. –í–ò–î–ï–û ================ -->
  <section id="step-2" class="step-panel">
    <div class="step-panel-header">
      <span class="step-pill">–®–∞–≥ 2 ¬∑ –í–∏–¥–µ–æ –æ –ø–æ—Ä—è–¥–∫–µ —Å–ª–æ–≤</span>
      <button class="step-icon" type="button" data-open-qa>‚ùì</button>
    </div>

    <h2 class="text-xl md:text-2xl font-bold mb-3">
      –°–º–æ—Ç—Ä–∏–º, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ—Ä—è–¥–æ–∫ —Å–ª–æ–≤ –≤ –∂–∏–≤–æ–π —Ä–µ—á–∏
    </h2>

    <p class="step-body-text mb-4">
      –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –≤–∏–¥–µ–æ: –æ–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, –∫–∞–∫ –Ω–æ—Å–∏—Ç–µ–ª—å —è–∑—ã–∫–∞ 
      —Å–Ω–∞—á–∞–ª–∞ –Ω–∞–∑—ã–≤–∞–µ—Ç <b>–∫—Ç–æ</b>, –∑–∞—Ç–µ–º <b>—á—Ç–æ –¥–µ–ª–∞–µ—Ç</b>, 
      –∞ —É–∂–µ –ø–æ—Ç–æ–º –¥–æ–±–∞–≤–ª—è–µ—Ç –¥–µ—Ç–∞–ª–∏ –≤—Ä–æ–¥–µ –≤—Ä–µ–º–µ–Ω–∏ –∏ –º–µ—Å—Ç–∞.
    </p>

    <div class="flex justify-center mt-4">
      <div class="w-full max-w-md aspect-video rounded-2xl overflow-hidden shadow-md">
        <iframe
          class="w-full h-full"
          src="https://www.youtube.com/embed/dQw4w9WgXcQ"
          title="–í–∏–¥–µ–æ –æ –ø–æ—Ä—è–¥–∫–µ —Å–ª–æ–≤ –≤ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º"
          frameborder="0"
          allowfullscreen
        ></iframe>
      </div>
    </div>

    <p class="step-body-text text-sm mt-4">
      –ï—Å–ª–∏ —Å–µ–π—á–∞—Å —Å–ª–æ–∂–Ω–æ –ø–æ–Ω—è—Ç—å –≤—Å—ë –Ω–∞ —Å–ª—É—Ö ‚Äî —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ. 
      –ú–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å —Å—É–±—Ç–∏—Ç—Ä—ã –∏ —Å–Ω–∏–∑–∏—Ç—å —Å–∫–æ—Ä–æ—Å—Ç—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è.  
      –ì–ª–∞–≤–Ω–æ–µ ‚Äî —É–ª–æ–≤–∏—Ç—å –æ–±—â—É—é –∏–¥–µ—é: –ø–æ—Ä—è–¥–æ–∫ —Å–ª–æ–≤ –≤ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º ‚Äî —ç—Ç–æ
      <b>–∂—ë—Å—Ç–∫–∏–π –∫–∞—Ä–∫–∞—Å</b>, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –¥–µ—Ä–∂–∏—Ç—Å—è —Å–º—ã—Å–ª –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è.
    </p>

    <button class="btn-main mt-6 next-step-btn" data-next="3">
      –ü–µ—Ä–µ–π—Ç–∏ –∫ —Ç—Ä–µ–Ω–∞–∂—ë—Ä—É ‚Üí
    </button>
  </section>

  <!-- ================ –®–ê–ì 3. –¢–†–ï–ù–ê–ñ–Å–† DRAG & DROP ================ -->
  <section id="step-3" class="step-panel">
    <div class="step-panel-header">
      <span class="step-pill">–®–∞–≥ 3 ¬∑ –¢—Ä–µ–Ω–∞–∂—ë—Ä</span>
      <button class="step-icon" type="button" data-open-qa>‚ùì</button>
    </div>

    <h2 class="text-xl md:text-2xl font-bold mb-3">
      –°–æ–±–µ—Ä–∏—Ç–µ –∞–Ω–≥–ª–∏–π—Å–∫–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ
    </h2>

    <p class="step-body-text mb-3">
      –°–µ–π—á–∞—Å –ø–æ—Ç—Ä–µ–Ω–∏—Ä—É–µ–º—Å—è –≤ –ø–æ—Ä—è–¥–∫–µ —Å–ª–æ–≤.  
      –£ –≤–∞—Å –µ—Å—Ç—å –Ω–∞–±–æ—Ä —Å–ª–æ–≤ ‚Äî –ø–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –∏—Ö –≤ –æ–±–ª–∞—Å—Ç—å –Ω–∏–∂–µ —Ç–∞–∫, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏–ª–æ—Å—å
      <b>–≥—Ä–∞–º–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ</b>.
    </p>

    <p class="step-body-text text-sm mb-4">
      –ü–æ–¥—Å–∫–∞–∑–∫–∞: —Å–Ω–∞—á–∞–ª–∞ <b>–ö–¢–û</b>, –ø–æ—Ç–æ–º <b>–ß–¢–û –î–ï–õ–ê–ï–¢</b>, –ø–æ—Ç–æ–º –≤—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ üí´
    </p>

    <!-- –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ 1 -->
    <div class="mb-6">
      <p class="sentence-number">–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ 1 –∏–∑ 5</p>
      <div id="word-bank-1" class="flex flex-wrap gap-2 bg-amber-50 border border-amber-100 rounded-2xl px-4 py-3 mb-3">
        <!-- –°–ª–æ–≤–∞ –ø–æ–¥—Å—Ç–∞–≤—è—Ç—Å—è —Å–∫—Ä–∏–ø—Ç–æ–º -->
      </div>
      <div id="drop-zone-1" class="drop-zone">
        <span class="text-gray-400 text-sm">–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Å–ª–æ–≤–∞ —Å—é–¥–∞...</span>
      </div>
      <p id="feedback-1" class="mt-2 text-sm font-medium text-gray-800"></p>
    </div>

    <!-- –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ 2 -->
    <div class="mb-6 hidden" id="sentence-2-block">
      <p class="sentence-number">–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ 2 –∏–∑ 5</p>
      <div id="word-bank-2" class="flex flex-wrap gap-2 bg-amber-50 border border-amber-100 rounded-2xl px-4 py-3 mb-3">
      </div>
      <div id="drop-zone-2" class="drop-zone">
        <span class="text-gray-400 text-sm">–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Å–ª–æ–≤–∞ —Å—é–¥–∞...</span>
      </div>
      <p id="feedback-2" class="mt-2 text-sm font-medium text-gray-800"></p>
    </div>

    <!-- –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ 3 -->
    <div class="mb-6 hidden" id="sentence-3-block">
      <p class="sentence-number">–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ 3 –∏–∑ 5</p>
      <div id="word-bank-3" class="flex flex-wrap gap-2 bg-amber-50 border border-amber-100 rounded-2xl px-4 py-3 mb-3">
      </div>
      <div id="drop-zone-3" class="drop-zone">
        <span class="text-gray-400 text-sm">–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Å–ª–æ–≤–∞ —Å—é–¥–∞...</span>
      </div>
      <p id="feedback-3" class="mt-2 text-sm font-medium text-gray-800"></p>
    </div>

    <!-- –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ 4 -->
    <div class="mb-6 hidden" id="sentence-4-block">
      <p class="sentence-number">–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ 4 –∏–∑ 5</p>
      <div id="word-bank-4" class="flex flex-wrap gap-2 bg-amber-50 border border-amber-100 rounded-2xl px-4 py-3 mb-3">
      </div>
      <div id="drop-zone-4" class="drop-zone">
        <span class="text-gray-400 text-sm">–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Å–ª–æ–≤–∞ —Å—é–¥–∞...</span>
      </div>
      <p id="feedback-4" class="mt-2 text-sm font-medium text-gray-800"></p>
    </div>

    <!-- –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ 5 -->
    <div class="mb-6 hidden" id="sentence-5-block">
      <p class="sentence-number">–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ 5 –∏–∑ 5</p>
      <div id="word-bank-5" class="flex flex-wrap gap-2 bg-amber-50 border border-amber-100 rounded-2xl px-4 py-3 mb-3">
      </div>
      <div id="drop-zone-5" class="drop-zone">
        <span class="text-gray-400 text-sm">–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Å–ª–æ–≤–∞ —Å—é–¥–∞...</span>
      </div>
      <p id="feedback-5" class="mt-2 text-sm font-medium text-gray-800"></p>
    </div>

    <button id="next-btn-step3" class="btn-main mt-6 next-step-btn opacity-50" data-next="4" disabled>
      –î–∞–ª—å—à–µ ‚Üí
    </button>
  </section>

  <!-- ================ –®–ê–ì 4. –ì–õ–ê–ì–û–õ TO BE ================ -->
  <section id="step-4" class="step-panel">
    <div class="step-panel-header">
      <span class="step-pill">–®–∞–≥ 4 ¬∑ –ì–ª–∞–≥–æ–ª to be</span>
      <button class="step-icon" type="button" data-open-qa>‚ùì</button>
    </div>

    <h2 class="text-xl md:text-2xl font-bold mb-3">
      –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –≥–ª–∞–≥–æ–ª <i>to be</i> ‚Äî —Å–∞–º—ã–π –º–µ–Ω—è—é—â–∏–π—Å—è –≥–ª–∞–≥–æ–ª –≤ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º
    </h2>

    <p class="step-body-text mb-3">
      <i>To be</i> ‚Äî —ç—Ç–æ –≥–ª–∞–≥–æ–ª ¬´–±—ã—Ç—å / –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è¬ª.  
      –û–Ω –º–µ–Ω—è–µ—Ç—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ª–∏—Ü–∞ –∏ –≤—Ä–µ–º–µ–Ω–∏.
    </p>

    <p class="step-body-text text-sm mb-4">
      –ï—Å–ª–∏ –≤ —Ä—É—Å—Å–∫–æ–º –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–∏ –Ω–µ—Ç –≥–ª–∞–≥–æ–ª–∞,  
      –≤ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º –≤—Å—ë —Ä–∞–≤–Ω–æ –¥–æ–ª–∂–µ–Ω —Å—Ç–æ—è—Ç—å <b>to be</b>.
    </p>

    <div class="soft-block soft-block--blue mb-4">
      <p class="font-semibold mb-2">–ù–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è (Present):</p>
      <ul class="list-disc ml-5 text-sm">
        <li><b>I ‚Üí am</b></li>
        <li><b>He / She / It ‚Üí is</b></li>
        <li><b>You / We / They ‚Üí are</b></li>
      </ul>
    </div>

    <div class="soft-block soft-block--rose mb-4">
      <p class="font-semibold mb-2">–ü—Ä–æ—à–µ–¥—à–µ–µ –≤—Ä–µ–º—è (Past):</p>
      <ul class="list-disc ml-5 text-sm">
        <li><b>I / He / She / It ‚Üí was</b></li>
        <li><b>You / We / They ‚Üí were</b></li>
      </ul>
    </div>

    <div class="soft-block soft-block--green mb-4">
      <p class="font-semibold mb-2">–ë—É–¥—É—â–µ–µ (Future):</p>
      <ul class="list-disc ml-5 text-sm">
        <li><b>–≤—Å–µ –ª–∏—Ü–∞ ‚Üí will be</b></li>
      </ul>
    </div>

    <p class="step-body-text text-sm">
      –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ: <b>–∫–æ–º–±–∏–Ω–∞—Ü–∏–∏</b> –≤—Ä–æ–¥–µ <i>will am</i>,‚Äã‚Äã‚Äã‚Äã‚Äã‚Äã‚Äã‚Äã‚Äã‚Äã‚Äã‚Äã‚Äã‚Äã‚Äã‚Äã
      <i>will to be</i>, <i>will is</i> ‚Äî –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ.  
      –ü—Ä–∞–≤–∏–ª—å–Ω–æ —Ç–æ–ª—å–∫–æ <b>will be</b>.
    </p>

    <button class="btn-main mt-6 next-step-btn" data-next="5">
      –ü–µ—Ä–µ–π—Ç–∏ –∫ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—é ‚Üí
    </button>
  </section>

  <!-- ================ –®–ê–ì 5. –£–ü–†–ê–ñ–ù–ï–ù–ò–ï TO BE ================ -->
  <section id="step-5" class="step-panel">
    <div class="step-panel-header">
      <span class="step-pill">–®–∞–≥ 5 ¬∑ –ü—Ä–∞–∫—Ç–∏–∫–∞</span>
      <button class="step-icon" type="button" data-open-qa>‚ùì</button>
    </div>

    <h2 class="text-xl md:text-2xl font-bold mb-3">
      –í—Å—Ç–∞–≤—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ñ–æ—Ä–º—ã <i>to be</i>
    </h2>

    <p class="step-body-text mb-3">
      –û–±—Ä–∞—â–∞–π—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —Å–ª–æ–≤–∞, —É–∫–∞–∑—ã–≤–∞—é—â–∏–µ –≤—Ä–µ–º—è:  
      <span class="font-mono">yesterday</span> (past),  
      <span class="font-mono">every day</span> (present),  
      <span class="font-mono">next week</span> (future).
    </p>

    <textarea id="tobe-textarea" class="input-main">Hello! My name ________ Alan. I ________ thirteen.
My friend's name ________ David. He ________ thirteen, too.
We ________ from Belarus.

Last summer we ________ at the seaside.
The weather ________ sunny.
There ________ many people on the beach.

I hope next summer it ________ sunny and warm, too.
Some day in future I ________ lucky to visit London.
My holidays ________ great.</textarea>

    <p id="step5-feedback" class="mt-3 text-sm font-medium text-gray-800"></p>

    <button id="step5-next-btn" class="btn-main mt-6 next-step-btn" data-next="6">
      –ó–∞–≤–µ—Ä—à–∏—Ç—å —É—Ä–æ–∫ ‚Üí
    </button>
  </section>

  <!-- ================ –®–ê–ì 6. –§–ò–ù–ê–õ ================ -->
  <section id="step-6" class="step-panel">
    <div class="step-panel-header">
      <span class="step-pill">–®–∞–≥ 6 ¬∑ –§–ò–ù–ê–õ</span>
      <button class="step-icon" type="button" data-open-qa>‚ùì</button>
    </div>

    <h2 class="text-xl md:text-2xl font-bold mb-3">
      –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –£—Ä–æ–∫ 3 –∑–∞–≤–µ—Ä—à—ë–Ω üéâ
    </h2>

    <p class="step-body-text mb-3">
      –í—ã –æ—Å–≤–æ–∏–ª–∏ –ø–æ—Ä—è–¥–æ–∫ —Å–ª–æ–≤ –≤ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–∏ –∏ –Ω–∞—É—á–∏–ª–∏—Å—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å 
      –≥–ª–∞–≥–æ–ª <i>to be</i> –≤ —Ä–∞–∑–Ω—ã—Ö –≤—Ä–µ–º–µ–Ω–∞—Ö. –≠—Ç–æ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º —Å—Ç—Ä–æ–∏—Ç—Å—è 
      –≤—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ!
    </p>

    <div class="flex justify-center my-4">
      <img src="/assets/gifs/english-lesson3-finish.gif" alt="Finish gif"
           class="w-64 h-auto rounded-2xl">
    </div>

    <p class="step-body-text mb-4">
      –ú–æ–∂–µ—Ç–µ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–ª–æ–≤–∞ –∏–∑ —É—Ä–æ–∫–∞ –≤ —Å–≤–æ–π —Å–ª–æ–≤–∞—Ä–∏–∫, –∞ –∑–∞—Ç–µ–º –ø–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —É—Ä–æ–∫—É.
    </p>


    <div class="mt-5 flex flex-wrap gap-3">
      <button class="btn-main" id="open-vocab-btn">
        –î–æ–±–∞–≤–∏—Ç—å —Å–ª–æ–≤–∞ –≤ —Å–ª–æ–≤–∞—Ä–∏–∫ ‚Üí
      </button>

      <a href="/courses/english-intro/lesson-04.html" class="btn-ghost">
        –ü–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —É—Ä–æ–∫—É
      </a>
    </div>
  </section>

  <!-- –ú–û–î–ê–õ–ö–ê Q&A -->
  <div id="qa-modal"
       class="fixed inset-0 bg-black/40 backdrop-blur-sm hidden items-center justify-center z-50 p-4">

    <div class="bg-white max-w-lg w-full rounded-2xl shadow-xl relative overflow-hidden">
      <div class="absolute -top-8 -left-8 w-36 h-36 rounded-full bg-[#FFE8B3] blur-xl opacity-60"></div>
      <div class="absolute -bottom-10 -right-10 w-40 h-40 rounded-full bg-[#FFD6C4] blur-xl opacity-60"></div>

      <div class="relative p-6 space-y-4">
        <div class="flex justify-between items-start gap-4">
          <div>
            <h2 class="text-lg font-semibold text-gray-800">
              –í–æ–ø—Ä–æ—Å—ã –ø–æ —É—Ä–æ–∫—É
            </h2>
            <p class="text-sm text-gray-600 mt-1">
              –ù–∞–ø–∏—à–∏—Ç–µ —Å–≤–æ–π –≤–æ–ø—Ä–æ—Å ‚Äî –º—ã –æ—Ç–≤–µ—Ç–∏–º –∏ –æ—Ç–≤–µ—Ç —É–≤–∏–¥—è—Ç –¥—Ä—É–≥–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏.
            </p>
          </div>

          <button id="qa-close"
                  class="text-gray-500 text-xl leading-none">&times;</button>
        </div>

        <div class="bg-amber-50 border border-amber-200 rounded-xl p-3 text-xs text-amber-800">
          –•–æ—Ç–∏—Ç–µ –ø–æ–ª—É—á–∞—Ç—å –æ—Ç–≤–µ—Ç—ã –µ—â—ë –±—ã—Å—Ç—Ä–µ–µ –∏ –∑–∞–¥–∞–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã –∫—É—Ä–∞—Ç–æ—Ä—É –ª–∏—á–Ω–æ?  
          <a href="/courses/pro.html" target="_blank" class="underline text-amber-700 font-semibold">–¢–∞—Ä–∏—Ñ PRO</a> –¥–∞—ë—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—É—é –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å –∏ –±–æ–ª—å—à–µ –≤–Ω–∏–º–∞–Ω–∏—è –∫ –≤–∞—à–∏–º –≤–æ–ø—Ä–æ—Å–∞–º üíõ
        </div>

        <div class="max-h-64 overflow-y-auto border border-gray-100 rounded-xl p-3 bg-gray-50/70"
             id="qa-list">
          <p class="text-xs text-gray-500">
            –ü–æ–∫–∞ –≤–æ–ø—Ä–æ—Å–æ–≤ –Ω–µ—Ç ‚Äî –≤—ã –º–æ–∂–µ—Ç–µ –±—ã—Ç—å –ø–µ—Ä–≤—ã–º, –∫—Ç–æ –∑–∞–¥–∞—Å—Ç –≤–æ–ø—Ä–æ—Å üôÇ
          </p>
        </div>

        <form id="qa-form" class="space-y-2">
          <label class="block text-xs text-gray-600">
            –í–∞—à –≤–æ–ø—Ä–æ—Å:
          </label>
          <textarea id="qa-text"
                    class="w-full border border-gray-200 rounded-xl px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-amber-300"
                    rows="3"
                    placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: ¬´–ö–∞–∫ –ø–æ–Ω—è—Ç—å, –∫–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å was, –∞ –∫–æ–≥–¥–∞ were?¬ª"></textarea>

          <p class="text-[0.7rem] text-gray-400">
            –ß—Ç–æ–±—ã –∑–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å, –Ω—É–∂–Ω–æ –≤–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç.  
            –ï—Å–ª–∏ –≤—ã –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ã, –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
            <a href="/student/" class="underline">–≤—Ö–æ–¥–∞ / —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</a>.
          </p>

          <div class="flex justify-end">
            <button type="submit"
                    id="qa-submit"
                    class="btn-main text-sm px-4 py-1.5">
              –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤–æ–ø—Ä–æ—Å ‚Üí
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –î–õ–Ø –°–õ–û–í–ê–†–Ø -->
  <div id="vocab-modal"
       class="fixed inset-0 bg-black/40 backdrop-blur-sm hidden items-center justify-center z-50 p-4">
    <div class="bg-white max-w-lg w-full rounded-2xl shadow-xl relative overflow-hidden">
      <div class="absolute -top-8 -left-8 w-36 h-36 rounded-full bg-[#FFE8B3] blur-xl opacity-70"></div>
      <div class="absolute -bottom-10 -right-10 w-40 h-40 rounded-full bg-[#FFD6C4] blur-xl opacity-70"></div>

      <div class="relative p-6">
        <div class="flex justify-between items-start">
          <h2 class="text-lg font-semibold text-gray-800">
            –î–æ–±–∞–≤–∏—Ç—å —Å–ª–æ–≤–∞ –≤ —Å–ª–æ–≤–∞—Ä–∏–∫
          </h2>
          <button id="vocab-close" class="text-gray-500 text-xl leading-none">&times;</button>
        </div>

        <p class="text-sm text-gray-600 mt-1">
          –í—ã–±–µ—Ä–∏—Ç–µ, –∫–∞–∫–∏–µ —Å–ª–æ–≤–∞ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å. –û–Ω–∏ –ø–æ—è–≤—è—Ç—Å—è –≤ –≤–∞—à–µ–º —Å–ª–æ–≤–∞—Ä–∏–∫–µ –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ.
        </p>

        <div id="vocab-auth-warning"
             class="hidden mt-4 bg-red-50 text-red-700 border border-red-200 rounded-xl p-3 text-sm">
          –ß—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Å–ª–æ–≤–∞, –Ω—É–∂–Ω–æ –≤–æ–π—Ç–∏.
          <br>
          <a href="/student/" class="underline font-medium">–ü–µ—Ä–µ–π—Ç–∏ –∫ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ ‚Üí</a>
        </div>

        <div id="vocab-list" class="mt-5 space-y-5 max-h-[330px] overflow-y-auto pr-1">
          <div class="vocab-category">
            <h3 class="text-[0.8rem] font-semibold text-gray-700 mb-2 flex items-center gap-1">
              üìò –°–ª–æ–≤–∞ –∏–∑ —É—Ä–æ–∫–∞ 3
            </h3>

            <div id="vocab-words" class="grid grid-cols-1 gap-2 pl-1">
              <!-- JS –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—Å—Ç–∞–≤–∏—Ç —á–µ–∫–±–æ–∫—Å—ã -->
            </div>
          </div>
        </div>

        <div class="mt-6 flex justify-between items-center">
          <button id="vocab-select-all"
                  class="px-4 py-2 rounded-xl bg-gray-100 text-sm text-gray-700 border border-gray-300">
            –í—ã–±—Ä–∞—Ç—å –≤—Å—ë
          </button>

          <button id="vocab-save" class="btn-main text-sm px-5 py-2">
            –°–æ—Ö—Ä–∞–Ω–∏—Ç—å ‚Üí
          </button>
        </div>
      </div>
    </div>
  </div>

</main>

<!-- ============================= -->
<!-- –ö–û–ù–§–ò–ì –£–†–û–ö–ê (–í–ê–ñ–ù–û!) -->
<!-- ============================= -->
<script type="module">
  window.lessonConfig = {
    lessonId:        "english-intro-lesson-3",
    lessonSlug:      "lesson-03-word-order",
    courseId:        "english-intro",
    lessonQaDocId:   "english-intro-lesson-3",
    submissionsRoot: "lessonSubmissions",
    totalSteps:      6,
    audioNextStep:   null,
    vocabCategory:   "vocabulary-lesson3"
  };
</script>

<script>
// ===============================
// üî∏ –®–ê–ì 3 ‚Äî DRAG & DROP –¢–†–ï–ù–ê–ñ–Å–† (5 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π)
// ===============================

const sentences = [
  { words: ["I", "come", "home", "very", "late"], correct: "I come home very late" },
  { words: ["She", "reads", "books", "every", "day"], correct: "She reads books every day" },
  { words: ["We", "watch", "movies", "on", "weekends"], correct: "We watch movies on weekends" },
  { words: ["They", "play", "football", "in", "the", "park"], correct: "They play football in the park" },
  { words: ["He", "drinks", "coffee", "every", "morning"], correct: "He drinks coffee every morning" }
];

let currentSentenceIndex = 0;
let currentSentence = [];

function initSentence(index) {
  const wordBank = document.getElementById(`word-bank-${index + 1}`);
  const dropZone = document.getElementById(`drop-zone-${index + 1}`);
  const feedback = document.getElementById(`feedback-${index + 1}`);

  if (!wordBank || !dropZone) return;

  // –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–µ–º —Å–ª–æ–≤–∞
  const shuffled = [...sentences[index].words].sort(() => Math.random() - 0.5);

  wordBank.innerHTML = '';
  shuffled.forEach(word => {
    const el = document.createElement("div");
    el.className = "drag-item";
    el.textContent = word;
    el.draggable = true;

    el.addEventListener("dragstart", e => {
      e.dataTransfer.setData("text/plain", word);
      e.dataTransfer.setData("source", `word-bank-${index + 1}`);
    });

    wordBank.appendChild(el);
  });

  // –û—á–∏—â–∞–µ–º drop zone
  dropZone.innerHTML = '<span class="text-gray-400 text-sm">–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Å–ª–æ–≤–∞ —Å—é–¥–∞...</span>';
  currentSentence = [];

  dropZone.addEventListener("dragover", e => e.preventDefault());

  dropZone.addEventListener("drop", e => {
    e.preventDefault();
    const word = e.dataTransfer.getData("text/plain");
    const source = e.dataTransfer.getData("source");

    if (source === `word-bank-${index + 1}`) {
      currentSentence.push(word);

      // –£–¥–∞–ª—è–µ–º —Å–ª–æ–≤–æ –∏–∑ –±–∞–Ω–∫–∞
      const items = wordBank.querySelectorAll('.drag-item');
      items.forEach(item => {
        if (item.textContent === word) {
          item.remove();
        }
      });

      updateDropZone(dropZone, feedback, index);
    }
  });
}

function updateDropZone(dropZone, feedback, index) {
  dropZone.innerHTML = "";
  currentSentence.forEach(w => {
    const el = document.createElement("span");
    el.className = "word-chip";
    el.textContent = w;
    dropZone.appendChild(el);
  });

  const userSentence = currentSentence.join(" ");
  const correctSentence = sentences[index].correct;

  if (userSentence === correctSentence) {
    feedback.textContent = "–û—Ç–ª–∏—á–Ω–æ! –í—Å—ë –≤–µ—Ä–Ω–æ üëè";
    feedback.style.color = "#16a34a";

    setTimeout(() => {
      currentSentenceIndex++;
      if (currentSentenceIndex < sentences.length) {
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–ª–µ–¥—É—é—â–µ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ
        document.getElementById(`sentence-${currentSentenceIndex + 1}-block`).classList.remove('hidden');
        currentSentence = [];
        initSentence(currentSentenceIndex);
      } else {
        // –í—Å–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã
        const nextBtn = document.getElementById("next-btn-step3");
        nextBtn.disabled = false;
        nextBtn.classList.remove("opacity-50");
      }
    }, 1000);
  } else if (currentSentence.length === sentences[index].words.length) {
    feedback.textContent = "–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â—ë —Ä–∞–∑. –ü–æ–º–Ω–∏—Ç–µ: –ö–¢–û ‚Üí –ß–¢–û –î–ï–õ–ê–ï–¢ ‚Üí –¥–µ—Ç–∞–ª–∏";
    feedback.style.color = "#dc2626";
  } else {
    feedback.textContent = "";
  }
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –ø–µ—Ä–≤–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ
initSentence(0);

// ===============================
// üî∏ –®–ê–ì 5 ‚Äî –ü–û–î–î–ï–†–ñ–ö–ê –£–ü–†–ê–ñ–ù–ï–ù–ò–Ø TO BE
// ===============================

const step5Area = document.getElementById("tobe-textarea");
const step5Next = document.getElementById("step5-next-btn");
const step5Feedback = document.getElementById("step5-feedback");

step5Area.addEventListener("input", () => {
  const value = step5Area.value.toLowerCase();

  const requiredForms = [
    "is", "am", "is", "is", "are",
    "were", "was", "were",
    "will be", "will be", "will be"
  ];

  let count = 0;
  requiredForms.forEach(form => {
    if (value.includes(form)) count++;
  });

  if (count >= 8) {
    step5Feedback.textContent = "–û—Ç–ª–∏—á–Ω–æ! –ú–æ–∂–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –¥–∞–ª—å—à–µ üéâ";
    step5Feedback.style.color = "#16a34a";
    step5Next.disabled = false;
    step5Next.classList.remove("opacity-50");
  } else {
    step5Feedback.textContent = "";
    step5Next.disabled = false;
  }
});

// ===============================
// üî∏ –§–ò–ù–ê–õ ‚Äî –°–õ–û–í–ê–†–ò–ö
// ===============================

const vocabBtn = document.getElementById("open-vocab-btn");
const vocabModal = document.getElementById("vocab-modal");
const vocabClose = document.getElementById("vocab-close");
const vocabList = document.getElementById("vocab-words");
const vocabWarning = document.getElementById("vocab-auth-warning");
const vocabSave = document.getElementById("vocab-save");
const vocabSelectAll = document.getElementById("vocab-select-all");

const lesson3Words = [
  { word: "name", translation: "–∏–º—è" },
  { word: "friend", translation: "–¥—Ä—É–≥" },
  { word: "summer", translation: "–ª–µ—Ç–æ" },
  { word: "weather", translation: "–ø–æ–≥–æ–¥–∞" },
  { word: "sunny", translation: "—Å–æ–ª–Ω–µ—á–Ω—ã–π" },
  { word: "people", translation: "–ª—é–¥–∏" },
  { word: "beach", translation: "–ø–ª—è–∂" },
  { word: "future", translation: "–±—É–¥—É—â–µ–µ" },
  { word: "lucky", translation: "—Å—á–∞—Å—Ç–ª–∏–≤—ã–π" },
  { word: "holidays", translation: "–∫–∞–Ω–∏–∫—É–ª—ã" }
];

function openVocabModal() {
  vocabModal.classList.remove("hidden");
  vocabModal.classList.add("flex");

  vocabList.innerHTML = "";
  lesson3Words.forEach(({ word, translation }) => {
    const row = document.createElement("label");
    row.className = "flex items-center gap-2 text-sm";

    row.innerHTML = `
      <input type="checkbox" value="${word}" class="vocab-checkbox w-4 h-4" data-ru="${translation}">
      <span>${word}</span>
      <span class="text-gray-400 text-xs">‚Äî ${translation}</span>
    `;

    vocabList.appendChild(row);
  });

  if (!window.firebaseUserEmail) {
    vocabWarning.classList.remove("hidden");
    vocabSave.disabled = true;
  } else {
    vocabWarning.classList.add("hidden");
    vocabSave.disabled = false;
  }
}

vocabBtn?.addEventListener("click", openVocabModal);
vocabClose?.addEventListener("click", () => {
  vocabModal.classList.add("hidden");
  vocabModal.classList.remove("flex");
});

vocabSelectAll?.addEventListener("click", () => {
  const boxes = document.querySelectorAll(".vocab-checkbox");
  const anyUnchecked = Array.from(boxes).some(b => !b.checked);
  boxes.forEach(b => { b.checked = anyUnchecked; });
});

vocabSave?.addEventListener("click", async () => {
  if (!window.firebaseUserEmail) return;

  const checked = [...document.querySelectorAll(".vocab-checkbox:checked")]
    .map(input => ({
      word: input.value,
      translation: input.dataset.ru || ""
    }));

  if (!checked.length) {
    vocabModal.classList.add("hidden");
    vocabModal.classList.remove("flex");
    return;
  }

  const db = window.firebaseDb;
  const collection = db.collection || (await import("https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js")).collection;
  const addDoc = db.addDoc || (await import("https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js")).addDoc;
  const serverTimestamp = (await import("https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js")).serverTimestamp;

  try {
    const colRef = collection(db, `users/${window.firebaseUserEmail}/vocabulary`);

    for (const { word, translation } of checked) {
      await addDoc(colRef, {
        word,
        translation: translation || "",
        lesson: "lesson-03-word-order",
        courseId: "english-intro",
        category: "vocabulary-lesson3",
        addedAt: serverTimestamp()
      });
    }

    vocabModal.classList.add("hidden");
    vocabModal.classList.remove("flex");
  } catch (e) {
    console.error("–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–ª–æ–≤:", e);
    alert("–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–ª–æ–≤–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.");
  }
});
</script>

<!-- ============================= -->
<!-- –û–ë–©–ò–ô –°–ö–†–ò–ü–¢ –ö–£–†–°–ê (–í–ê–ñ–ù–û!) -->
<!-- ============================= -->
<script type="module" src="/js/courses/english-intro.js"></script>

</body>
</html>
