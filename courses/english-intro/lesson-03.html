<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>English Intro ‚Äî –£—Ä–æ–∫ 3</title>
  <base href="/">
  <link rel="icon" type="image/jpg" href="/assets/favicon.jpg">

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- –û–±—â–∏–µ —Å—Ç–∏–ª–∏ –¥–ª—è –∫—É—Ä—Å–∞ English Intro -->
<link rel="stylesheet" href="/courses/english-intro/english-intro.css">

  <!-- Firebase init -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getAuth } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
    import { getFirestore } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBAU_uMTePpKwVNZNhqk2pss2PuSitGfQI",
      authDomain: "polytalky-70999.firebaseapp.com",
      projectId: "polytalky-70999",
      storageBucket: "polytalky-70999.firebasestorage.app",
      messagingSenderId: "62407152289",
      appId: "1:62407152289:web:b0c0efdb2472f12b10d6e0"
    };

    window.firebaseApp  = initializeApp(firebaseConfig);
    window.firebaseAuth = getAuth(window.firebaseApp);
    window.firebaseDb   = getFirestore(window.firebaseApp);
  </script>

  <style>
   
    /* –¢—Ä–µ–Ω–∞–∂—ë—Ä drag&drop */
    .drag-item {
      display: inline-block;
      background: #fff;
      border: 1px solid #d1d5db;
      padding: 8px 14px;
      border-radius: 10px;
      cursor: grab;
      font-size: 0.9rem;
      transition: 0.15s;
      user-select: none;
    }
    .drag-item:active {
      cursor: grabbing;
      transform: scale(1.05);
    }

    .drop-zone {
      min-height: 80px;
      border: 2px dashed #fbbf24;
      border-radius: 14px;
      padding: 12px;
      background: #fffef5;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
    }

    .drop-zone .word-chip {
      display: inline-block;
      background: #fff;
      border: 1px solid #d1d5db;
      padding: 6px 12px;
      border-radius: 8px;
      font-size: 0.85rem;
    }
  
.sentence-block.completed {
  opacity: 0.5;
  pointer-events: none;
}
    .sentence-number {
      font-size: 0.9rem;
      font-weight: 600;
      color: #78350f;
      margin-bottom: 0.5rem;
    }
.tobe-input {
  width: 90px;
  padding: 3px 6px;
  border: 1px solid #ddd;
  border-radius: 6px;
  margin: 0 3px;
}

.tobe-input.correct {
  border-color: #22c55e;
  background: #e9fce9;
}

.tobe-input.wrong {
  border-color: #dc2626;
  background: #fde2e2;
}
    .hidden{display:none;}

  </style>
</head>

<body>
 
<!-- –§–æ–Ω–æ–≤—ã–µ –±—É–∫–≤—ã -->
<div class="bg-letter a">B</div>
<div class="bg-letter e">C</div>
<div class="bg-letter i">D</div>
<div class="bg-letter o">F</div>
<div class="bg-letter u">G</div>

<!-- –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å -->
<header class="top-bar sticky top-0 z-40">
  <div class="max-w-7xl mx-auto px-4 py-3 flex justify-between items-center">
    <a href="/" class="flex items-center gap-2 font-semibold text-[0.9rem] text-[#374151]">
      <img src="/assets/logo.png" alt="PolyTalky" class="w-7 h-7">
      PolyTalky
    </a>

    <div class="flex items-center gap-3 text-[0.78rem] text-gray-600">
      <div id="user-status"></div>

      <a href="/student/feedback.html"
         id="feedback-link"
         class="hidden relative flex items-center justify-center w-9 h-9 rounded-full border border-gray-300 bg-white">
        üì©
        <span id="feedback-dot"
              class="hidden absolute -top-1 -right-1 w-3 h-3 rounded-full bg-red-500 ring-2 ring-white"></span>
      </a>

      <a href="/student/"
         target="_blank"
         id="login-btn"
         class="hidden border border-gray-300 rounded-full px-3 py-1.5 text-[0.75rem] text-gray-600 bg-white">
        –í–æ–π—Ç–∏
      </a>

      <a href="/courses/english-intro/" class="back-to-course-btn">–ù–∞–∑–∞–¥ –∫ –∫—É—Ä—Å—É</a>
    </div>
  </div>
  
</header>

<main class="lesson-shell">
<!-- HERO -->
    <section class="hero-card mb-8">

      <div class="hero-left">
        <div class="hero-badge">English ¬∑ Lesson 3</div>
        <h1 class="hero-title mt-3">
          –ü–æ—Ä—è–¥–æ–∫ —Å–ª–æ–≤ –≤ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–∏
          –∏ –≥–ª–∞–≥–æ–ª <span class="em">to be</span>
        </h1>

        <p class="hero-tagline mt-3">
         –ö–∞–∫ –≤—ã—Å—Ç—Ä–æ–∏—Ç—å –∞–Ω–≥–ª–∏–π—Å–∫–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ, —á—Ç–æ–±—ã –≤–∞—Å –ø–æ–Ω—è–ª–∏ —Å –ø–µ—Ä–≤–æ–≥–æ —Ä–∞–∑–∞.
        </p>
      </div>

      <div class="hero-right">
        <div class="hero-right-inner">
          <div class="hero-bg-circle"></div>

          <div class="hero-bubbles-cluster">
            <div class="hero-bubble hero-bubble--hello">
              subject
            </div>
            <div class= "hero-bubble hero-bubble--morning">
              verb
            </div>
            <div class="hero-bubble hero-bubble--hi">
             object
            </div>
          </div>
        </div>
      </div>

    </section>
  <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è —à–∞–≥–æ–≤ -->
  <div class="step-nav">
    <button class="step-dot step-dot--active" data-step="1">
      <div class="step-dot-circle">
        <img src="/assets/lessons/order.png" alt="–í–≤–µ–¥–µ–Ω–∏–µ">
      </div>
      <div class="step-dot-label">–ü–æ—Ä—è–¥–æ–∫ —Å–ª–æ–≤</div>
    </button>

    <button class="step-dot" data-step="2">
      <div class="step-dot-circle">
        <img src="/assets/lessons/video.png" alt="–í–∏–¥–µ–æ">
      </div>
      <div class="step-dot-label">–í–∏–¥–µ–æ</div>
    </button>

    <button class="step-dot" data-step="3">
      <div class="step-dot-circle">
        <img src="/assets/lessons/practise.png" alt="–¢—Ä–µ–Ω–∞–∂—ë—Ä">
      </div>
      <div class="step-dot-label">–¢—Ä–µ–Ω–∞–∂—ë—Ä</div>
    </button>

    <button class="step-dot" data-step="4">
      <div class="step-dot-circle">
        <img src="/assets/lessons/grammar.png" alt="–ì—Ä–∞–º–º–∞—Ç–∏–∫–∞">
      </div>
      <div class="step-dot-label">To be</div>
    </button>

    <button class="step-dot" data-step="5">
      <div class="step-dot-circle">
        <img src="/assets/lessons/task.png" alt="–£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ">
      </div>
      <div class="step-dot-label">–ü—Ä–∞–∫—Ç–∏–∫–∞</div>
    </button>

    <button class="step-dot" data-step="6">
      <div class="step-dot-circle">
        <img src="/assets/lessons/finish.png" alt="–§–∏–Ω–∞–ª">
      </div>
      <div class="step-dot-label">–§–∏–Ω–∏—à</div>
    </button>
  </div>

  <!-- ================ –®–ê–ì 1. –í–í–û–î–ù–ê–Ø ================ -->
  <section id="step-1" class="step-panel step-panel--visible">
    <div class="step-panel-header">
      <span class="step-pill">–®–∞–≥ 1 ¬∑ –ü–æ—Ä—è–¥–æ–∫ —Å–ª–æ–≤</span>
      <button class="step-icon" type="button" data-open-qa>‚ùì</button>
    </div>

 <!-- üìå –ö–ê–†–¢–ò–ù–ö–ê –í –®–ê–ì–ï 1 -->
  <div class="mt-6 flex justify-center">
    <img 
      src="../assets/english/picture.jpg" 
      alt="english"
      class="rounded-2xl shadow-md max-w-sm"
    />
  </div>
    <p class="step-body-text mb-3">
    
      –°–µ–≥–æ–¥–Ω—è –º—ã —Ä–∞–∑–±–µ—Ä–µ–º –¥–≤–µ –∫–ª—é—á–µ–≤—ã–µ –≤–µ—â–∏:
      <b>–ø–æ—Ä—è–¥–æ–∫ —Å–ª–æ–≤ –≤ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–∏</b> –∏ <b>–≥–ª–∞–≥–æ–ª <i>to be</i></b>.
    </p>

    <p class="step-body-text mb-3">
      –í —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ –º–æ–∂–Ω–æ –ø–æ—Å—Ç—Ä–æ–∏—Ç—å —Ñ—Ä–∞–∑—É –∫–∞–∫ —É–≥–æ–¥–Ω–æ
      <span class="italic">(–∫–∞–∫ —É–≥–æ–¥–Ω–æ –ø–æ—Å—Ç—Ä–æ–∏—Ç—å —Ñ—Ä–∞–∑—É –º–æ–∂–Ω–æ/–ø–æ—Å—Ç—Ä–æ–∏—Ç—å —Ñ—Ä–∞–∑—É –∫–∞–∫ —É–≥–æ–¥–Ω–æ –º–æ–∂–Ω–æ...)</span>.  
      –í –∞–Ω–≥–ª–∏–π—Å–∫–æ–º —Ç–∞–∫–æ–µ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç üòÖ ‚Äî —Ç–∞–º –≤—Å—ë –ø–æ–¥—á–∏–Ω—è–µ—Ç—Å—è 
      —á—ë—Ç–∫–∏–º –ø—Ä–∞–≤–∏–ª–∞–º. –ù–æ —Ö–æ—Ä–æ—à–∞—è –Ω–æ–≤–æ—Å—Ç—å –≤ —Ç–æ–º, —á—Ç–æ,
      –ø–æ–Ω—è–≤ —Å—Ö–µ–º—É, –≤—ã —Å–º–æ–∂–µ—Ç–µ —Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è —É–≤–µ—Ä–µ–Ω–Ω–æ –∏ —Å–ø–æ–∫–æ–π–Ω–æ.
    </p>

    <div class="soft-block soft-block--blue mt-4">
      <p class="font-semibold mb-2">
        –ë–∞–∑–æ–≤–∞—è —Å—Ö–µ–º–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è:
      </p>
      <p class="text-center text-lg font-mono mb-2">
        <b>–ö–¢–û</b> ‚Üí <b>–ß–¢–û –î–ï–õ–ê–ï–¢</b> ‚Üí <b>–ö–£–î–ê / –ö–û–ì–î–ê / –ö–ê–ö</b>
      </p>
      <p class="step-body-text text-sm">
        –ù–∞–ø—Ä–∏–º–µ—Ä: <br />
        <span class="font-mono">I come home very late. (–Ø –ø—Ä–∏—Ö–æ–∂—É –¥–æ–º–æ–π –æ—á–µ–Ω—å –ø–æ–∑–¥–Ω–æ)</span><br />
        –ú–µ–Ω—è—Ç—å –º–µ—Å—Ç–∞–º–∏ <b>–ø–æ–¥–ª–µ–∂–∞—â–µ–µ</b> –∏ <b>—Å–∫–∞–∑—É–µ–º–æ–µ</b> –≤ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º 
        –Ω–µ–ª—å–∑—è: –Ω–∏ –≤ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è—Ö, –Ω–∏ –≤ –æ—Ç—Ä–∏—Ü–∞–Ω–∏—è—Ö.
      </p>
    </div>

    <p class="step-body-text text-sm mt-4">
    –î–∞–≤–∞–π—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–∏–º –Ω–µ–±–æ–ª—å—à–æ–µ –≤–∏–¥–µ–æ, –≥–¥–µ —ç—Ç–∞ —Å—Ö–µ–º–∞ –æ–±—ä—è—Å–Ω—è–µ—Ç—Å—è
      –Ω–∞ –∂–∏–≤—ã—Ö –ø—Ä–∏–º–µ—Ä–∞—Ö. –ê –ø–æ—Ç–æ–º, –∫–æ–Ω–µ—á–Ω–æ –∂–µ, –ø–æ—Ç—Ä–µ–Ω–∏—Ä—É–µ–º—Å—è —Å–∞–º–∏ üíõ
    </p>

    <button class="btn-main mt-6 next-step-btn" data-next="2">
      –ü–µ—Ä–µ–π—Ç–∏ –∫ –≤–∏–¥–µ–æ ‚Üí
    </button>
  </section>

  <!-- ================ –®–ê–ì 2. –í–ò–î–ï–û ================ -->
  <section id="step-2" class="step-panel">
    <div class="step-panel-header">
      <span class="step-pill">–®–∞–≥ 2 ¬∑ –í–∏–¥–µ–æ</span>
      <button class="step-icon" type="button" data-open-qa>‚ùì</button>
    </div>

    <h2 class="text-xl md:text-2xl font-bold mb-3">
      –°–º–æ—Ç—Ä–∏–º, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ—Ä—è–¥–æ–∫ —Å–ª–æ–≤ –≤ –∂–∏–≤–æ–π —Ä–µ—á–∏
    </h2>

    <p class="step-body-text mb-4">
      –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –≤–∏–¥–µ–æ: –æ–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, –∫–∞–∫ –≤ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è—Ö —Å—Ç–æ—è—Ç —Å–Ω–∞—á–∞–ª–∞ <b> –ø–æ–¥–ª–µ–∂–∞—é—â–∏–µ</b>, –∑–∞—Ç–µ–º <b>—Å–∫–∞–∑—É–µ–º—ã–µ</b>, 
      –∞ —É–∂–µ –ø–æ—Ç–æ–º –¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è, —Ç–æ –µ—Å—Ç—å –¥–µ—Ç–∞–ª–∏ –≤—Ä–æ–¥–µ –≤—Ä–µ–º–µ–Ω–∏ –∏ –º–µ—Å—Ç–∞.
    </p>

    <div class="flex justify-center mt-4">
      <div class="w-full max-w-md aspect-video rounded-2xl overflow-hidden shadow-md">
        <iframe
          class="w-full h-full"
          src="https://www.youtube.com/embed/dQw4w9WgXcQ"
          title="–í–∏–¥–µ–æ –æ –ø–æ—Ä—è–¥–∫–µ —Å–ª–æ–≤ –≤ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º"
          frameborder="0"
          allowfullscreen
        ></iframe>
      </div>
    </div>

    <p class="step-body-text text-sm mt-4">
      
      –ì–ª–∞–≤–Ω–æ–µ –∑–∞–ø–æ–º–Ω–∏—Ç—å: –ø–æ—Ä—è–¥–æ–∫ —Å–ª–æ–≤ –≤ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º ‚Äî —ç—Ç–æ
      <b>–∂—ë—Å—Ç–∫–∏–π –∫–∞—Ä–∫–∞—Å</b>, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –¥–µ—Ä–∂–∏—Ç—Å—è —Å–º—ã—Å–ª –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è.
    </p>

    <button class="btn-main mt-6 next-step-btn" data-next="3">
      –ü–µ—Ä–µ–π—Ç–∏ –∫ —Ç—Ä–µ–Ω–∞–∂—ë—Ä—É ‚Üí
    </button>
  </section>

  <!-- ================ –®–ê–ì 3. –¢–†–ï–ù–ê–ñ–Å–† DRAG & DROP ================ -->
  <section id="step-3" class="step-panel">
    <div class="step-panel-header">
      <span class="step-pill">–®–∞–≥ 3 ¬∑ –¢—Ä–µ–Ω–∞–∂—ë—Ä</span>
      <button class="step-icon" type="button" data-open-qa>‚ùì</button>
    </div>

    <h2 class="text-xl md:text-2xl font-bold mb-3">
      –°–æ–±–µ—Ä–∏—Ç–µ –∞–Ω–≥–ª–∏–π—Å–∫–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ
    </h2>

    <p class="step-body-text mb-3">
           –£ –≤–∞—Å –µ—Å—Ç—å –Ω–∞–±–æ—Ä —Å–ª–æ–≤ ‚Äî –ø–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –∏—Ö –≤ –æ–±–ª–∞—Å—Ç—å –Ω–∏–∂–µ —Ç–∞–∫, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏–ª–æ—Å—å
      <b>–≥—Ä–∞–º–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ</b>.
    </p>

    <p class="step-body-text text-sm mb-4">
      –ü–æ–¥—Å–∫–∞–∑–∫–∞: —Å–Ω–∞—á–∞–ª–∞ <b>–ö–¢–û</b>, –ø–æ—Ç–æ–º <b>–ß–¢–û –î–ï–õ–ê–ï–¢</b>, –ø–æ—Ç–æ–º –≤—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ üí´
    </p>

    <!-- –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ 1 -->
    <div class="mb-6">
      <p class="sentence-number">–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ 1 –∏–∑ 5</p>
      <div id="word-bank-1" class="flex flex-wrap gap-2 bg-amber-50 border border-amber-100 rounded-2xl px-4 py-3 mb-3">
        <!-- –°–ª–æ–≤–∞ –ø–æ–¥—Å—Ç–∞–≤—è—Ç—Å—è —Å–∫—Ä–∏–ø—Ç–æ–º -->
      </div>
      <div id="drop-zone-1" class="drop-zone">
        <span class="text-gray-400 text-sm">–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Å–ª–æ–≤–∞ —Å—é–¥–∞...</span>
      </div>
      <p id="feedback-1" class="mt-2 text-sm font-medium text-gray-800"></p>
    </div>

    <!-- –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ 2 -->
    <div class="mb-6 hidden" id="sentence-2-block">
      <p class="sentence-number">–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ 2 –∏–∑ 5</p>
      <div id="word-bank-2" class="flex flex-wrap gap-2 bg-amber-50 border border-amber-100 rounded-2xl px-4 py-3 mb-3">
      </div>
      <div id="drop-zone-2" class="drop-zone">
        <span class="text-gray-400 text-sm">–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Å–ª–æ–≤–∞ —Å—é–¥–∞...</span>
      </div>
      <p id="feedback-2" class="mt-2 text-sm font-medium text-gray-800"></p>
    </div>

    <!-- –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ 3 -->
    <div class="mb-6 hidden" id="sentence-3-block">
      <p class="sentence-number">–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ 3 –∏–∑ 5</p>
      <div id="word-bank-3" class="flex flex-wrap gap-2 bg-amber-50 border border-amber-100 rounded-2xl px-4 py-3 mb-3">
      </div>
      <div id="drop-zone-3" class="drop-zone">
        <span class="text-gray-400 text-sm">–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Å–ª–æ–≤–∞ —Å—é–¥–∞...</span>
      </div>
      <p id="feedback-3" class="mt-2 text-sm font-medium text-gray-800"></p>
    </div>

    <!-- –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ 4 -->
    <div class="mb-6 hidden" id="sentence-4-block">
      <p class="sentence-number">–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ 4 –∏–∑ 5</p>
      <div id="word-bank-4" class="flex flex-wrap gap-2 bg-amber-50 border border-amber-100 rounded-2xl px-4 py-3 mb-3">
      </div>
      <div id="drop-zone-4" class="drop-zone">
        <span class="text-gray-400 text-sm">–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Å–ª–æ–≤–∞ —Å—é–¥–∞...</span>
      </div>
      <p id="feedback-4" class="mt-2 text-sm font-medium text-gray-800"></p>
    </div>

    <!-- –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ 5 -->
    <div class="mb-6 hidden" id="sentence-5-block">
      <p class="sentence-number">–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ 5 –∏–∑ 5</p>
      <div id="word-bank-5" class="flex flex-wrap gap-2 bg-amber-50 border border-amber-100 rounded-2xl px-4 py-3 mb-3">
      </div>
      <div id="drop-zone-5" class="drop-zone">
        <span class="text-gray-400 text-sm">–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Å–ª–æ–≤–∞ —Å—é–¥–∞...</span>
      </div>
      <p id="feedback-5" class="mt-2 text-sm font-medium text-gray-800"></p>
    </div>

    <button id="next-btn-step3" class="btn-main mt-6 next-step-btn opacity-50" data-next="4" disabled>
      –î–∞–ª—å—à–µ ‚Üí
    </button>
  </section>

  <!-- ================ –®–ê–ì 4. –ì–õ–ê–ì–û–õ TO BE ================ -->
  <section id="step-4" class="step-panel">
    <div class="step-panel-header">
      <span class="step-pill">–®–∞–≥ 4 ¬∑ –ì–ª–∞–≥–æ–ª to be</span>
      <button class="step-icon" type="button" data-open-qa>‚ùì</button>
    </div>

       <p class="step-body-text mb-3">
      –ü–æ—Ä—è–¥–æ–∫ —Å–ª–æ–≤ - —ç—Ç–æ –∫–æ–Ω–µ—á–Ω–æ –∑–∞–º–µ—á–∞—Ç–µ–ª—å–Ω–æ, –Ω–æ —á—Ç–æ –∂–µ –Ω–∞–º –¥–µ–ª–∞—Ç—å —Å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º–∏, —É –∫–æ—Ç–æ—Ä—ã—Ö –≤ —Ä—É—Å—Å–∫–æ–º –∞–Ω–∞–ª–æ–≥–µ –Ω–µ—Ç –Ω–∏–∫–∞–∫–æ–≥–æ –≥–ª–∞–≥–æ–ª–∞?! –£ –∞–Ω–≥–ª–∏—á–∞–Ω –≤—Å–µ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–æ! –ï—Å–ª–∏ –≤ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–∏ –Ω–µ—Ç —Å–∫–∞–∑—É–µ–º–æ–≥–æ, –º—ã –¥–æ–±–∞–≤–ª—è–µ–º –∑–∞–≤–µ—Ç–Ω—ã–π –≥–ª–∞–≥–æ–ª <b>to be.</b> ¬†–ì–ª–∞–≥–æ–ª —ç—Ç–æ –Ω–µ–ø—Ä–æ—Å—Ç–æ–π..—É–∂ –æ—á–µ–Ω—å¬†–ø–æ –Ω–∞—Ç—É—Ä–µ —Å–≤–æ–µ–π –æ–Ω –∏–∑–º–µ–Ω—á–∏–≤—ã–π. –í –æ–¥–Ω–æ–º —Å–ª—É—á–∞–µ to be –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ am, –≤ –¥—Ä—É–≥–æ–º –≤ is, –≤ —Ç—Ä–µ—Ç—å–µ–º –≤ was. –ù–æ –æ–±–æ –≤—Å–µ–º –ø–æ –ø–æ—Ä—è–¥–∫—É!
     
         <i>To be</i> ‚Äî –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—Å—è –∫–∞–∫ ¬´–±—ã—Ç—å / –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è¬ª.  
      –û–Ω –º–µ–Ω—è–µ—Ç—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ª–∏—Ü–∞ –∏ –≤—Ä–µ–º–µ–Ω–∏.
    </p>
 <div class="mt-6 flex justify-center">
    <img 
      src="../assets/english/tobe.jpg" 
      alt="to be"
      class="rounded-2xl shadow-md max-w-sm"
    />
  </div>
    <p class="step-body-text text-sm mb-4">
    –ö–æ–≥–¥–∞ –º—ã –≤—Å—Ç–∞–≤–ª—è–µ–º –µ–≥–æ –≤ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ, –≥–¥–µ –Ω–µ—Ç –Ω–∏–∫–∞–∫–æ–≥–æ –≥–ª–∞–≥–æ–ª–∞, —Ç–æ –ø—Ä–∏ –ø–µ—Ä–µ–≤–æ–¥–µ  <b>to be</b> –æ–ø—É—Å–∫–∞–µ—Ç—Å—è, –∏–ª–∏ –∂–µ –ø–æ–ª—É—á–∏—Ç—Å—è ¬†–Ø –ï–°–¢–¨ –ß–ï–õ–û–í–ï–ö.
    </p>

    <div class="soft-block soft-block--blue mb-4">
      <p class="font-semibold mb-2">–ù–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è (Present):</p>
      <ul class="list-disc ml-5 text-sm">
        <li><b>I ‚Üí am</b></li>
        <li><b>He / She / It ‚Üí is</b></li>
        <li><b>You / We / They ‚Üí are</b></li>
      </ul>
    </div>

    <div class="soft-block soft-block--orange mb-4">
      <p class="font-semibold mb-2">–ü—Ä–æ—à–µ–¥—à–µ–µ –≤—Ä–µ–º—è (Past):</p>
      <ul class="list-disc ml-5 text-sm">
        <li><b>I / He / She / It ‚Üí was</b></li>
        <li><b>You / We / They ‚Üí were</b></li>
      </ul>
    </div>

    <div class="soft-block soft-block--green mb-4">
      <p class="font-semibold mb-2">–ë—É–¥—É—â–µ–µ (Future):</p>
      <ul class="list-disc ml-5 text-sm">
        <li><b>–≤—Å–µ –ª–∏—Ü–∞ ‚Üí will be</b></li>
      </ul>
    </div>

    <p class="step-body-text text-sm">
      –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ: <b>–∫–æ–º–±–∏–Ω–∞—Ü–∏–∏</b> –≤—Ä–æ–¥–µ <i>will am</i>,‚Äã‚Äã‚Äã‚Äã‚Äã‚Äã‚Äã‚Äã‚Äã‚Äã‚Äã‚Äã‚Äã‚Äã‚Äã‚Äã
      <i>will to be</i>, <i>will is</i> ‚Äî –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ.  
      –ü—Ä–∞–≤–∏–ª—å–Ω–æ —Ç–æ–ª—å–∫–æ <b>will be</b>.
    </p>

    <button class="btn-main mt-6 next-step-btn" data-next="5">
      –ü–µ—Ä–µ–π—Ç–∏ –∫ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—é ‚Üí
    </button>
  </section>

  <!-- ================ –®–ê–ì 5. –£–ü–†–ê–ñ–ù–ï–ù–ò–ï TO BE ================ -->
  <section id="step-5" class="step-panel">
    <div class="step-panel-header">
      <span class="step-pill">–®–∞–≥ 5 ¬∑ –ü—Ä–∞–∫—Ç–∏–∫–∞</span>
      <button class="step-icon" type="button" data-open-qa>‚ùì</button>
    </div>

    <h2 class="text-xl md:text-2xl font-bold mb-3">
      –í—Å—Ç–∞–≤—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ñ–æ—Ä–º—ã <i>to be</i>
    </h2>

    <p class="step-body-text mb-3">
      –û–±—Ä–∞—â–∞–π—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —Å–ª–æ–≤–∞, —É–∫–∞–∑—ã–≤–∞—é—â–∏–µ –≤—Ä–µ–º—è:  
      <span class="font-mono">yesterday</span> (past),  
      <span class="font-mono">every day</span> (present),  
      <span class="font-mono">next week</span> (future).
    </p>

   <div class="step" data-step="5">
  <h2 class="lesson-title">–ó–∞–¥–∞–Ω–∏–µ: –≤—Å—Ç–∞–≤—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≥–ª–∞–≥–æ–ª <span class="font-bold">to be</span></h2>

  <p class="text-gray-700 mt-2">
    –í—Å—Ç–∞–≤—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Ñ–æ—Ä–º—É –≥–ª–∞–≥–æ–ª–∞ <b>to be</b> –≤ –∫–∞–∂–¥—ã–π –ø—Ä–æ–ø—É—Å–∫: <i>am, is, are, was, were, will be</i>.
  </p>

  <div class="exercise-block mt-5 bg-white border border-amber-200 p-4 rounded-xl leading-8">

    Hello! My name 
    <input class="tobe-input" data-answer="is"> Alan.
    
    I <input class="tobe-input" data-answer="am"> thirteen.
    
    My friend‚Äôs name <input class="tobe-input" data-answer="is"> David.
    
    He <input class="tobe-input" data-answer="is"> thirteen, too.
    
    We <input class="tobe-input" data-answer="are"> from Belarus.
    
    Last summer we <input class="tobe-input" data-answer="were"> at the seaside.
    
    The weather <input class="tobe-input" data-answer="was"> sunny.
    
    There <input class="tobe-input" data-answer="were"> many people on the beach.
    
    We had a good time.
    
    I hope next summer it <input class="tobe-input" data-answer="will be"> sunny and warm, too.
    
    There <input class="tobe-input" data-answer="will be"> a lot of nice days.
    
    I have never been to other countries.
    
    Some day in future I <input class="tobe-input" data-answer="will be"> lucky to visit London and my holidays 
    <input class="tobe-input" data-answer="will be"> great.
  </div>

 
    <p id="step5-feedback" class="mt-3 text-sm font-medium text-gray-800"></p>

    <button id="step5-next-btn" class="btn-main mt-6 next-step-btn" data-next="6">
      –ó–∞–≤–µ—Ä—à–∏—Ç—å —É—Ä–æ–∫ ‚Üí
    </button>
  </section>

  <!-- ================ –®–ê–ì 6. –§–ò–ù–ê–õ ================ -->
  <section id="step-6" class="step-panel">
    <div class="step-panel-header">
      <span class="step-pill">–®–∞–≥ 6 ¬∑ –§–ò–ù–ê–õ</span>
      <button class="step-icon" type="button" data-open-qa>‚ùì</button>
    </div>

    <h2 class="text-xl md:text-2xl font-bold mb-3">
      –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –£—Ä–æ–∫ 3 –∑–∞–≤–µ—Ä—à—ë–Ω üéâ
    </h2>

    <p class="step-body-text mb-3">
      –í—ã –æ—Å–≤–æ–∏–ª–∏ –ø–æ—Ä—è–¥–æ–∫ —Å–ª–æ–≤ –≤ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–∏ –∏ –Ω–∞—É—á–∏–ª–∏—Å—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å 
      –≥–ª–∞–≥–æ–ª <i>to be</i> –≤ —Ä–∞–∑–Ω—ã—Ö –≤—Ä–µ–º–µ–Ω–∞—Ö. –≠—Ç–æ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º —Å—Ç—Ä–æ–∏—Ç—Å—è 
      –≤—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ!
    </p>

    <div class="flex justify-center my-4">
      <img src="/assets/gifs/english-lesson3-finish.gif" alt="Finish gif"
           class="w-64 h-auto rounded-2xl">
    </div>

    <p class="step-body-text mb-4">
      –ú–æ–∂–µ—Ç–µ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–ª–æ–≤–∞ –∏–∑ —É—Ä–æ–∫–∞ –≤ —Å–≤–æ–π —Å–ª–æ–≤–∞—Ä–∏–∫, –∞ –∑–∞—Ç–µ–º –ø–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —É—Ä–æ–∫—É.
    </p>


    <div class="mt-5 flex flex-wrap gap-3">
      <button class="btn-main" id="open-vocab-btn">
        –î–æ–±–∞–≤–∏—Ç—å —Å–ª–æ–≤–∞ –≤ —Å–ª–æ–≤–∞—Ä–∏–∫ ‚Üí
      </button>

      <a href="/courses/english-intro/lesson-04.html" class="btn-ghost">
        –ü–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —É—Ä–æ–∫—É
      </a>
    </div>
  </section>

  <!-- –ú–û–î–ê–õ–ö–ê Q&A -->
  <div id="qa-modal"
       class="fixed inset-0 bg-black/40 backdrop-blur-sm hidden items-center justify-center z-50 p-4">

    <div class="bg-white max-w-lg w-full rounded-2xl shadow-xl relative overflow-hidden">
      <div class="absolute -top-8 -left-8 w-36 h-36 rounded-full bg-[#FFE8B3] blur-xl opacity-60"></div>
      <div class="absolute -bottom-10 -right-10 w-40 h-40 rounded-full bg-[#FFD6C4] blur-xl opacity-60"></div>

      <div class="relative p-6 space-y-4">
        <div class="flex justify-between items-start gap-4">
          <div>
            <h2 class="text-lg font-semibold text-gray-800">
              –í–æ–ø—Ä–æ—Å—ã –ø–æ —É—Ä–æ–∫—É
            </h2>
            <p class="text-sm text-gray-600 mt-1">
              –ù–∞–ø–∏—à–∏—Ç–µ —Å–≤–æ–π –≤–æ–ø—Ä–æ—Å ‚Äî –º—ã –æ—Ç–≤–µ—Ç–∏–º –∏ –æ—Ç–≤–µ—Ç —É–≤–∏–¥—è—Ç –¥—Ä—É–≥–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏.
            </p>
          </div>

          <button id="qa-close"
                  class="text-gray-500 text-xl leading-none">&times;</button>
        </div>

        <div class="bg-amber-50 border border-amber-200 rounded-xl p-3 text-xs text-amber-800">
          –•–æ—Ç–∏—Ç–µ –ø–æ–ª—É—á–∞—Ç—å –æ—Ç–≤–µ—Ç—ã –µ—â—ë –±—ã—Å—Ç—Ä–µ–µ –∏ –∑–∞–¥–∞–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã –∫—É—Ä–∞—Ç–æ—Ä—É –ª–∏—á–Ω–æ?  
          <a href="/courses/pro.html" target="_blank" class="underline text-amber-700 font-semibold">–¢–∞—Ä–∏—Ñ PRO</a> –¥–∞—ë—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—É—é –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å –∏ –±–æ–ª—å—à–µ –≤–Ω–∏–º–∞–Ω–∏—è –∫ –≤–∞—à–∏–º –≤–æ–ø—Ä–æ—Å–∞–º üíõ
        </div>

        <div class="max-h-64 overflow-y-auto border border-gray-100 rounded-xl p-3 bg-gray-50/70"
             id="qa-list">
          <p class="text-xs text-gray-500">
            –ü–æ–∫–∞ –≤–æ–ø—Ä–æ—Å–æ–≤ –Ω–µ—Ç ‚Äî –≤—ã –º–æ–∂–µ—Ç–µ –±—ã—Ç—å –ø–µ—Ä–≤—ã–º, –∫—Ç–æ –∑–∞–¥–∞—Å—Ç –≤–æ–ø—Ä–æ—Å üôÇ
          </p>
        </div>

        <form id="qa-form" class="space-y-2">
          <label class="block text-xs text-gray-600">
            –í–∞—à –≤–æ–ø—Ä–æ—Å:
          </label>
          <textarea id="qa-text"
                    class="w-full border border-gray-200 rounded-xl px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-amber-300"
                    rows="3"
                    placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: ¬´–ö–∞–∫ –ø–æ–Ω—è—Ç—å, –∫–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å was, –∞ –∫–æ–≥–¥–∞ were?¬ª"></textarea>

          <p class="text-[0.7rem] text-gray-400">
            –ß—Ç–æ–±—ã –∑–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å, –Ω—É–∂–Ω–æ –≤–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç.  
            –ï—Å–ª–∏ –≤—ã –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ã, –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
            <a href="/student/" class="underline">–≤—Ö–æ–¥–∞ / —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</a>.
          </p>

          <div class="flex justify-end">
            <button type="submit"
                    id="qa-submit"
                    class="btn-main text-sm px-4 py-1.5">
              –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤–æ–ø—Ä–æ—Å ‚Üí
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –î–õ–Ø –°–õ–û–í–ê–†–Ø -->
  <div id="vocab-modal"
       class="fixed inset-0 bg-black/40 backdrop-blur-sm hidden items-center justify-center z-50 p-4">
    <div class="bg-white max-w-lg w-full rounded-2xl shadow-xl relative overflow-hidden">
      <div class="absolute -top-8 -left-8 w-36 h-36 rounded-full bg-[#FFE8B3] blur-xl opacity-70"></div>
      <div class="absolute -bottom-10 -right-10 w-40 h-40 rounded-full bg-[#FFD6C4] blur-xl opacity-70"></div>

      <div class="relative p-6">
        <div class="flex justify-between items-start">
          <h2 class="text-lg font-semibold text-gray-800">
            –î–æ–±–∞–≤–∏—Ç—å —Å–ª–æ–≤–∞ –≤ —Å–ª–æ–≤–∞—Ä–∏–∫
          </h2>
          <button id="vocab-close" class="text-gray-500 text-xl leading-none">&times;</button>
        </div>

        <p class="text-sm text-gray-600 mt-1">
          –í—ã–±–µ—Ä–∏—Ç–µ, –∫–∞–∫–∏–µ —Å–ª–æ–≤–∞ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å. –û–Ω–∏ –ø–æ—è–≤—è—Ç—Å—è –≤ –≤–∞—à–µ–º —Å–ª–æ–≤–∞—Ä–∏–∫–µ –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ.
        </p>

        <div id="vocab-auth-warning"
             class="hidden mt-4 bg-red-50 text-red-700 border border-red-200 rounded-xl p-3 text-sm">
          –ß—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Å–ª–æ–≤–∞, –Ω—É–∂–Ω–æ –≤–æ–π—Ç–∏.
          <br>
          <a href="/student/" class="underline font-medium">–ü–µ—Ä–µ–π—Ç–∏ –∫ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ ‚Üí</a>
        </div>

        <div id="vocab-list" class="mt-5 space-y-5 max-h-[330px] overflow-y-auto pr-1">
          <div class="vocab-category">
            <h3 class="text-[0.8rem] font-semibold text-gray-700 mb-2 flex items-center gap-1">
              üìò –°–ª–æ–≤–∞ –∏–∑ —É—Ä–æ–∫–∞ 3
            </h3>

            <div id="vocab-words" class="grid grid-cols-1 gap-2 pl-1">
              <!-- JS –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—Å—Ç–∞–≤–∏—Ç —á–µ–∫–±–æ–∫—Å—ã -->
            </div>
          </div>
        </div>

        <div class="mt-6 flex justify-between items-center">
          <button id="vocab-select-all"
                  class="px-4 py-2 rounded-xl bg-gray-100 text-sm text-gray-700 border border-gray-300">
            –í—ã–±—Ä–∞—Ç—å –≤—Å—ë
          </button>

          <button id="vocab-save" class="btn-main text-sm px-5 py-2">
            –°–æ—Ö—Ä–∞–Ω–∏—Ç—å ‚Üí
          </button>
        </div>
      </div>
    </div>
  </div>

</main>

<!-- ============================= -->
<!-- –ö–û–ù–§–ò–ì –£–†–û–ö–ê (–í–ê–ñ–ù–û!) -->
<!-- ============================= -->
<script type="module">
  window.lessonConfig = {
    lessonId:        "english-intro-lesson-3",
    lessonSlug:      "lesson-03-word-order",
    courseId:        "english-intro",
    lessonQaDocId:   "english-intro-lesson-3",
    submissionsRoot: "lessonSubmissions",
    totalSteps:      6,
    audioNextStep:   null,
    vocabCategory:   "vocabulary-lesson3"
  };
</script>

<script>
// =========================================================
// üî∏ –®–ê–ì 3 ‚Äî DRAG & DROP –¢–†–ï–ù–ê–ñ–Å–† (5 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π)
// =========================================================
  
  let startX = 0;
  let startY = 0;
  let dragging = false;
  let dragClone = null;
  
// —Å–ª–æ–≤–∞ —Å –ø–µ—Ä–µ–≤–æ–¥–æ–º –¥–ª—è —Ç—É–ª—Ç–∏–ø–æ–≤
const translations = {
  "I": "—è",
  "come": "–ø—Ä–∏—Ö–æ–∂—É",
  "home": "–¥–æ–º–æ–π",
  "very": "–æ—á–µ–Ω—å",
  "late": "–ø–æ–∑–¥–Ω–æ",

  "She": "–æ–Ω–∞",
  "reads": "—á–∏—Ç–∞–µ—Ç",
  "books": "–∫–Ω–∏–≥–∏",
  "every": "–∫–∞–∂–¥—ã–π",
  "day": "–¥–µ–Ω—å",

  "We": "–º—ã",
  "watch": "—Å–º–æ—Ç—Ä–∏–º",
  "movies": "—Ñ–∏–ª—å–º—ã",
  "on": "–ø–æ, –Ω–∞",
  "weekends": "–≤—ã—Ö–æ–¥–Ω—ã–µ",

  "They": "–æ–Ω–∏",
  "play": "–∏–≥—Ä–∞—é—Ç",
  "football": "—Ñ—É—Ç–±–æ–ª",
  "in": "–≤",
  "the": "—ç—Ç–æ—Ç/—Ç–æ—Ç",
  "park": "–ø–∞—Ä–∫",

  "He": "–æ–Ω",
  "drinks": "–ø—å—ë—Ç",
  "coffee": "–∫–æ—Ñ–µ",
  "every": "–∫–∞–∂–¥—ã–π",
  "morning": "—É—Ç—Ä–æ"
};

// 5 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π
const sentences = [
  { words: ["I", "come", "home", "very", "late"],           correct: "I come home very late" },
  { words: ["She", "reads", "books", "every", "day"],       correct: "She reads books every day" },
  { words: ["We", "watch", "movies", "on", "weekends"],     correct: "We watch movies on weekends" },
  { words: ["They", "play", "football", "in", "the", "park"], correct: "They play football in the park" },
  { words: ["He", "drinks", "coffee", "every", "morning"],  correct: "He drinks coffee every morning" }
];

let currentSentenceIndex = 0;
let currentSentence = [];

 
const nextBtn3 = document.getElementById("next-btn-step3");

// –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è: –ø–æ–ª—É—á–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
function getElementsFor(index) {
  const n = index + 1;
  return {
    wordBank: document.getElementById(`word-bank-${n}`),
    dropZone: document.getElementById(`drop-zone-${n}`),
    feedback: document.getElementById(`feedback-${n}`)
  };
}



// –∑–∞–∫—Ä—ã—Ç—å –≤—Å–µ —Ç—É–ª—Ç–∏–ø—ã
function closeTooltips() {
  document.querySelectorAll(".tooltip").forEach(t => t.remove());
}

// –ø–æ–∫–∞–∑–∞—Ç—å —Ç—É–ª—Ç–∏–ø —Å –æ–∑–≤—É—á–∫–æ–π –∏ –ø–µ—Ä–µ–≤–æ–¥–æ–º
function showTooltip(btn, word) {
  closeTooltips();

  const tip = document.createElement("div");
  tip.className =
    "tooltip absolute left-1/2 -translate-x-1/2 top-full mt-1 p-2 bg-white border rounded-xl shadow text-xs z-30";

  tip.innerHTML = `
    <div class="flex gap-2 items-center">
      <button class="text-amber-600">üîä</button>
      <span>${word} ‚Äî ${translations[word] || ""}</span>
    </div>
  `;

  tip.querySelector("button").addEventListener("click", (e) => {
    e.stopPropagation();
    speakWord(word);
  });

  btn.appendChild(tip);
  document.addEventListener("click", closeTooltips, { once: true });
}

// –æ—Ç—Ä–∏—Å–æ–≤–∞—Ç—å —É–∂–µ –Ω–∞–±—Ä–∞–Ω–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –≤ –∂—ë–ª—Ç–æ–º –±–ª–æ–∫–µ
function renderSentence() {
  const { dropZone } = getElementsFor(currentSentenceIndex);
  if (!dropZone) return;

  dropZone.innerHTML = "";
  currentSentence.forEach(w => {
    const el = document.createElement("span");
    el.className =
      "inline-block bg-white px-2 py-1 rounded border text-sm mr-1 mb-1";
    el.textContent = w;
    dropZone.appendChild(el);
  });
}

// –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞ –ø–æ —Å–ª–æ–≤—É
function selectWord(word) {
  const { dropZone, feedback } = getElementsFor(currentSentenceIndex);
  if (!dropZone || !feedback) return;

  const correct = sentences[currentSentenceIndex].correct;

  currentSentence.push(word);
  renderSentence();

  const joined = currentSentence.join(" ");

  // –≤–∞—Ä–∏–∞–Ω—Ç 1: –≤—Å—ë –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ —Å–æ–±—Ä–∞–Ω–æ –≤–µ—Ä–Ω–æ
  if (joined === correct) {
    dropZone.classList.remove("border-red-400");
    dropZone.classList.add("border-green-400");
    feedback.textContent = "–û—Ç–ª–∏—á–Ω–æ! –í—Å—ë –≤–µ—Ä–Ω–æ üëè";

   setTimeout(() => {
  currentSentenceIndex++;

  if (currentSentenceIndex >= sentences.length) {
    nextBtn3.disabled = false;
    nextBtn3.classList.remove("opacity-50");
    feedback.textContent = "–®–∞–≥ –∑–∞–≤–µ—Ä—à—ë–Ω, –º–æ–∂–Ω–æ –∏–¥—Ç–∏ –¥–∞–ª—å—à–µ üéâ";
    return;
  }

  // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ –±–ª–æ–∫–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π
  for (let i = 1; i <= 5; i++) {
    document.getElementById(`sentence-${i}-block`)?.classList.add("hidden");
  }

  // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–π –±–ª–æ–∫
  document
    .getElementById(`sentence-${currentSentenceIndex + 1}-block`)
    ?.classList.remove("hidden");

  dropZone.classList.remove("border-green-400");

  requestAnimationFrame(() => {
    initSentence(); // –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–ª–µ–¥—É—é—â–µ–≥–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
  });
}, 900);
    return;
  }

  // –≤–∞—Ä–∏–∞–Ω—Ç 2: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ —É—à—ë–ª –æ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –Ω–∞—á–∞–ª–∞
  if (!correct.startsWith(joined)) {
    dropZone.classList.add("border-red-400");
    feedback.textContent = "–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â—ë —Ä–∞–∑ üôÇ";

    setTimeout(() => {
      currentSentence = [];
      dropZone.classList.remove("border-red-400");
      feedback.textContent = "";
      renderSentence();
    }, 900);
  }
}

// –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ –∏–Ω–¥–µ–∫—Å—É
function initSentence() {
  const { wordBank, dropZone, feedback } = getElementsFor(currentSentenceIndex);
  if (!wordBank || !dropZone || !feedback) return;

  // –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ —Ç–µ–∫—É—â–∏–π –±–ª–æ–∫ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
  for (let i = 1; i <= 5; i++) {
    const block = document.getElementById(`sentence-${i}-block`);
    if (block) {
      block.classList.toggle("hidden", i !== currentSentenceIndex + 1);
    }
  }

  currentSentence = [];
  feedback.textContent = "";
  dropZone.innerHTML =
    '<span class="text-gray-400 text-sm">–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Å–ª–æ–≤–∞ —Å—é–¥–∞...</span>';

  wordBank.innerHTML = "";
  const data = sentences[currentSentenceIndex];
  const shuffled = [...data.words].sort(() => Math.random() - 0.5);

  shuffled.forEach(word => {
    const btn = document.createElement("button");
    btn.type = "button";
    btn.className =
      "drag-item relative bg-amber-50 border border-amber-200 px-3 py-2 rounded-xl text-gray-800 cursor-pointer";
    btn.textContent = word;

    btn.addEventListener("click", (e) => {
      e.stopPropagation();
      showTooltip(btn, word);
      selectWord(word);

      // ======== –º–æ–±–∏–ª—å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: —Ç–∞–ø = —Ç—É–ª—Ç–∏–ø, —É–¥–µ—Ä–∂–∞–Ω–∏–µ = drag ========
btn.addEventListener("touchstart", (e) => {
  startX = e.touches[0].clientX;
  startY = e.touches[0].clientY;
  dragging = false;

  // —Å–æ–∑–¥–∞—ë–º clone, –Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –µ–≥–æ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –±—É–¥–µ—Ç –∏–º–µ–Ω–Ω–æ drag
  dragClone = btn.cloneNode(true);
  dragClone.style.position = "fixed";
  dragClone.style.pointerEvents = "none";
  dragClone.style.opacity = "0";
  dragClone.style.transform = "scale(1.1)";
  dragClone.style.zIndex = "9999";
  document.body.appendChild(dragClone);

  setTimeout(() => {
    if (!dragging) return;
    dragClone.style.opacity = "1";
  }, 120);
});

btn.addEventListener("touchmove", (e) => {
  const dx = Math.abs(e.touches[0].clientX - startX);
  const dy = Math.abs(e.touches[0].clientY - startY);

  // –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞—á–∞–ª —Ç—è–Ω—É—Ç—å ‚Äî —ç—Ç–æ drag
  if (dx > 10 || dy > 10) {
    dragging = true;

    dragClone.style.left = e.touches[0].clientX + "px";
    dragClone.style.top  = e.touches[0].clientY + "px";
  }
});

btn.addEventListener("touchend", (e) => {

  // TAP ‚Üí —Ç—É–ª—Ç–∏–ø
  if (!dragging) {
    showTooltip(btn, word);
    return;
  }

  // DRAG ‚Üí –ø–µ—Ä–µ–Ω–æ—Å –≤ drop-zone
  const dropZone = document
    .getElementById(`drop-zone-${currentSentenceIndex + 1}`)
    .getBoundingClientRect();

  const x = e.changedTouches[0].clientX;
  const y = e.changedTouches[0].clientY;

  if (x >= dropZone.left && x <= dropZone.right &&
      y >= dropZone.top  && y <= dropZone.bottom) {
    selectWord(word);
  }

  dragClone.remove();
  dragClone = null;
  dragging = false;
});
    });

    wordBank.appendChild(btn);
  });
}

// –∑–∞–ø—É—Å–∫ —Ç—Ä–µ–Ω–∞–∂—ë—Ä–∞
initSentence();


// ===============================
// üî∏ –®–ê–ì 5 ‚Äî –ü–†–û–í–ï–†–ö–ê TO BE
// ===============================

const step5Inputs = document.querySelectorAll(".tobe-input");
const step5Feedback = document.getElementById("step5-feedback");
const step5NextBtn = document.getElementById("step5-next-btn");

step5Inputs.forEach(input => {
  input.addEventListener("input", () => {
    const val = input.value.trim().toLowerCase();
    const correct = input.dataset.answer;

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—è
    if (val === correct) {
      input.classList.add("correct");
      input.classList.remove("wrong");
    } else {
      input.classList.remove("correct");
      input.classList.add("wrong");
    }

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –ø–æ–ª–µ–π
    const allCorrect = [...step5Inputs].every(i => 
      i.value.trim().toLowerCase() === i.dataset.answer
    );

    if (allCorrect) {
      step5Feedback.textContent = "–û—Ç–ª–∏—á–Ω–æ! –í—Å–µ —Ñ–æ—Ä–º—ã to be –∑–∞–ø–æ–ª–Ω–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ üéâ";
      step5NextBtn.disabled = false;
      step5NextBtn.classList.remove("opacity-50");
    } else {
      step5Feedback.textContent = "";
      step5NextBtn.disabled = true;
      step5NextBtn.classList.add("opacity-50");
    }
  });
});
// ===============================
// üî∏ –§–ò–ù–ê–õ ‚Äî –°–õ–û–í–ê–†–ò–ö
// ===============================

const vocabBtn = document.getElementById("open-vocab-btn");
const vocabModal = document.getElementById("vocab-modal");
const vocabClose = document.getElementById("vocab-close");
const vocabList = document.getElementById("vocab-words");
const vocabWarning = document.getElementById("vocab-auth-warning");
const vocabSave = document.getElementById("vocab-save");
const vocabSelectAll = document.getElementById("vocab-select-all");

const lesson3Words = [
  { word: "name", translation: "–∏–º—è" },
  { word: "friend", translation: "–¥—Ä—É–≥" },
  { word: "summer", translation: "–ª–µ—Ç–æ" },
  { word: "weather", translation: "–ø–æ–≥–æ–¥–∞" },
  { word: "sunny", translation: "—Å–æ–ª–Ω–µ—á–Ω—ã–π" },
  { word: "people", translation: "–ª—é–¥–∏" },
  { word: "beach", translation: "–ø–ª—è–∂" },
  { word: "future", translation: "–±—É–¥—É—â–µ–µ" },
  { word: "lucky", translation: "—Å—á–∞—Å—Ç–ª–∏–≤—ã–π" },
  { word: "holidays", translation: "–∫–∞–Ω–∏–∫—É–ª—ã" }
];

function openVocabModal() {
  vocabModal.classList.remove("hidden");
  vocabModal.classList.add("flex");

  vocabList.innerHTML = "";
  lesson3Words.forEach(({ word, translation }) => {
    const row = document.createElement("label");
    row.className = "flex items-center gap-2 text-sm";

    row.innerHTML = `
      <input type="checkbox" value="${word}" class="vocab-checkbox w-4 h-4" data-ru="${translation}">
      <span>${word}</span>
      <span class="text-gray-400 text-xs">‚Äî ${translation}</span>
    `;

    vocabList.appendChild(row);
  });

  if (!window.firebaseUserEmail) {
    vocabWarning.classList.remove("hidden");
    vocabSave.disabled = true;
  } else {
    vocabWarning.classList.add("hidden");
    vocabSave.disabled = false;
  }
}

vocabBtn?.addEventListener("click", openVocabModal);
vocabClose?.addEventListener("click", () => {
  vocabModal.classList.add("hidden");
  vocabModal.classList.remove("flex");
});

vocabSelectAll?.addEventListener("click", () => {
  const boxes = document.querySelectorAll(".vocab-checkbox");
  const anyUnchecked = Array.from(boxes).some(b => !b.checked);
  boxes.forEach(b => { b.checked = anyUnchecked; });
});

vocabSave?.addEventListener("click", async () => {
  if (!window.firebaseUserEmail) return;

  const checked = [...document.querySelectorAll(".vocab-checkbox:checked")]
    .map(input => ({
      word: input.value,
      translation: input.dataset.ru || ""
    }));

  if (!checked.length) {
    vocabModal.classList.add("hidden");
    vocabModal.classList.remove("flex");
    return;
  }

  const db = window.firebaseDb;
  const collection = db.collection || (await import("https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js")).collection;
  const addDoc = db.addDoc || (await import("https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js")).addDoc;
  const serverTimestamp = (await import("https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js")).serverTimestamp;

  try {
    const colRef = collection(db, `users/${window.firebaseUserEmail}/vocabulary`);

    for (const { word, translation } of checked) {
      await addDoc(colRef, {
        word,
        translation: translation || "",
        lesson: "lesson-03-word-order",
        courseId: "english-intro",
        category: "vocabulary-lesson3",
        addedAt: serverTimestamp()
      });
    }

    vocabModal.classList.add("hidden");
    vocabModal.classList.remove("flex");
  } catch (e) {
    console.error("–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–ª–æ–≤:", e);
    alert("–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–ª–æ–≤–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.");
  }
});
</script>

<!-- ============================= -->
<!-- –û–ë–©–ò–ô –°–ö–†–ò–ü–¢ –ö–£–†–°–ê (–í–ê–ñ–ù–û!) -->
<!-- ============================= -->
<script type="module" src="/js/courses/english-intro.js"></script>

</body>
</html>
