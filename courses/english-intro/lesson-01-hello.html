<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>English Intro ‚Äî –£—Ä–æ–∫ 1: –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ –∑–≤—É–∫–∏</title>
  <base href="/">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="icon" type="image/jpg" href="/assets/favicon.jpg">

  <style>
    :root{
      --brand-yellow:#FFDE59;
      --brand-yellow-deep:#FFBA08;
      --brand-orange:#E85D04;
      --ink:#0F172A;
      --ink-2:#334155;
    }
    body{
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
      background:radial-gradient(circle at top,#fffef2 0,#FFF8D6 40%,#FFEFC0 100%);
      color:var(--ink);
    }
    .shadow-soft{box-shadow:0 14px 40px rgba(0,0,0,.12)}
    .glass-card{
      background:#fffef7ee;
      backdrop-filter:blur(10px);
      border-radius:1.75rem;
      border:1px solid rgba(15,23,42,.08);
    }
    .step-hidden{display:none;}
  </style>
</head>
<body class="min-h-screen">

<!-- HEADER -->
<header class="sticky top-0 z-40 bg-[#fffef7]/80 backdrop-blur border-b border-black/10">
  <div class="max-w-5xl mx-auto px-4 py-3 flex items-center justify-between">
    <a href="/courses/english-intro/" class="flex items-center gap-3">
      <img src="/assets/logo.png" alt="PolyTalky" class="h-8 w-8 rounded-xl">
      <div class="flex flex-col">
        <span class="font-semibold text-sm leading-tight">PolyTalky ¬∑ English Intro</span>
        <span class="text-[10px] text-[#64748b] leading-tight">–ö–æ—Ä–æ—Ç–∫–∏–µ —É—Ä–æ–∫–∏ ¬∑ 10‚Äì15 –º–∏–Ω—É—Ç</span>
      </div>
    </a>

    <nav class="hidden sm:flex items-center gap-4 text-xs text-[#475569]">
      <a href="/courses/english-intro/#lessons" class="hover:underline">–£—Ä–æ–∫–∏</a>
      <a href="/courses/english-intro/#vocab" class="hover:underline">–°–ª–æ–≤–∞—Ä–∏–∫</a>
      <a href="/courses/english-intro/#exercises" class="hover:underline">–£–ø—Ä–∞–∂–Ω–µ–Ω–∏—è</a>
      <a href="/courses/english-intro/#practice" class="hover:underline">–ü—Ä–∞–∫—Ç–∏–∫–∞</a>
      <a href="/courses/english-intro/"
         class="px-3 py-1.5 rounded-xl border border-black/10 bg-white text-xs shadow-soft hover:bg-[#fff3c6]">
        ‚Üê –ö —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∫—É—Ä—Å–∞
      </a>
    </nav>
  </div>
</header>

<!-- CONTENT -->
<main class="max-w-5xl mx-auto px-4 py-8">
<article class="glass-card shadow-soft p-6 space-y-8">

  <!-- HEADER OF LESSON -->
  <header class="space-y-2">
    <p class="text-[11px] text-[#64748b] uppercase tracking-wide">Day 1 ¬∑ Lesson 1</p>
    <h1 class="text-xl sm:text-2xl font-extrabold">–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ –ø–µ—Ä–≤—ã–µ –∑–≤—É–∫–∏ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ</h1>

    <!-- Progress -->
    <div class="mt-3">
      <div class="flex justify-between text-[11px] text-[#64748b] mb-1">
        <span>–ü—Ä–æ–≥—Ä–µ—Å—Å —É—Ä–æ–∫–∞</span>
        <span id="step-label">–®–∞–≥ 1 –∏–∑ 4</span>
      </div>
      <div class="w-full h-2 bg-gray-200 rounded-full overflow-hidden">
        <div id="step-bar" class="h-full w-1/4 rounded-full"
             style="background:linear-gradient(90deg,var(--brand-orange),var(--brand-yellow));"></div>
      </div>
    </div>
  </header>


  <!-- STEP 1 -->
  <section id="step-1" class="space-y-4">

    <h2 class="font-semibold text-base">–®–∞–≥ 1. –ù–∞—á–∞–ª–æ! üéâ</h2>

    <div class="space-y-2 text-sm">
      <p>–£—Ä–∞, —É—Ä–∞, —É—Ä–∞! –ù–∞—Å—Ç–∞–ª –Ω–∞—à –¥–æ–ª–≥–æ–∂–¥–∞–Ω–Ω—ã–π –∫—É—Ä—Å! –í–æ—Ç –æ–Ω ‚Äî –ø–µ—Ä–≤—ã–π –¥–µ–Ω—å.  
        –î–µ–Ω—å –ø–æ–ª–Ω—ã–π –Ω–∞–¥–µ–∂–¥ –∏ —ç–Ω—Ç—É–∑–∏–∞–∑–º–∞!</p>

      <p>–ï—Å–ª–∏ –≤–¥—Ä—É–≥ —á—Ç–æ-—Ç–æ –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ ‚Äî –Ω–µ —Å—Ç–µ—Å–Ω—è–π—Ç–µ—Å—å —Å–ø—Ä–æ—Å–∏—Ç—å, —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –∏ –æ—á–µ–Ω—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ üôÇ</p>

      <p>–ù—É —á—Ç–æ –∂–µ, –ø—Ä–∏—Å—Ç—É–ø–∏–º?</p>
    </div>

    <div class="border border-gray-200 rounded-2xl p-3 space-y-2 bg-white/80 text-sm">
      <p class="font-semibold">–ú–∏–Ω–∏-–∑–∞–¥–∞–Ω–∏–µ</p>
      <p>–ü–æ–∑–¥–æ—Ä–æ–≤–∞–π—Ç–µ—Å—å –ø–æ-–∞–Ω–≥–ª–∏–π—Å–∫–∏. –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∫–æ—Ä–æ—Ç–∫–æ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞:</p>
      <input id="hello-input" class="w-full border border-gray-200 rounded-xl px-3 py-2 text-sm"
             placeholder='–ù–∞–ø—Ä–∏–º–µ—Ä: "Hello!" –∏–ª–∏ "Hi!"'>
      <p id="hello-status" class="text-[11px] text-[#64748b]">–í–≤–µ–¥–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è.</p>
    </div>

    <div class="flex justify-end">
      <button id="btn-step-1"
              class="px-4 py-2 rounded-xl bg-[#22c55e] text-xs sm:text-sm text-white font-semibold disabled:opacity-50"
              disabled>
        –î–∞–ª–µ–µ ‚Üí –í–∏–¥–µ–æ –æ—Ç –Ω–æ—Å–∏—Ç–µ–ª—è
      </button>
    </div>
  </section>


  <!-- STEP 2 -->
  <section id="step-2" class="space-y-4 step-hidden">

    <h2 class="font-semibold text-base">–®–∞–≥ 2. –í–∏–¥–µ–æ –æ—Ç –Ω–æ—Å–∏—Ç–µ–ª—è</h2>

    <div class="text-sm space-y-2">
      <p>–ê–Ω–≥–ª–∏–π—Å–∫–æ–µ –ø—Ä–æ–∏–∑–Ω–æ—à–µ–Ω–∏–µ ‚Äî –æ–¥–Ω–æ –∏–∑ –Ω–∞–∏–±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã—Ö –≤ –º–∏—Ä–µ,  
      –∑–∞ —Å—á–µ—Ç –¥–µ—Å—è—Ç–∫–æ–≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –±—É–∫–≤–æ—Å–æ—á–µ—Ç–∞–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ–∏–∑–≤–æ–¥—è—Ç —Ä–∞–∑–Ω—ã–µ –∑–≤—É–∫–∏.</p>

      <p>–ù–æ –ø–æ–º–∏–º–æ —ç—Ç–æ–≥–æ, –∞–Ω–≥–ª–∏–π—Å–∫–∏–π —Å–ª–∞–≤–∏—Ç—Å—è —Ç–µ–º, —á—Ç–æ  
      <b>–Ω–∞ –∫–∞–∂–¥–æ–µ –ø—Ä–∞–≤–∏–ª–æ –≤ –Ω–µ–º –≤—Å–µ–≥–¥–∞ –Ω–∞–π–¥—É—Ç—Å—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è!</b></p>

      <p>–î–ª—è –Ω–∞—á–∞–ª–∞ –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —ç—Ç–æ –≤–∏–¥–µ–æ, –≥–¥–µ –Ω–æ—Å–∏—Ç–µ–ª—å —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫–∏–µ –∑–≤—É–∫–∏ –º–æ–∂–Ω–æ –≤—Å—Ç—Ä–µ—Ç–∏—Ç—å  
      –∏ –∫–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏—Ö –ø—Ä–æ–∏–∑–Ω–æ—Å–∏—Ç—å.</p>

      <p class="text-xs text-[#64748b]">
        –ï—Å–ª–∏ –ø–æ–∫–∞ —Å–ª–æ–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å —Ä–µ—á—å ‚Äî –≤–∫–ª—é—á–∏—Ç–µ —Å—É–±—Ç–∏—Ç—Ä—ã –∏ –∞–≤—Ç–æ–ø–µ—Ä–µ–≤–æ–¥ –Ω–∞ —Ä—É—Å—Å–∫–∏–π.
      </p>
    </div>

    <div class="w-full rounded-2xl border border-dashed border-gray-300 p-4 text-xs text-[#64748b] bg-white/70">
      –ó–¥–µ—Å—å –±—É–¥–µ—Ç –≤–∏–¥–µ–æ. –í—Å—Ç–∞–≤—å—Ç–µ iframe YouTube –∏–ª–∏ video-–ø–ª–µ–µ—Ä.
    </div>

    <div class="border border-gray-200 rounded-2xl p-3 bg-white/80 text-sm space-y-2">
      <button id="video-done"
              class="px-3 py-1.5 rounded-full border border-gray-200 bg-[#fffef7] text-xs font-semibold">
        ‚úì –Ø –ø–æ—Å–º–æ—Ç—Ä–µ–ª(–∞) –≤–∏–¥–µ–æ
      </button>
      <p id="video-status" class="text-[11px] text-[#64748b]">–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É, –∫–æ–≥–¥–∞ –±—É–¥–µ—Ç–µ –≥–æ—Ç–æ–≤—ã –∏–¥—Ç–∏ –¥–∞–ª—å—à–µ.</p>
    </div>

    <div class="flex justify-between">
      <button data-back="1" class="px-3 py-2 rounded-xl border bg-white text-xs">‚Üê –ù–∞–∑–∞–¥</button>
      <button id="btn-step-2"
              class="px-4 py-2 rounded-xl bg-[#22c55e] text-xs sm:text-sm text-white font-semibold disabled:opacity-50"
              disabled>
        –î–∞–ª–µ–µ ‚Üí –¢–∞–±–ª–∏—Ü–∞ –≥–ª–∞—Å–Ω—ã—Ö
      </button>
    </div>
  </section>


  <!-- STEP 3 -->
  <section id="step-3" class="space-y-4 step-hidden">

    <h2 class="font-semibold text-base">–®–∞–≥ 3. –¢–∞–±–ª–∏—Ü–∞ –≥–ª–∞—Å–Ω—ã—Ö –±—É–∫–≤–æ—Å–æ—á–µ—Ç–∞–Ω–∏–π</h2>

    <div class="text-sm space-y-2">
      <p>–í—Ä–æ–¥–µ —Å —Ñ–æ–Ω–µ—Ç–∏–∫–æ–π —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–µ–º–Ω–æ–≥–æ –ø–æ–Ω—è—Ç–Ω–µ–µ? –ß—Ç–æ —Å–∫–∞–∂–µ—Ç–µ?</p>
      <p>–û–¥–Ω–∞–∫–æ —Å—Ç–æ–∏—Ç –µ—â–µ —Ä–∞–∑ –≤—Å—ë —Ä–∞–∑–æ–±—Ä–∞—Ç—å.  
      <b>–ù–µ –∑–∞–±—ã–≤–∞–π—Ç–µ —á–∏—Ç–∞—Ç—å –≤—Å–ª—É—Ö</b>, —á—Ç–æ–±—ã –ª—É—á—à–µ –∑–∞–ø–æ–º–Ω–∏—Ç—å.</p>
    </div>

    <div class="w-full rounded-2xl border border-dashed border-gray-300 p-4 text-xs bg-white/70">
      –ó–¥–µ—Å—å –±—É–¥–µ—Ç —Ç–∞–±–ª–∏—Ü–∞: <b>rules-table-of-combinations-of-vowels-under-stress</b>.
    </div>

    <div class="border border-gray-200 rounded-2xl p-3 bg-white/80 text-sm space-y-2">
      <p class="font-semibold">–ú–∏–Ω–∏-–∑–∞–¥–∞–Ω–∏–µ ‚Ññ1</p>
      <p>
        –ü–æ–¥–±–µ—Ä–∏—Ç–µ –ø–æ 3 —Å–≤–æ–∏—Ö –ø—Ä–∏–º–µ—Ä–∞ –Ω–∞ –∫–∞–∂–¥–æ–µ –∏–∑ –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω—ã—Ö –±—É–∫–≤–æ—Å–æ—á–µ—Ç–∞–Ω–∏–π.  
        –ï—Å–ª–∏ –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è ‚Äî –æ—Ç–∫—Ä–æ–π—Ç–µ –ª—é–±–æ–π —Ç–µ–∫—Å—Ç –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º –∏ –∏—â–∏—Ç–µ —Å–ª–æ–≤–∞ —Å –Ω—É–∂–Ω—ã–º–∏ —Å–æ—á–µ—Ç–∞–Ω–∏—è–º–∏.
      </p>
      <textarea id="vowel-input" class="w-full min-h-[70px] border border-gray-200 rounded-xl px-3 py-2 text-sm"
                placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: ai ‚Äî rain, train, Spain ..."></textarea>
      <p id="vowel-status" class="text-[11px] text-[#64748b]">–î–æ–±–∞–≤—å—Ç–µ —Ö–æ—Ç—è –±—ã –ø–∞—Ä—É –ø—Ä–∏–º–µ—Ä–æ–≤.</p>
    </div>

    <div class="flex justify-between">
      <button data-back="2" class="px-3 py-2 rounded-xl border bg-white text-xs">‚Üê –ù–∞–∑–∞–¥</button>
      <button id="btn-step-3"
              class="px-4 py-2 rounded-xl bg-[#22c55e] text-xs sm:text-sm text-white font-semibold disabled:opacity-50"
              disabled>
        –î–∞–ª–µ–µ ‚Üí –ê—É–¥–∏–æ–∑–∞–¥–∞–Ω–∏–µ
      </button>
    </div>
  </section>


  <!-- STEP 4 -->
  <section id="step-4" class="space-y-4 step-hidden">

    <h2 class="font-semibold text-base">–®–∞–≥ 4. –ê—É–¥–∏–æ–∑–∞–¥–∞–Ω–∏–µ + –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å</h2>

    <div class="text-sm space-y-2">
      <p>–¢–µ–ø–µ—Ä—å ‚Äî –ø—Ä–∞–∫—Ç–∏–∫–∞!  
      –ü—Ä–æ–∏–∑–Ω–µ—Å–∏—Ç–µ –≤—Å–ª—É—Ö —Å–ª–æ–≤–∞, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—à–ª–∏, –∏ –∑–∞–ø–∏—à–∏—Ç–µ –∫–æ—Ä–æ—Ç–∫–∏–π –∞—É–¥–∏–æ—Ñ—Ä–∞–≥–º–µ–Ω—Ç.</p>
    </div>

    <!-- AUDIO RECORDER -->
    <div class="border border-gray-200 rounded-2xl p-3 bg-white/80 text-sm space-y-2">
      <p class="font-semibold">–ó–∞–ø–∏—à–∏—Ç–µ —Å–≤–æ–π –≥–æ–ª–æ—Å</p>

      <div class="flex gap-2">
        <button id="rec-start" class="px-3 py-1.5 rounded-full border bg-[#fee2e2] text-xs font-semibold">
          ‚è∫ –ù–∞—á–∞—Ç—å –∑–∞–ø–∏—Å—å
        </button>
        <button id="rec-stop" disabled class="px-3 py-1.5 rounded-full border bg-[#e5e7eb] text-xs font-semibold">
          ‚èπ –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
        </button>
      </div>

      <p id="rec-status" class="text-[11px] text-[#64748b]">–ó–∞–ø–∏—Å—å –ø–æ–∫–∞ –Ω–µ –Ω–∞—á–∞—Ç–∞.</p>

      <audio id="rec-player" controls class="w-full hidden"></audio>

      <p class="text-[11px] text-[#64748b]">
        –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –ø–æ–∑–∂–µ. –°–µ–π—á–∞—Å –º—ã –ø—Ä–æ—Å—Ç–æ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –∞—É–¥–∏–æ.
      </p>
    </div>

    <!-- PRO BLOCK -->
    <div class="border border-amber-200 rounded-2xl p-3 bg-[#fffbeb] text-sm space-y-2">
      <p class="font-semibold">üßë‚Äçüè´ –•–æ—Ç–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É –æ—Ç –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è?</p>
      <p>–í PRO-–≤–µ—Ä—Å–∏–∏ –≤–∞—à–∏ –∞—É–¥–∏–æ–∑–∞–ø–∏—Å–∏ –ø—Ä–æ–≤–µ—Ä—è—Ç –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏ –∏ –¥–∞–¥—É—Ç –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏.</p>
      <a href="/courses/english-intro/pro.html"
         class="px-3 py-1.5 rounded-full border border-amber-300 bg-white text-xs font-semibold inline-block">
        –£–∑–Ω–∞—Ç—å –æ PRO-–ø—Ä–æ–≤–µ—Ä–∫–µ ‚Üí
      </a>
    </div>

    <!-- FINISH -->
    <section class="pt-2 border-t border-gray-100 text-sm space-y-3">
      <h3 class="font-semibold">–°–ª–æ–≤–∞ —ç—Ç–æ–≥–æ —É—Ä–æ–∫–∞</h3>
      <ul class="text-xs list-disc list-inside">
        <li><b>Hello</b> ‚Äî –∑–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ</li>
        <li><b>Hi</b> ‚Äî –ø—Ä–∏–≤–µ—Ç</li>
        <li><b>Good morning</b> ‚Äî –¥–æ–±—Ä–æ–µ —É—Ç—Ä–æ</li>
        <li><b>Goodbye</b> ‚Äî –¥–æ —Å–≤–∏–¥–∞–Ω–∏—è</li>
        <li><b>See you</b> ‚Äî —É–≤–∏–¥–∏–º—Å—è</li>
      </ul>

      <p class="text-[#64748b] text-xs" id="complete-status">
        –ó–∞–≤–µ—Ä—à–∏—Ç–µ –∞—É–¥–∏–æ–∑–∞–¥–∞–Ω–∏–µ, —á—Ç–æ–±—ã –æ—Ç–º–µ—Ç–∏—Ç—å —É—Ä–æ–∫ –ø—Ä–æ–π–¥–µ–Ω–Ω—ã–º.
      </p>

      <div class="flex flex-wrap gap-2">
        <button id="finish-lesson"
                class="px-4 py-2 rounded-xl bg-[#22c55e] text-xs sm:text-sm text-white font-semibold disabled:opacity-50"
                disabled>
          ‚úì –û—Ç–º–µ—Ç–∏—Ç—å —É—Ä–æ–∫ –ø—Ä–æ–π–¥–µ–Ω–Ω—ã–º
        </button>

        <a id="next-lesson" href="/courses/english-intro/lesson-02-phonetics.html"
           class="px-4 py-2 rounded-xl border bg-white text-xs sm:text-sm text-[#334155] disabled:opacity-50 disabled:pointer-events-none">
          ‚Üí –°–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–∫
        </a>

        <a href="/courses/english-intro/#exercises"
           class="px-4 py-2 rounded-xl border bg-white text-xs sm:text-sm text-[#334155]">
          üéØ –ü–æ—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∞—Ç—å—Å—è
        </a>
      </div>
    </section>

    <button data-back="3" class="px-3 py-2 rounded-xl border bg-white text-xs">‚Üê –ù–∞–∑–∞–¥</button>

  </section>

</article>
</main>


<script src="/courses/english-intro/english-intro-state.js"></script>
<script>
  /* STATE */
  const LESSON_ID = "lesson-01-hello";

  const steps = {
    1: document.getElementById("step-1"),
    2: document.getElementById("step-2"),
    3: document.getElementById("step-3"),
    4: document.getElementById("step-4"),
  };

  const stepLabel = document.getElementById("step-label");
  const stepBar = document.getElementById("step-bar");

  function showStep(n){
    Object.entries(steps).forEach(([i,el])=>{
      el.classList.toggle("step-hidden", Number(i)!==n);
    });
    stepLabel.textContent = `–®–∞–≥ ${n} –∏–∑ 4`;
    stepBar.style.width = (n*25) + "%";
  }

  /* STEP 1 */
  const helloInput = document.getElementById("hello-input");
  const helloStatus = document.getElementById("hello-status");
  const next1 = document.getElementById("btn-step-1");

  helloInput.addEventListener("input", ()=>{
    const v = (helloInput.value||"").trim().toLowerCase();
    if(!v){
      helloStatus.textContent = "–í–≤–µ–¥–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è.";
      next1.disabled = true;
    } else {
      helloStatus.textContent = "–û—Ç–ª–∏—á–Ω–æ!";
      next1.disabled = false;
    }
  });

  next1.addEventListener("click", ()=>showStep(2));


  /* STEP 2 */
  const videoBtn = document.getElementById("video-done");
  const videoStatus = document.getElementById("video-status");
  const next2 = document.getElementById("btn-step-2");

  videoBtn.addEventListener("click", ()=>{
    videoStatus.textContent = "–°—É–ø–µ—Ä! –ú–æ–∂–Ω–æ –¥–≤–∏–≥–∞—Ç—å—Å—è –¥–∞–ª—å—à–µ.";
    videoStatus.classList.add("text-emerald-600");
    next2.disabled = false;
  });

  next2.addEventListener("click", ()=>showStep(3));


  /* STEP 3 */
  const vowelInput = document.getElementById("vowel-input");
  const vowelStatus = document.getElementById("vowel-status");
  const next3 = document.getElementById("btn-step-3");

  vowelInput.addEventListener("input", ()=>{
    const v = (vowelInput.value||"").trim();
    if(v.length < 5){
      vowelStatus.textContent = "–î–æ–±–∞–≤—å—Ç–µ —Ö–æ—Ç—è –±—ã –ø–∞—Ä—É –ø—Ä–∏–º–µ—Ä–æ–≤.";
      next3.disabled = false; /* –º–æ–∂–Ω–æ –ø–µ—Ä–µ–π—Ç–∏ –¥–∞–ª—å—à–µ */
    } else {
      vowelStatus.textContent = "–û—Ç–ª–∏—á–Ω–æ!";
      next3.disabled = false;
    }
  });

  next3.addEventListener("click", ()=>showStep(4));


  /* STEP 4 ‚Äî RECORDING */
  const recStart = document.getElementById("rec-start");
  const recStop = document.getElementById("rec-stop");
  const recStatus = document.getElementById("rec-status");
  const recPlayer = document.getElementById("rec-player");
  const finishLesson = document.getElementById("finish-lesson");
  const completeStatus = document.getElementById("complete-status");
  const nextLesson = document.getElementById("next-lesson");

  let mediaRecorder = null;
  let chunks = [];
  let startedAt = null;

  recStart.addEventListener("click", async ()=>{
    try{
      const stream = await navigator.mediaDevices.getUserMedia({ audio:true });
      mediaRecorder = new MediaRecorder(stream);
      chunks = [];
      mediaRecorder.ondataavailable = e=>chunks.push(e.data);
      mediaRecorder.onstop = ()=>{
        const blob = new Blob(chunks,{type:"audio/webm"});
        const url = URL.createObjectURL(blob);
        recPlayer.src = url;
        recPlayer.classList.remove("hidden");

        recStatus.textContent = "–ó–∞–ø–∏—Å—å –≥–æ—Ç–æ–≤–∞!";
        recStatus.classList.add("text-emerald-600");
        finishLesson.disabled = false;
      };
      mediaRecorder.start();
      startedAt = Date.now();
      recStatus.textContent = "–ò–¥—ë—Ç –∑–∞–ø–∏—Å—å...";
      recStart.disabled = true;
      recStop.disabled = false;
    }catch(e){
      recStatus.textContent = "–ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É.";
      recStatus.classList.add("text-red-600");
    }
  });

  recStop.addEventListener("click", ()=>{
    if(mediaRecorder && mediaRecorder.state==="recording"){
      mediaRecorder.stop();
      recStart.disabled = false;
      recStop.disabled = true;
    }
  });

  /* FINISH LESSON */
  finishLesson.addEventListener("click", ()=>{
    EnglishIntro.completeLesson(LESSON_ID, 20);

    [
      {word:"hello", translation:"–∑–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ"},
      {word:"hi", translation:"–ø—Ä–∏–≤–µ—Ç"},
      {word:"good morning", translation:"–¥–æ–±—Ä–æ–µ —É—Ç—Ä–æ"},
      {word:"goodbye", translation:"–¥–æ —Å–≤–∏–¥–∞–Ω–∏—è"},
      {word:"see you", translation:"—É–≤–∏–¥–∏–º—Å—è"}
    ].forEach(w=>EnglishIntro.addVocab({word:w.word,translation:w.translation,lessonId:LESSON_ID}));

    completeStatus.textContent = "–£—Ä–æ–∫ –∑–∞–≤–µ—Ä—à—ë–Ω! –ú–æ–∂–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –¥–∞–ª—å—à–µ.";
    finishLesson.disabled = true;
  });

  /* BACK BUTTONS */
  document.querySelectorAll("[data-back]").forEach(btn=>{
    btn.addEventListener("click", ()=>showStep(Number(btn.dataset.back)));
  });


  /* INIT */
  showStep(1);
</script>

</body>
</html>
